"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/user/suggestFollow";
exports.ids = ["pages/api/user/suggestFollow"];
exports.modules = {

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "micro-method-router":
/*!**************************************!*\
  !*** external "micro-method-router" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("micro-method-router");

/***/ }),

/***/ "(api)/./controllers/user.ts":
/*!*****************************!*\
  !*** ./controllers/user.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addFollower\": () => (/* binding */ addFollower),\n/* harmony export */   \"get10RandomsUsers\": () => (/* binding */ get10RandomsUsers),\n/* harmony export */   \"getAllTweetsFromUser\": () => (/* binding */ getAllTweetsFromUser),\n/* harmony export */   \"getAllUsers\": () => (/* binding */ getAllUsers),\n/* harmony export */   \"getMe\": () => (/* binding */ getMe),\n/* harmony export */   \"getMostFollowedUsers\": () => (/* binding */ getMostFollowedUsers),\n/* harmony export */   \"getOthersProfile\": () => (/* binding */ getOthersProfile),\n/* harmony export */   \"getUserFeed\": () => (/* binding */ getUserFeed),\n/* harmony export */   \"getWhoToFollow\": () => (/* binding */ getWhoToFollow),\n/* harmony export */   \"handleUnfollow\": () => (/* binding */ handleUnfollow),\n/* harmony export */   \"saveAction\": () => (/* binding */ saveAction),\n/* harmony export */   \"updateUserProfile\": () => (/* binding */ updateUserProfile)\n/* harmony export */ });\n/* harmony import */ var models_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/user */ \"(api)/./models/user.ts\");\n/* harmony import */ var models_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/auth */ \"(api)/./models/auth.ts\");\n\n\n// If this layer  get to long I may separate it into smaller blocks.\nasync function getMe(token) {\n    const auth = new models_auth__WEBPACK_IMPORTED_MODULE_1__.Auth(token);\n    await auth.pull();\n    const userId = auth.data.userId;\n    const user = new models_user__WEBPACK_IMPORTED_MODULE_0__.User(userId);\n    await user.pull();\n    return user;\n}\nasync function updateUserProfile(updateBody, token) {\n    const user = await getMe(token.authId);\n    if (updateBody.newBody.email) {\n        user.data.email = updateBody.newBody.email;\n    }\n    if (updateBody.newBody.fullname) {\n        user.data.fullname = updateBody.newBody.fullname;\n    }\n    if (updateBody.newBody.description) {\n        user.data.description = updateBody.newBody.description;\n    }\n    if (updateBody.newBody.pics.coverPicture) {\n        user.data.pics.coverPicture = updateBody.newBody.pics.coverPicture;\n    }\n    if (updateBody.newBody.pics.profilePicture) {\n        user.data.pics.profilePicture = updateBody.newBody.pics.profilePicture;\n    }\n    const updated = await user.push();\n    return updated;\n}\n// Adds following to user making the request and a follower to followed user.\nasync function addFollower(followedId, authId) {\n    // First , it gets the user following reference by the authId,then the followed user reference\n    // by followedId param obtained using the url in the frontend,\n    // to access their following and followers properties.\n    const me = await getMe(authId);\n    me.data.following.push(Number(followedId));\n    await me.push();\n    const userFollowed = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(followedId);\n    userFollowed.data.followers.push(Number(me.data.generatedId));\n    await userFollowed.push();\n    return true;\n}\n// Decreases your following count and the unfollowed's followers count\n// Also deletes the unfollowed's tweets from your feed.\nasync function handleUnfollow(unfollowedId, authId) {\n    // Here removes tweets from feed.\n    const me = await getMe(authId);\n    me.data.feed.map(async (tweet, index)=>{\n        if (tweet.userId == unfollowedId) {\n            me.data.feed.splice(index, 1);\n        }\n        await me.push();\n    });\n    // Here  removes the unfollowed user from our following list.\n    const unfollowedIndex = me.data.following.find((ids)=>ids == unfollowedId);\n    const indexOfUserResult = me.data.following.indexOf(unfollowedIndex);\n    if (indexOfUserResult > -1) {\n        me.data.following.splice(indexOfUserResult, 1);\n        await me.push();\n    }\n    // Here removes us from unfollowed's  followers list.\n    const unfollowedUser = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(unfollowedId);\n    await unfollowedUser.pull();\n    const unfollowedUserResult = unfollowedUser.data.followers.find((ids)=>ids == me.data.generatedId);\n    const indexOfMeInUnfollowedFollowers = unfollowedUser.data.followers.indexOf(unfollowedUserResult);\n    if (indexOfMeInUnfollowedFollowers > -1) {\n        unfollowedUser.data.followers.splice(indexOfMeInUnfollowedFollowers, 1);\n        await unfollowedUser.push();\n    }\n    return true;\n}\nasync function getUserFeed(authId) {\n    const user = await getMe(authId);\n    return user.data.feed;\n}\n// Guarda el tweet en nuestra data en el atributo like o save cuando le damos like o save a algun tweet.\nasync function saveAction(action, tweet, token) {\n    const user = await getMe(token);\n    if (action == \"like\") {\n        user.data.likes.find(async (t)=>{\n            if (t.id == tweet.data.id) {\n                // console.log(\"hay otro igual\");\n                return false;\n            } else if (t.id != undefined) {\n                // console.log(\"no habia otro igual\");\n                user.data.likes.push(tweet.data);\n                await user.push();\n            }\n        });\n    }\n    if (action == \"save\") {\n        user.data.saves.find(async (t)=>{\n            if (t.id == tweet.data.id) {\n                return false;\n            } else {\n                user.data.saves.push(tweet.data);\n                await user.push();\n            }\n        });\n    }\n}\nasync function getAllTweetsFromUser(userId) {\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(userId);\n    return user.data.tweets;\n}\nasync function getOthersProfile(userId) {\n    const result = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(userId);\n    return result?.data;\n}\n// This function was crashing every time because of the for loop , It was falling\n// into recursion because I was looping until the array length  had 2 elements but It may never have to.\nasync function getWhoToFollow(token) {\n    const me = await getMe(token.authId);\n    const usersList = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    let arr = [];\n    let newArr = [];\n    // Fix this shit\n    for(let i = 0; i < 2; i++){\n        const randomUser = usersList.map((user)=>{\n            return user;\n        });\n        me.data.following.map((followed)=>{\n            if (followed == randomUser[i].generatedId) {\n                return;\n            } else if (arr[0]?.generatedId == randomUser[i].generatedId) {\n                // Chequea si ya se ha metido un elemento identico al array previamente.\n                return;\n            } else {\n                //  No existe tanto en following como en el array.\n                arr.push(randomUser[i]);\n                return true;\n            }\n        });\n    }\n    /*   for (const user of arr) {\r\n    console.log(user.fullname);\r\n  } */ return arr;\n}\nasync function getAllUsers(query) {\n    const users = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const result = users.filter((user)=>{\n        if (user.fullname.includes(query)) {\n            return user;\n        }\n    });\n    return result;\n}\nasync function get10RandomsUsers() {\n    const allUsers = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const allRandoms = [];\n    for(let index = 0; index < 10; index++){\n        const random = allUsers[Math.floor(Math.random() * allUsers.length)];\n        allRandoms.push(random);\n    }\n    return allRandoms;\n}\nfunction compareFunction(a, b) {\n    return b.followers.length - a.followers.length;\n}\nasync function getMostFollowedUsers() {\n    // Bring users and compare their followers length to sort them\n    //  use .sort()\n    const users = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const sliceData = users.map((user)=>{\n        return {\n            fullname: user.fullname,\n            userId: user.generatedId,\n            followers: user.followers,\n            description: user.description,\n            pics: {\n                profilePicture: user.pics.profilePicture\n            }\n        };\n    });\n    const sortedUsers = sliceData.sort(compareFunction);\n    return sortedUsers;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxNQUFNLENBQUMsQ0FBQztLQUN6QjtJQUNELE9BQU9ELFVBQVUsQ0FBQztDQUNuQjtBQUVELFNBQVNLOztDQUVSO0FBRUQsT0FBTyxlQUFlRyxvQkFBb0IsR0FBRzs7QUFFM0MsWUFBZTtJQUNmLE1BQU1iLEtBQUssR0FBRyxNQUFNbkUsSUFBSSxDQUFDMkQsTUFBTSxFQUFFO0lBQ2pDLE1BQU1zQixTQUFTO1FBQ2IsT0FBTztZQUNMbkUsUUFBUSxFQUFFTixJQUFJLENBQUNNLFFBQVE7WUFDdkJSO1lBQ0FzQixTQUFTLEVBQUVwQixJQUFJLENBQUNvQjtZQUNoQmIsV0FBVyxFQUFFUCxJQUFJLENBQUNPO1lBQ2xCQyxJQUFJLEVBQUU7Z0JBQ0pFLGNBQWMsRUFBRVYsSUFBSSxDQUFDUSxJQUFJLENBQUNFO2FBQzNCO1NBQ0YsQ0FBQztLQUNILENBQUM7SUFDRixNQUFNZ0U7SUFDTjtDQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL2NvbnRyb2xsZXJzL3VzZXIudHM/OTZiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyIH0gZnJvbSBcIm1vZGVscy91c2VyXCI7XHJcbmltcG9ydCB7IEF1dGggfSBmcm9tIFwibW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgVXNlckRhdGEgfSBmcm9tIFwiY3VzdG9tXCI7XHJcbmltcG9ydCB7IGdldF9yYW5kb20gfSBmcm9tIFwibGliXCI7XHJcblxyXG4vLyBJZiB0aGlzIGxheWVyICBnZXQgdG8gbG9uZyBJIG1heSBzZXBhcmF0ZSBpdCBpbnRvIHNtYWxsZXIgYmxvY2tzLlxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lKHRva2VuKSB7XHJcbiAgY29uc3QgYXV0aCA9IG5ldyBBdXRoKHRva2VuKTtcclxuICBhd2FpdCBhdXRoLnB1bGwoKTtcclxuICBjb25zdCB1c2VySWQgPSBhdXRoLmRhdGEudXNlcklkO1xyXG4gIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih1c2VySWQpO1xyXG4gIGF3YWl0IHVzZXIucHVsbCgpO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclByb2ZpbGUodXBkYXRlQm9keSwgdG9rZW4pIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0TWUodG9rZW4uYXV0aElkKTtcclxuICBpZiAodXBkYXRlQm9keS5uZXdCb2R5LmVtYWlsKSB7XHJcbiAgICB1c2VyLmRhdGEuZW1haWwgPSB1cGRhdGVCb2R5Lm5ld0JvZHkuZW1haWw7XHJcbiAgfVxyXG4gIGlmICh1cGRhdGVCb2R5Lm5ld0JvZHkuZnVsbG5hbWUpIHtcclxuICAgIHVzZXIuZGF0YS5mdWxsbmFtZSA9IHVwZGF0ZUJvZHkubmV3Qm9keS5mdWxsbmFtZTtcclxuICB9XHJcbiAgaWYgKHVwZGF0ZUJvZHkubmV3Qm9keS5kZXNjcmlwdGlvbikge1xyXG4gICAgdXNlci5kYXRhLmRlc2NyaXB0aW9uID0gdXBkYXRlQm9keS5uZXdCb2R5LmRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgaWYgKHVwZGF0ZUJvZHkubmV3Qm9keS5waWNzLmNvdmVyUGljdHVyZSkge1xyXG4gICAgdXNlci5kYXRhLnBpY3MuY292ZXJQaWN0dXJlID0gdXBkYXRlQm9keS5uZXdCb2R5LnBpY3MuY292ZXJQaWN0dXJlO1xyXG4gIH1cclxuICBpZiAodXBkYXRlQm9keS5uZXdCb2R5LnBpY3MucHJvZmlsZVBpY3R1cmUpIHtcclxuICAgIHVzZXIuZGF0YS5waWNzLnByb2ZpbGVQaWN0dXJlID0gdXBkYXRlQm9keS5uZXdCb2R5LnBpY3MucHJvZmlsZVBpY3R1cmU7XHJcbiAgfVxyXG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCB1c2VyLnB1c2goKTtcclxuICByZXR1cm4gdXBkYXRlZDtcclxufVxyXG5cclxuLy8gQWRkcyBmb2xsb3dpbmcgdG8gdXNlciBtYWtpbmcgdGhlIHJlcXVlc3QgYW5kIGEgZm9sbG93ZXIgdG8gZm9sbG93ZWQgdXNlci5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRGb2xsb3dlcihmb2xsb3dlZElkOiBudW1iZXIsIGF1dGhJZCkge1xyXG4gIC8vIEZpcnN0ICwgaXQgZ2V0cyB0aGUgdXNlciBmb2xsb3dpbmcgcmVmZXJlbmNlIGJ5IHRoZSBhdXRoSWQsdGhlbiB0aGUgZm9sbG93ZWQgdXNlciByZWZlcmVuY2VcclxuICAvLyBieSBmb2xsb3dlZElkIHBhcmFtIG9idGFpbmVkIHVzaW5nIHRoZSB1cmwgaW4gdGhlIGZyb250ZW5kLFxyXG4gIC8vIHRvIGFjY2VzcyB0aGVpciBmb2xsb3dpbmcgYW5kIGZvbGxvd2VycyBwcm9wZXJ0aWVzLlxyXG4gIGNvbnN0IG1lID0gYXdhaXQgZ2V0TWUoYXV0aElkKTtcclxuICBtZS5kYXRhLmZvbGxvd2luZy5wdXNoKE51bWJlcihmb2xsb3dlZElkKSk7XHJcbiAgYXdhaXQgbWUucHVzaCgpO1xyXG4gIGNvbnN0IHVzZXJGb2xsb3dlZCA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZm9sbG93ZWRJZCk7XHJcbiAgdXNlckZvbGxvd2VkLmRhdGEuZm9sbG93ZXJzLnB1c2goTnVtYmVyKG1lLmRhdGEuZ2VuZXJhdGVkSWQpKTtcclxuICBhd2FpdCB1c2VyRm9sbG93ZWQucHVzaCgpO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBEZWNyZWFzZXMgeW91ciBmb2xsb3dpbmcgY291bnQgYW5kIHRoZSB1bmZvbGxvd2VkJ3MgZm9sbG93ZXJzIGNvdW50XHJcbi8vIEFsc28gZGVsZXRlcyB0aGUgdW5mb2xsb3dlZCdzIHR3ZWV0cyBmcm9tIHlvdXIgZmVlZC5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVVuZm9sbG93KHVuZm9sbG93ZWRJZCwgYXV0aElkKSB7XHJcbiAgLy8gSGVyZSByZW1vdmVzIHR3ZWV0cyBmcm9tIGZlZWQuXHJcbiAgY29uc3QgbWUgPSBhd2FpdCBnZXRNZShhdXRoSWQpO1xyXG4gIG1lLmRhdGEuZmVlZC5tYXAoYXN5bmMgKHR3ZWV0OiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICBpZiAodHdlZXQudXNlcklkID09IHVuZm9sbG93ZWRJZCkge1xyXG4gICAgICBtZS5kYXRhLmZlZWQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIGF3YWl0IG1lLnB1c2goKTtcclxuICB9KTtcclxuXHJcbiAgLy8gSGVyZSAgcmVtb3ZlcyB0aGUgdW5mb2xsb3dlZCB1c2VyIGZyb20gb3VyIGZvbGxvd2luZyBsaXN0LlxyXG4gIGNvbnN0IHVuZm9sbG93ZWRJbmRleCA9IG1lLmRhdGEuZm9sbG93aW5nLmZpbmQoKGlkcykgPT4gaWRzID09IHVuZm9sbG93ZWRJZCk7XHJcbiAgY29uc3QgaW5kZXhPZlVzZXJSZXN1bHQgPSBtZS5kYXRhLmZvbGxvd2luZy5pbmRleE9mKHVuZm9sbG93ZWRJbmRleCk7XHJcbiAgaWYgKGluZGV4T2ZVc2VyUmVzdWx0ID4gLTEpIHtcclxuICAgIG1lLmRhdGEuZm9sbG93aW5nLnNwbGljZShpbmRleE9mVXNlclJlc3VsdCwgMSk7XHJcbiAgICBhd2FpdCBtZS5wdXNoKCk7XHJcbiAgfVxyXG5cclxuICAvLyBIZXJlIHJlbW92ZXMgdXMgZnJvbSB1bmZvbGxvd2VkJ3MgIGZvbGxvd2VycyBsaXN0LlxyXG5cclxuICBjb25zdCB1bmZvbGxvd2VkVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodW5mb2xsb3dlZElkKTtcclxuICBhd2FpdCB1bmZvbGxvd2VkVXNlci5wdWxsKCk7XHJcblxyXG4gIGNvbnN0IHVuZm9sbG93ZWRVc2VyUmVzdWx0ID0gdW5mb2xsb3dlZFVzZXIuZGF0YS5mb2xsb3dlcnMuZmluZChcclxuICAgIChpZHMpID0+IGlkcyA9PSBtZS5kYXRhLmdlbmVyYXRlZElkXHJcbiAgKTtcclxuICBjb25zdCBpbmRleE9mTWVJblVuZm9sbG93ZWRGb2xsb3dlcnMgPVxyXG4gICAgdW5mb2xsb3dlZFVzZXIuZGF0YS5mb2xsb3dlcnMuaW5kZXhPZih1bmZvbGxvd2VkVXNlclJlc3VsdCk7XHJcbiAgaWYgKGluZGV4T2ZNZUluVW5mb2xsb3dlZEZvbGxvd2VycyA+IC0xKSB7XHJcbiAgICB1bmZvbGxvd2VkVXNlci5kYXRhLmZvbGxvd2Vycy5zcGxpY2UoaW5kZXhPZk1lSW5VbmZvbGxvd2VkRm9sbG93ZXJzLCAxKTtcclxuICAgIGF3YWl0IHVuZm9sbG93ZWRVc2VyLnB1c2goKTtcclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRmVlZChhdXRoSWQpIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0TWUoYXV0aElkKTtcclxuICByZXR1cm4gdXNlci5kYXRhLmZlZWQ7XHJcbn1cclxuXHJcbi8vIEd1YXJkYSBlbCB0d2VldCBlbiBudWVzdHJhIGRhdGEgZW4gZWwgYXRyaWJ1dG8gbGlrZSBvIHNhdmUgY3VhbmRvIGxlIGRhbW9zIGxpa2UgbyBzYXZlIGEgYWxndW4gdHdlZXQuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQWN0aW9uKGFjdGlvbiwgdHdlZXQsIHRva2VuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldE1lKHRva2VuKTtcclxuICBpZiAoYWN0aW9uID09IFwibGlrZVwiKSB7XHJcbiAgICB1c2VyLmRhdGEubGlrZXMuZmluZChhc3luYyAodDogYW55KSA9PiB7XHJcbiAgICAgIGlmICh0LmlkID09IHR3ZWV0LmRhdGEuaWQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImhheSBvdHJvIGlndWFsXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSBlbHNlIGlmICh0LmlkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwibm8gaGFiaWEgb3RybyBpZ3VhbFwiKTtcclxuICAgICAgICB1c2VyLmRhdGEubGlrZXMucHVzaCh0d2VldC5kYXRhKTtcclxuICAgICAgICBhd2FpdCB1c2VyLnB1c2goKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGlmIChhY3Rpb24gPT0gXCJzYXZlXCIpIHtcclxuICAgIHVzZXIuZGF0YS5zYXZlcy5maW5kKGFzeW5jICh0OiBhbnkpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gdHdlZXQuZGF0YS5pZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1c2VyLmRhdGEuc2F2ZXMucHVzaCh0d2VldC5kYXRhKTtcclxuICAgICAgICBhd2FpdCB1c2VyLnB1c2goKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVHdlZXRzRnJvbVVzZXIodXNlcklkOiBudW1iZXIpIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xyXG4gIHJldHVybiB1c2VyLmRhdGEudHdlZXRzO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3RoZXJzUHJvZmlsZSh1c2VySWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICByZXR1cm4gcmVzdWx0Py5kYXRhO1xyXG59XHJcblxyXG4vLyBUaGlzIGZ1bmN0aW9uIHdhcyBjcmFzaGluZyBldmVyeSB0aW1lIGJlY2F1c2Ugb2YgdGhlIGZvciBsb29wICwgSXQgd2FzIGZhbGxpbmdcclxuLy8gaW50byByZWN1cnNpb24gYmVjYXVzZSBJIHdhcyBsb29waW5nIHVudGlsIHRoZSBhcnJheSBsZW5ndGggIGhhZCAyIGVsZW1lbnRzIGJ1dCBJdCBtYXkgbmV2ZXIgaGF2ZSB0by5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdob1RvRm9sbG93KHRva2VuKSB7XHJcbiAgY29uc3QgbWUgPSBhd2FpdCBnZXRNZSh0b2tlbi5hdXRoSWQpO1xyXG4gIGNvbnN0IHVzZXJzTGlzdCA9IGF3YWl0IFVzZXIuZ2V0QWxsKCk7XHJcblxyXG4gIGxldCBhcnIgPSBbXTtcclxuICBsZXQgbmV3QXJyID0gW107XHJcbiAgLy8gRml4IHRoaXMgc2hpdFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICBjb25zdCByYW5kb21Vc2VyID0gdXNlcnNMaXN0Lm1hcCgodXNlcikgPT4ge1xyXG4gICAgICByZXR1cm4gdXNlcjtcclxuICAgIH0pO1xyXG5cclxuICAgIG1lLmRhdGEuZm9sbG93aW5nLm1hcCgoZm9sbG93ZWQpID0+IHtcclxuICAgICAgaWYgKGZvbGxvd2VkID09IHJhbmRvbVVzZXJbaV0uZ2VuZXJhdGVkSWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSBpZiAoYXJyWzBdPy5nZW5lcmF0ZWRJZCA9PSByYW5kb21Vc2VyW2ldLmdlbmVyYXRlZElkKSB7XHJcbiAgICAgICAgLy8gQ2hlcXVlYSBzaSB5YSBzZSBoYSBtZXRpZG8gdW4gZWxlbWVudG8gaWRlbnRpY28gYWwgYXJyYXkgcHJldmlhbWVudGUuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICBObyBleGlzdGUgdGFudG8gZW4gZm9sbG93aW5nIGNvbW8gZW4gZWwgYXJyYXkuXHJcbiAgICAgICAgYXJyLnB1c2gocmFuZG9tVXNlcltpXSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiAgIGZvciAoY29uc3QgdXNlciBvZiBhcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKHVzZXIuZnVsbG5hbWUpO1xyXG4gIH0gKi9cclxuXHJcbiAgcmV0dXJuIGFycjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKHF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZ2V0QWxsKCk7XHJcbiAgY29uc3QgcmVzdWx0ID0gdXNlcnMuZmlsdGVyKCh1c2VyKSA9PiB7XHJcbiAgICBpZiAodXNlci5mdWxsbmFtZS5pbmNsdWRlcyhxdWVyeSkpIHtcclxuICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldDEwUmFuZG9tc1VzZXJzKCkge1xyXG4gIGNvbnN0IGFsbFVzZXJzID0gYXdhaXQgVXNlci5nZXRBbGwoKTtcclxuXHJcbiAgY29uc3QgYWxsUmFuZG9tcyA9IFtdO1xyXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMDsgaW5kZXgrKykge1xyXG4gICAgY29uc3QgcmFuZG9tID0gYWxsVXNlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsVXNlcnMubGVuZ3RoKV07XHJcbiAgICBhbGxSYW5kb21zLnB1c2gocmFuZG9tKTtcclxuICB9XHJcbiAgcmV0dXJuIGFsbFJhbmRvbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBhcmVGdW5jdGlvbihhLCBiKSB7XHJcbiAgcmV0dXJuIGIuZm9sbG93ZXJzLmxlbmd0aCAtIGEuZm9sbG93ZXJzLmxlbmd0aDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vc3RGb2xsb3dlZFVzZXJzKCkge1xyXG4gIC8vIEJyaW5nIHVzZXJzIGFuZCBjb21wYXJlIHRoZWlyIGZvbGxvd2VycyBsZW5ndGggdG8gc29ydCB0aGVtXHJcbiAgLy8gIHVzZSAuc29ydCgpXHJcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmdldEFsbCgpO1xyXG4gIGNvbnN0IHNsaWNlRGF0YSA9IHVzZXJzLm1hcCgodXNlcikgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZnVsbG5hbWU6IHVzZXIuZnVsbG5hbWUsXHJcbiAgICAgIHVzZXJJZDogdXNlci5nZW5lcmF0ZWRJZCxcclxuICAgICAgZm9sbG93ZXJzOiB1c2VyLmZvbGxvd2VycyxcclxuICAgICAgZGVzY3JpcHRpb246IHVzZXIuZGVzY3JpcHRpb24sXHJcbiAgICAgIHBpY3M6IHtcclxuICAgICAgICBwcm9maWxlUGljdHVyZTogdXNlci5waWNzLnByb2ZpbGVQaWN0dXJlLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9KTtcclxuICBjb25zdCBzb3J0ZWRVc2VycyA9IHNsaWNlRGF0YS5zb3J0KGNvbXBhcmVGdW5jdGlvbiBhcyBhbnkpO1xyXG4gIHJldHVybiBzb3J0ZWRVc2VycztcclxufVxyXG4iXSwibmFtZXMiOlsiVXNlciIsIkF1dGgiLCJnZXRNZSIsInRva2VuIiwiYXV0aCIsInB1bGwiLCJ1c2VySWQiLCJkYXRhIiwidXNlciIsInVwZGF0ZVVzZXJQcm9maWxlIiwidXBkYXRlQm9keSIsImF1dGhJZCIsIm5ld0JvZHkiLCJlbWFpbCIsImZ1bGxuYW1lIiwiZGVzY3JpcHRpb24iLCJwaWNzIiwiY292ZXJQaWN0dXJlIiwicHJvZmlsZVBpY3R1cmUiLCJ1cGRhdGVkIiwicHVzaCIsImFkZEZvbGxvd2VyIiwiZm9sbG93ZWRJZCIsIm1lIiwiZm9sbG93aW5nIiwiTnVtYmVyIiwidXNlckZvbGxvd2VkIiwiZmluZEJ5SWQiLCJmb2xsb3dlcnMiLCJnZW5lcmF0ZWRJZCIsImhhbmRsZVVuZm9sbG93IiwidW5mb2xsb3dlZElkIiwiZmVlZCIsIm1hcCIsInR3ZWV0IiwiaW5kZXgiLCJzcGxpY2UiLCJ1bmZvbGxvd2VkSW5kZXgiLCJmaW5kIiwiaWRzIiwiaW5kZXhPZlVzZXJSZXN1bHQiLCJpbmRleE9mIiwidW5mb2xsb3dlZFVzZXIiLCJ1bmZvbGxvd2VkVXNlclJlc3VsdCIsImluZGV4T2ZNZUluVW5mb2xsb3dlZEZvbGxvd2VycyIsImdldFVzZXJGZWVkIiwic2F2ZUFjdGlvbiIsImFjdGlvbiIsImxpa2VzIiwidCIsImlkIiwidW5kZWZpbmVkIiwic2F2ZXMiLCJnZXRBbGxUd2VldHNGcm9tVXNlciIsInR3ZWV0cyIsImdldE90aGVyc1Byb2ZpbGUiLCJyZXN1bHQiLCJnZXRXaG9Ub0ZvbGxvdyIsInVzZXJzTGlzdCIsImdldEFsbCIsImFyciIsIm5ld0FyciIsImkiLCJyYW5kb21Vc2VyIiwiZm9sbG93ZWQiLCJnZXRBbGxVc2VycyIsInF1ZXJ5IiwidXNlcnMiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsImdldDEwUmFuZG9tc1VzZXJzIiwiYWxsVXNlcnMiLCJhbGxSYW5kb21zIiwicmFuZG9tIiwiTWF0aCIsImZsb29yIiwibGVuZ3RoIiwiY29tcGFyZUZ1bmN0aW9uIiwiYSIsImIiLCJnZXRNb3N0Rm9sbG93ZWRVc2VycyIsInNsaWNlRGF0YSIsInNvcnRlZFVzZXJzIiwic29ydCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./controllers/user.ts\n");

/***/ }),

/***/ "(api)/./lib/conn/firestore.ts":
/*!*******************************!*\
  !*** ./lib/conn/firestore.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"firestore\": () => (/* binding */ firestore)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\nconst servAcc = JSON.parse(process.env.DB_KEY);\nif ((firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().apps.length) == 0) {\n    firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp({\n        credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().credential.cert(servAcc)\n    });\n}\nconst firestore = firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().firestore();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvY29ubi9maXJlc3RvcmUudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBRW5DLE1BQU1DLE9BQU8sR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxNQUFNLENBQUM7QUFFOUMsSUFBSU4sbUVBQWlCLElBQUksQ0FBQyxFQUFFO0lBQzFCQSxtRUFBbUIsQ0FBQztRQUNsQlUsVUFBVSxFQUFFVixxRUFBcUIsQ0FBQ0MsT0FBTyxDQUFDO0tBQzNDLENBQUMsQ0FBQztDQUNKO0FBRUQsTUFBTVcsU0FBUyxHQUFHWiwrREFBZSxFQUFFO0FBRWQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL2Nvbm4vZmlyZXN0b3JlLnRzP2U4NmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkbWluIGZyb20gXCJmaXJlYmFzZS1hZG1pblwiO1xyXG5cclxuY29uc3Qgc2VydkFjYyA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuREJfS0VZKTtcclxuXHJcbmlmIChhZG1pbi5hcHBzLmxlbmd0aCA9PSAwKSB7XHJcbiAgYWRtaW4uaW5pdGlhbGl6ZUFwcCh7XHJcbiAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoc2VydkFjYyksXHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGZpcmVzdG9yZSA9IGFkbWluLmZpcmVzdG9yZSgpO1xyXG5cclxuZXhwb3J0IHsgZmlyZXN0b3JlIH07XHJcbiJdLCJuYW1lcyI6WyJhZG1pbiIsInNlcnZBY2MiLCJKU09OIiwicGFyc2UiLCJwcm9jZXNzIiwiZW52IiwiREJfS0VZIiwiYXBwcyIsImxlbmd0aCIsImluaXRpYWxpemVBcHAiLCJjcmVkZW50aWFsIiwiY2VydCIsImZpcmVzdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/conn/firestore.ts\n");

/***/ }),

/***/ "(api)/./lib/jwt/index.ts":
/*!**************************!*\
  !*** ./lib/jwt/index.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createToken\": () => (/* binding */ createToken),\n/* harmony export */   \"decode\": () => (/* binding */ decode)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction createToken(authId) {\n    const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        authId\n    }, process.env.JWT_KEY);\n    return token;\n}\nfunction decode(token) {\n    try {\n        const validate = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_KEY);\n        return validate;\n    } catch (error) {\n        console.error({\n            error\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0L2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFFeEIsU0FBU0MsV0FBVyxDQUFDQyxNQUFNLEVBQUU7SUFDbEMsTUFBTUMsS0FBSyxHQUFHSCx3REFBUSxDQUFDO1FBQUVFLE1BQU07S0FBRSxFQUFFRyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDO0lBQ3ZELE9BQU9KLEtBQUssQ0FBQztDQUNkO0FBRU0sU0FBU0ssTUFBTSxDQUFDTCxLQUFLLEVBQUU7SUFDNUIsSUFBSTtRQUNGLE1BQU1NLFFBQVEsR0FBR1QsMERBQVUsQ0FBQ0csS0FBSyxFQUFFRSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDO1FBQ3ZELE9BQU9FLFFBQVEsQ0FBQztLQUNqQixDQUFDLE9BQU9FLEtBQUssRUFBRTtRQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQztZQUFFQSxLQUFLO1NBQUUsQ0FBQyxDQUFDO0tBQzFCO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL2p3dC9pbmRleC50cz84ZjQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRva2VuKGF1dGhJZCkge1xyXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBhdXRoSWQgfSwgcHJvY2Vzcy5lbnYuSldUX0tFWSk7XHJcbiAgcmV0dXJuIHRva2VuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlKHRva2VuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHZhbGlkYXRlID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX0tFWSk7XHJcbiAgICByZXR1cm4gdmFsaWRhdGU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoeyBlcnJvciB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImp3dCIsImNyZWF0ZVRva2VuIiwiYXV0aElkIiwidG9rZW4iLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9LRVkiLCJkZWNvZGUiLCJ2YWxpZGF0ZSIsInZlcmlmeSIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/jwt/index.ts\n");

/***/ }),

/***/ "(api)/./lib/middlewares/auth.ts":
/*!*********************************!*\
  !*** ./lib/middlewares/auth.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authMiddleware\": () => (/* binding */ authMiddleware)\n/* harmony export */ });\n/* harmony import */ var lib_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/jwt */ \"(api)/./lib/jwt/index.ts\");\n\nfunction authMiddleware(callback) {\n    return function(req, res) {\n        if (req.headers.authorization) {\n            const token = req.headers.authorization.split(\" \")[1];\n            try {\n                const value = (0,lib_jwt__WEBPACK_IMPORTED_MODULE_0__.decode)(token);\n                callback(req, res, value);\n            } catch (error) {\n                res.send(error);\n            }\n        } else {\n            return res.status(401).send({\n                error: \"Missing token value\"\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbWlkZGxld2FyZXMvYXV0aC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUNpQztBQUMxQixTQUFTQyxjQUFjLENBQUNDLFFBQVEsRUFBRTtJQUN2QyxPQUFPLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO1FBQ2tJLElBQUlELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDQyxhQUFhLEVBQUU7WUFDeEwsTUFBTUMsS0FBSyxHQUFHSixHQUFHLENBQUNFLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELElBQUk7Z0JBQ0YsTUFBTUMsS0FBSyxHQUFHVCwrQ0FBTSxDQUFDTyxLQUFLLENBQUM7Z0JBQzNCTCxRQUFRLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFSyxLQUFLLENBQUMsQ0FBQzthQUMzQixDQUFDLE9BQU9DLEtBQUssRUFBRTtnQkFDZE4sR0FBRyxDQUFDTyxJQUFJLENBQUNELEtBQUssQ0FBQyxDQUFDO2FBQ2pCO1NBQ0YsTUFBTTtZQUNMLE9BQU9OLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRCxJQUFJLENBQUM7Z0JBQUVELEtBQUssRUFBRSxxQkFBcUI7YUFBRSxDQUFDLENBQUM7U0FDL0Q7S0FDRixDQUFDO0NBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL21pZGRsZXdhcmVzL2F1dGgudHM/YTVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsaWdodEZvcm1hdCB9IGZyb20gXCJkYXRlLWZuc1wiO1xyXG5pbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwibGliL2p3dFwiO1xyXG5leHBvcnQgZnVuY3Rpb24gYXV0aE1pZGRsZXdhcmUoY2FsbGJhY2spIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkZWNvZGUodG9rZW4pO1xyXG4gICAgICAgIGNhbGxiYWNrKHJlcSwgcmVzLCB2YWx1ZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnNlbmQoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBlcnJvcjogXCJNaXNzaW5nIHRva2VuIHZhbHVlXCIgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiZGVjb2RlIiwiYXV0aE1pZGRsZXdhcmUiLCJjYWxsYmFjayIsInJlcSIsInJlcyIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidG9rZW4iLCJzcGxpdCIsInZhbHVlIiwiZXJyb3IiLCJzZW5kIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/middlewares/auth.ts\n");

/***/ }),

/***/ "(api)/./models/auth.ts":
/*!************************!*\
  !*** ./models/auth.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Auth\": () => (/* binding */ Auth)\n/* harmony export */ });\n/* harmony import */ var lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/conn/firestore */ \"(api)/./lib/conn/firestore.ts\");\n\nconst collection = lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.collection(\"auths\");\nclass Auth {\n    constructor(id){\n        this.id = id;\n        this.ref = collection.doc(id);\n    }\n    async pull() {\n        const snap = await this.ref.get();\n        const data = snap.data();\n        this.data = data;\n    }\n    async push() {\n        await this.ref.update(this.data);\n    }\n    static trimEmail(email) {\n        return email.trim().toLowerCase();\n    }\n    static async findByEmail(emailParam) {\n        const email = Auth.trimEmail(emailParam);\n        const res = await collection.where(\"email\", \"==\", email).get();\n        if (res.docs.length) {\n            const doc = res.docs[0];\n            const id = doc.id;\n            const auth = new Auth(id);\n            auth.data = doc.data();\n            return auth;\n        }\n    }\n    static async createAuth(data) {\n        const email = Auth.trimEmail(data.email);\n        const newData = {\n            email,\n            code: data.code,\n            expiration: data.expiration,\n            userId: data.userId\n        };\n        const snapshot = await collection.add(newData);\n        const auth = new Auth(snapshot.id);\n        auth.data = newData;\n        return auth;\n    }\n    static async getByEmailAndCode(userEmail, code) {\n        const email = Auth.trimEmail(userEmail);\n        const snapshot = await collection.where(\"email\", \"==\", email).where(\"code\", \"==\", code).get();\n        if (snapshot.docs.length) {\n            const doc = snapshot.docs[0];\n            const auth = new Auth(doc.id);\n            auth.data = doc.data();\n            return auth;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTSxFQUFFO1lBQ3hCLE1BQU1oQixHQUFHLEdBQUd1QixRQUFRLENBQUNSLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTUUsSUFBSSxHQUFHLElBQUlyQixJQUFJLENBQUNJLEdBQUcsQ0FBQ0YsRUFBRSxDQUFDO1lBQzdCbUIsSUFBSSxDQUFDYixJQUFJLEdBQUdKLEdBQUcsQ0FBQ0ksSUFBSSxFQUFFLENBQWE7WUFDbkMsT0FBT2EsSUFBSSxDQUFDO1NBQ2I7S0FDRjtDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL21vZGVscy9hdXRoLnRzPzRkMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcImxpYi9jb25uL2ZpcmVzdG9yZVwiO1xyXG5cclxuY29uc3QgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKFwiYXV0aHNcIik7XHJcblxyXG50eXBlIEF1dGhEYXRhID0ge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgY29kZTogbnVtYmVyO1xyXG4gIGV4cGlyYXRpb246IERhdGU7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQXV0aCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByZWY6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlO1xyXG4gIGRhdGE6IEF1dGhEYXRhO1xyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMucmVmID0gY29sbGVjdGlvbi5kb2MoaWQpO1xyXG4gIH1cclxuICBhc3luYyBwdWxsKCkge1xyXG4gICAgY29uc3Qgc25hcCA9IGF3YWl0IHRoaXMucmVmLmdldCgpO1xyXG4gICAgY29uc3QgZGF0YSA9IHNuYXAuZGF0YSgpO1xyXG4gICAgdGhpcy5kYXRhID0gZGF0YSBhcyBBdXRoRGF0YTtcclxuICB9XHJcbiAgYXN5bmMgcHVzaCgpIHtcclxuICAgIGF3YWl0IHRoaXMucmVmLnVwZGF0ZSh0aGlzLmRhdGEpO1xyXG4gIH1cclxuICBzdGF0aWMgdHJpbUVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBlbWFpbC50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICB9XHJcbiAgc3RhdGljIGFzeW5jIGZpbmRCeUVtYWlsKGVtYWlsUGFyYW06IHN0cmluZykge1xyXG4gICAgY29uc3QgZW1haWwgPSBBdXRoLnRyaW1FbWFpbChlbWFpbFBhcmFtKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNvbGxlY3Rpb24ud2hlcmUoXCJlbWFpbFwiLCBcIj09XCIsIGVtYWlsKS5nZXQoKTtcclxuICAgIGlmIChyZXMuZG9jcy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgZG9jID0gcmVzLmRvY3NbMF07XHJcbiAgICAgIGNvbnN0IGlkID0gZG9jLmlkO1xyXG4gICAgICBjb25zdCBhdXRoID0gbmV3IEF1dGgoaWQpO1xyXG4gICAgICBhdXRoLmRhdGEgPSBkb2MuZGF0YSgpIGFzIEF1dGhEYXRhO1xyXG4gICAgICByZXR1cm4gYXV0aDtcclxuICAgIH1cclxuICB9XHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUF1dGgoZGF0YTogQXV0aERhdGEpIHtcclxuICAgIGNvbnN0IGVtYWlsID0gQXV0aC50cmltRW1haWwoZGF0YS5lbWFpbCk7XHJcblxyXG4gICAgY29uc3QgbmV3RGF0YSA9IHtcclxuICAgICAgZW1haWwsXHJcbiAgICAgIGNvZGU6IGRhdGEuY29kZSxcclxuICAgICAgZXhwaXJhdGlvbjogZGF0YS5leHBpcmF0aW9uLFxyXG4gICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgY29sbGVjdGlvbi5hZGQobmV3RGF0YSk7XHJcbiAgICBjb25zdCBhdXRoID0gbmV3IEF1dGgoc25hcHNob3QuaWQpO1xyXG4gICAgYXV0aC5kYXRhID0gbmV3RGF0YTtcclxuICAgIHJldHVybiBhdXRoO1xyXG4gIH1cclxuICBzdGF0aWMgYXN5bmMgZ2V0QnlFbWFpbEFuZENvZGUodXNlckVtYWlsOiBzdHJpbmcsIGNvZGU6IG51bWJlcikge1xyXG4gICAgY29uc3QgZW1haWwgPSBBdXRoLnRyaW1FbWFpbCh1c2VyRW1haWwpO1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uXHJcbiAgICAgIC53aGVyZShcImVtYWlsXCIsIFwiPT1cIiwgZW1haWwpXHJcbiAgICAgIC53aGVyZShcImNvZGVcIiwgXCI9PVwiLCBjb2RlKVxyXG4gICAgICAuZ2V0KCk7XHJcbiAgICBpZiAoc25hcHNob3QuZG9jcy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXTtcclxuICAgICAgY29uc3QgYXV0aCA9IG5ldyBBdXRoKGRvYy5pZCk7XHJcbiAgICAgIGF1dGguZGF0YSA9IGRvYy5kYXRhKCkgYXMgQXV0aERhdGE7XHJcbiAgICAgIHJldHVybiBhdXRoO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZmlyZXN0b3JlIiwiY29sbGVjdGlvbiIsIkF1dGgiLCJjb25zdHJ1Y3RvciIsImlkIiwicmVmIiwiZG9jIiwicHVsbCIsInNuYXAiLCJnZXQiLCJkYXRhIiwicHVzaCIsInVwZGF0ZSIsInRyaW1FbWFpbCIsImVtYWlsIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiZmluZEJ5RW1haWwiLCJlbWFpbFBhcmFtIiwicmVzIiwid2hlcmUiLCJkb2NzIiwibGVuZ3RoIiwiYXV0aCIsImNyZWF0ZUF1dGgiLCJuZXdEYXRhIiwiY29kZSIsImV4cGlyYXRpb24iLCJ1c2VySWQiLCJzbmFwc2hvdCIsImFkZCIsImdldEJ5RW1haWxBbmRDb2RlIiwidXNlckVtYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/auth.ts\n");

/***/ }),

/***/ "(api)/./models/user.ts":
/*!************************!*\
  !*** ./models/user.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"User\": () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/conn/firestore */ \"(api)/./lib/conn/firestore.ts\");\n\nconst collection = lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.collection(\"users\");\nclass User {\n    constructor(id){\n        this.id = id;\n        this.ref = collection.doc(id);\n    }\n    async push() {\n        await this.ref.update(this.data);\n    }\n    async pull() {\n        const snap = await this.ref.get();\n        const data = snap.data();\n        this.data = data;\n    }\n    static async createUser(data) {\n        const email = data.email.trim().toLowerCase();\n        const newData = {\n            email,\n            fullname: data.fullname,\n            pics: {\n                profilePicture: data.pics.profilePicture,\n                coverPicture: data.pics.coverPicture\n            },\n            description: data.description,\n            tweets: data.tweets || [\n                {}\n            ],\n            followers: [],\n            following: [],\n            likes: data.likes || [\n                {}\n            ],\n            saves: data.saves || [\n                {}\n            ],\n            feed: data.feed || [\n                {}\n            ],\n            generatedId: data.generatedId,\n            replies: data.replies || [\n                {}\n            ]\n        };\n        const snapshot = await collection.add(newData);\n        const user = new User(snapshot.id);\n        user.data = newData;\n        user.data.tweets.pop();\n        await user.push();\n        return user;\n    }\n    static async findById(userId) {\n        const snapshot = await collection.where(\"generatedId\", \"==\", Number(userId)).get();\n        if (snapshot.docs.length) {\n            {\n                const doc = snapshot.docs[0];\n                const user = new User(doc.id);\n                user.data = doc.data();\n                return user;\n            }\n        }\n    }\n    static async getAll() {\n        const usersSnapshot = await collection.get();\n        const users = usersSnapshot.docs.map((d)=>{\n            const data = d.data();\n            return data;\n        });\n        return users;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDRixFQUFFLENBQUM7Z0JBQzdCNkIsSUFBSSxDQUFDeEIsSUFBSSxHQUFHSCxHQUFHLENBQUNHLElBQUksRUFBRSxDQUFhO2dCQUNuQyxPQUFPd0IsSUFBSSxDQUFDO2FBQ2I7U0FDRjtLQUNGO0lBQ0QsYUFBYVEsTUFBTSxHQUFHO1FBQ3BCLE1BQU1DLGFBQWEsR0FBRyxNQUFNekMsVUFBVSxDQUFDVyxHQUFHLEVBQUU7UUFDNUMsTUFBTStCLEtBQUssR0FBR0QsYUFBYSxDQUFDSCxJQUFJLENBQUNLLEdBQUcsQ0FBQyxDQUFDQyxDQUFDLEdBQUs7WUFDMUMsTUFBTXBDLElBQUksR0FBR29DLENBQUMsQ0FBQ3BDLElBQUksRUFBRTtZQUNyQixPQUFPQSxJQUFJLENBQUM7U0FDYixDQUFDO1FBQ0YsT0FBT2tDLEtBQUssQ0FBQztLQUNkO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbW9kZWxzL3VzZXIudHM/NzAwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyRGF0YSB9IGZyb20gXCJjdXN0b21cIjtcclxuaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcImxpYi9jb25uL2ZpcmVzdG9yZVwiO1xyXG5cclxuY29uc3QgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKFwidXNlcnNcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlciB7XHJcbiAgcmVmOiBGaXJlYmFzZUZpcmVzdG9yZS5Eb2N1bWVudFJlZmVyZW5jZTtcclxuICBkYXRhOiBVc2VyRGF0YTtcclxuICBpZDogc3RyaW5nO1xyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMucmVmID0gY29sbGVjdGlvbi5kb2MoaWQpO1xyXG4gIH1cclxuICBhc3luYyBwdXNoKCkge1xyXG4gICAgYXdhaXQgdGhpcy5yZWYudXBkYXRlKHRoaXMuZGF0YSk7XHJcbiAgfVxyXG4gIGFzeW5jIHB1bGwoKSB7XHJcbiAgICBjb25zdCBzbmFwID0gYXdhaXQgdGhpcy5yZWYuZ2V0KCk7XHJcbiAgICBjb25zdCBkYXRhID0gc25hcC5kYXRhKCk7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhIGFzIFVzZXJEYXRhO1xyXG4gIH1cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlVXNlcihkYXRhOiBVc2VyRGF0YSkge1xyXG4gICAgY29uc3QgZW1haWwgPSBkYXRhLmVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgbmV3RGF0YSA9IHtcclxuICAgICAgZW1haWwsXHJcbiAgICAgIGZ1bGxuYW1lOiBkYXRhLmZ1bGxuYW1lLFxyXG4gICAgICBwaWNzOiB7XHJcbiAgICAgICAgcHJvZmlsZVBpY3R1cmU6IGRhdGEucGljcy5wcm9maWxlUGljdHVyZSxcclxuICAgICAgICBjb3ZlclBpY3R1cmU6IGRhdGEucGljcy5jb3ZlclBpY3R1cmUsXHJcbiAgICAgIH0sXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICB0d2VldHM6IGRhdGEudHdlZXRzIHx8IFt7fV0sXHJcbiAgICAgIGZvbGxvd2VyczogW10sXHJcbiAgICAgIGZvbGxvd2luZzogW10sXHJcbiAgICAgIGxpa2VzOiBkYXRhLmxpa2VzIHx8IFt7fV0sXHJcbiAgICAgIHNhdmVzOiBkYXRhLnNhdmVzIHx8IFt7fV0sXHJcbiAgICAgIGZlZWQ6IGRhdGEuZmVlZCB8fCBbe31dLFxyXG4gICAgICBnZW5lcmF0ZWRJZDogZGF0YS5nZW5lcmF0ZWRJZCxcclxuICAgICAgcmVwbGllczogZGF0YS5yZXBsaWVzIHx8IFt7fV0sXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uLmFkZChuZXdEYXRhKTtcclxuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihzbmFwc2hvdC5pZCk7XHJcbiAgICB1c2VyLmRhdGEgPSBuZXdEYXRhO1xyXG4gICAgdXNlci5kYXRhLnR3ZWV0cy5wb3AoKTtcclxuICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlJZCh1c2VySWQ6IG51bWJlcikge1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uXHJcbiAgICAgIC53aGVyZShcImdlbmVyYXRlZElkXCIsIFwiPT1cIiwgTnVtYmVyKHVzZXJJZCkpXHJcbiAgICAgIC5nZXQoKTtcclxuICAgIGlmIChzbmFwc2hvdC5kb2NzLmxlbmd0aCkge1xyXG4gICAgICB7XHJcbiAgICAgICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXTtcclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoZG9jLmlkKTtcclxuICAgICAgICB1c2VyLmRhdGEgPSBkb2MuZGF0YSgpIGFzIFVzZXJEYXRhO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBnZXRBbGwoKSB7XHJcbiAgICBjb25zdCB1c2Vyc1NuYXBzaG90ID0gYXdhaXQgY29sbGVjdGlvbi5nZXQoKTtcclxuICAgIGNvbnN0IHVzZXJzID0gdXNlcnNTbmFwc2hvdC5kb2NzLm1hcCgoZCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhID0gZC5kYXRhKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlcnM7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJmaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwiVXNlciIsImNvbnN0cnVjdG9yIiwiaWQiLCJyZWYiLCJkb2MiLCJwdXNoIiwidXBkYXRlIiwiZGF0YSIsInB1bGwiLCJzbmFwIiwiZ2V0IiwiY3JlYXRlVXNlciIsImVtYWlsIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibmV3RGF0YSIsImZ1bGxuYW1lIiwicGljcyIsInByb2ZpbGVQaWN0dXJlIiwiY292ZXJQaWN0dXJlIiwiZGVzY3JpcHRpb24iLCJ0d2VldHMiLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJsaWtlcyIsInNhdmVzIiwiZmVlZCIsImdlbmVyYXRlZElkIiwicmVwbGllcyIsInNuYXBzaG90IiwiYWRkIiwidXNlciIsInBvcCIsImZpbmRCeUlkIiwidXNlcklkIiwid2hlcmUiLCJOdW1iZXIiLCJkb2NzIiwibGVuZ3RoIiwiZ2V0QWxsIiwidXNlcnNTbmFwc2hvdCIsInVzZXJzIiwibWFwIiwiZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/user.ts\n");

/***/ }),

/***/ "(api)/./pages/api/user/suggestFollow/index.ts":
/*!***********************************************!*\
  !*** ./pages/api/user/suggestFollow/index.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var micro_method_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! micro-method-router */ \"micro-method-router\");\n/* harmony import */ var micro_method_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(micro_method_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lib_middlewares_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lib/middlewares/auth */ \"(api)/./lib/middlewares/auth.ts\");\n/* harmony import */ var controllers_user__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! controllers/user */ \"(api)/./controllers/user.ts\");\n\n\n\nasync function handleGetSuggestions(req, res, token) {\n    const suggested = await (0,controllers_user__WEBPACK_IMPORTED_MODULE_2__.getWhoToFollow)(token);\n    res.send(suggested);\n}\nasync function handleOptions(req, res) {\n    res.send(200);\n}\nconst handler = micro_method_router__WEBPACK_IMPORTED_MODULE_0___default()({\n    get: (0,lib_middlewares_auth__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(handleGetSuggestions),\n    options: handleOptions\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdXNlci9zdWdnZXN0Rm9sbG93L2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQzBDO0FBQ1k7QUFDSjtBQUVsRCxlQUFlRyxvQkFBb0IsQ0FDakNDLEdBQW1CLEVBQ25CQyxHQUFvQixFQUNwQkMsS0FBSyxFQUNMO0lBQ0EsTUFBTUMsU0FBUyxHQUFHLE1BQU1MLGdFQUFjLENBQUNJLEtBQUssQ0FBQztJQUM3Q0QsR0FBRyxDQUFDRyxJQUFJLENBQUNELFNBQVMsQ0FBQyxDQUFDO0NBQ3JCO0FBRUQsZUFBZUUsYUFBYSxDQUFDTCxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUNyQ0EsR0FBRyxDQUFDRyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Q0FDZjtBQUVELE1BQU1FLE9BQU8sR0FBR1YsMERBQU8sQ0FBQztJQUN0QlcsR0FBRyxFQUFFVixvRUFBYyxDQUFDRSxvQkFBb0IsQ0FBQztJQUN6Q1MsT0FBTyxFQUFFSCxhQUFhO0NBQ3ZCLENBQUM7QUFFRixpRUFBZUMsT0FBTyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL3BhZ2VzL2FwaS91c2VyL3N1Z2dlc3RGb2xsb3cvaW5kZXgudHM/MTJlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IE5leHRBcGlSZXF1ZXN0LCBOZXh0QXBpUmVzcG9uc2UgfSBmcm9tIFwibmV4dFwiO1xyXG5pbXBvcnQgbWV0aG9kcyBmcm9tIFwibWljcm8tbWV0aG9kLXJvdXRlclwiO1xyXG5pbXBvcnQgeyBhdXRoTWlkZGxld2FyZSB9IGZyb20gXCJsaWIvbWlkZGxld2FyZXMvYXV0aFwiO1xyXG5pbXBvcnQgeyBnZXRXaG9Ub0ZvbGxvdyB9IGZyb20gXCJjb250cm9sbGVycy91c2VyXCI7XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVHZXRTdWdnZXN0aW9ucyhcclxuICByZXE6IE5leHRBcGlSZXF1ZXN0LFxyXG4gIHJlczogTmV4dEFwaVJlc3BvbnNlLFxyXG4gIHRva2VuXHJcbikge1xyXG4gIGNvbnN0IHN1Z2dlc3RlZCA9IGF3YWl0IGdldFdob1RvRm9sbG93KHRva2VuKTtcclxuICByZXMuc2VuZChzdWdnZXN0ZWQpO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBoYW5kbGVPcHRpb25zKHJlcSwgcmVzKSB7XHJcbiAgcmVzLnNlbmQoMjAwKTtcclxufVxyXG5cclxuY29uc3QgaGFuZGxlciA9IG1ldGhvZHMoe1xyXG4gIGdldDogYXV0aE1pZGRsZXdhcmUoaGFuZGxlR2V0U3VnZ2VzdGlvbnMpLFxyXG4gIG9wdGlvbnM6IGhhbmRsZU9wdGlvbnMsXHJcbn0pO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaGFuZGxlcjtcclxuIl0sIm5hbWVzIjpbIm1ldGhvZHMiLCJhdXRoTWlkZGxld2FyZSIsImdldFdob1RvRm9sbG93IiwiaGFuZGxlR2V0U3VnZ2VzdGlvbnMiLCJyZXEiLCJyZXMiLCJ0b2tlbiIsInN1Z2dlc3RlZCIsInNlbmQiLCJoYW5kbGVPcHRpb25zIiwiaGFuZGxlciIsImdldCIsIm9wdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/user/suggestFollow/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/user/suggestFollow/index.ts"));
module.exports = __webpack_exports__;

})();