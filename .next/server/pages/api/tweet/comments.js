"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/tweet/comments";
exports.ids = ["pages/api/tweet/comments"];
exports.modules = {

/***/ "date-fns/isAfter":
/*!***********************************!*\
  !*** external "date-fns/isAfter" ***!
  \***********************************/
/***/ ((module) => {

module.exports = require("date-fns/isAfter");

/***/ }),

/***/ "firebase-admin":
/*!*********************************!*\
  !*** external "firebase-admin" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("firebase-admin");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/***/ ((module) => {

module.exports = require("jsonwebtoken");

/***/ }),

/***/ "micro-method-router":
/*!**************************************!*\
  !*** external "micro-method-router" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("micro-method-router");

/***/ }),

/***/ "random-int":
/*!*****************************!*\
  !*** external "random-int" ***!
  \*****************************/
/***/ ((module) => {

module.exports = import("random-int");;

/***/ }),

/***/ "(api)/./controllers/tweets.ts":
/*!*******************************!*\
  !*** ./controllers/tweets.ts ***!
  \*******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addComment\": () => (/* binding */ addComment),\n/* harmony export */   \"createTweet\": () => (/* binding */ createTweet),\n/* harmony export */   \"deleteTweetById\": () => (/* binding */ deleteTweetById),\n/* harmony export */   \"dislikeComment\": () => (/* binding */ dislikeComment),\n/* harmony export */   \"getLatestTweets\": () => (/* binding */ getLatestTweets),\n/* harmony export */   \"getTweetById\": () => (/* binding */ getTweetById),\n/* harmony export */   \"getTweetsWithMedia\": () => (/* binding */ getTweetsWithMedia),\n/* harmony export */   \"likeComment\": () => (/* binding */ likeComment),\n/* harmony export */   \"tweetActionCounterUpdater\": () => (/* binding */ tweetActionCounterUpdater),\n/* harmony export */   \"tweetActionStatusRemover\": () => (/* binding */ tweetActionStatusRemover),\n/* harmony export */   \"updateOneTweet\": () => (/* binding */ updateOneTweet)\n/* harmony export */ });\n/* harmony import */ var random_int__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! random-int */ \"random-int\");\n/* harmony import */ var _user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./user */ \"(api)/./controllers/user.ts\");\n/* harmony import */ var models_tweets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! models/tweets */ \"(api)/./models/tweets.ts\");\n/* harmony import */ var models_user__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! models/user */ \"(api)/./models/user.ts\");\n/* harmony import */ var date_fns_isAfter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! date-fns/isAfter */ \"date-fns/isAfter\");\n/* harmony import */ var date_fns_isAfter__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(date_fns_isAfter__WEBPACK_IMPORTED_MODULE_4__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([random_int__WEBPACK_IMPORTED_MODULE_0__]);\nrandom_int__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n\nasync function createTweet(tweetBody, token) {\n    const user = await (0,_user__WEBPACK_IMPORTED_MODULE_1__.getMe)(token.authId);\n    const id = (0,random_int__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(10000, 99999);\n    const shapeTweet = {\n        userName: user.data.fullname,\n        userId: user.data.generatedId,\n        profilePicture: user.data.pics.profilePicture,\n        content: tweetBody.content,\n        img: tweetBody.imgURL || \"\",\n        createdAt: new Date(),\n        mode: tweetBody.tweetMode,\n        id: id,\n        info: [\n            {\n                likes: 0,\n                retweets: 0,\n                saves: 0,\n                comments: 0\n            }\n        ],\n        comments: [\n            {}\n        ]\n    };\n    user.data.tweets.push(shapeTweet);\n    user.data.feed.push(shapeTweet);\n    await user.push();\n    const tweet = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.createTweet(shapeTweet);\n    user.data.followers.map(async (followerId)=>{\n        const follower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(followerId);\n        await follower.pull();\n        follower.data.feed.push(tweet.data);\n        await follower.push();\n    });\n    return true;\n}\nasync function getTweetById(tweetId) {\n    const tweet = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(tweetId);\n    return tweet;\n}\nasync function deleteTweetById(tweetId) {\n    const id = Number(tweetId);\n    const tweet = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(id);\n    const userId = tweet.data.userId;\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(userId);\n    const result = user.data.tweets.find((tweet)=>{\n        if (tweet.id == id) {\n            return tweet;\n        }\n    });\n    // El index devuelve la posici贸n del tweet encontrado en el array\n    // Para luego removerlo usando splice\n    const index = user.data.tweets.indexOf(result);\n    if (index > -1) {\n        // Splice va a remover el elemento que coincida con la posici贸n del index y va a remover ese elemento\n        // debido al 1.(remover 1 elemento)\n        user.data.tweets.splice(index, 1);\n        await user.push();\n    }\n    user.data.followers.map(async (f)=>{\n        const follower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(f);\n        follower.data.feed.find((t, index)=>{\n            if (t != undefined && t.id == id) {\n                follower.data.feed.splice(index, 1);\n            }\n        });\n        follower.data.likes.find((t, index)=>{\n            if (t != undefined && t.id == id) {\n                follower.data.likes.splice(index, 1);\n            }\n        });\n        follower.data.saves.find((t, index)=>{\n            if (t != undefined && t.id == id) {\n                follower.data.saves.splice(index, 1);\n            }\n        });\n        await follower.push();\n    });\n    await tweet.ref.delete();\n    return {\n        deleted: true\n    };\n}\nasync function updateOneTweet(tweetId, body) {\n    const tweet = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(tweetId);\n    const userId = tweet.data.userId;\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(userId);\n    await user.pull();\n    // Aca actualiza el tweet de la colecci贸n Tweets.\n    if (body.content) {\n        tweet.data.content = body.content;\n    }\n    if (body.img) {\n        tweet.data.img = body.img;\n    }\n    await tweet.push();\n    // Aca actualiza el tweet del usuario dentro de  la colleci贸n Usuarios.\n    user.data.tweets.find(async (tweet)=>{\n        if (tweet.id == tweetId) {\n            tweet.content = body.content || \"\";\n            tweet.img = body.img || \"\";\n            tweet.tweetMode = body.tweetMode || \"\";\n            await user.push();\n        }\n    });\n    // Aca Actualiza el tweet dentro del feed de los usuarios seguidores del usuario padre.\n    user.data.followers.map(async (userIds)=>{\n        const userFollower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(userIds);\n        await userFollower.pull();\n        const result = userFollower.data.feed.find(async (t)=>{\n            if (t.id == tweetId) {\n                t.content = tweet.data.content;\n                t.img = tweet.data.img;\n                t.tweetMode = tweet.data.mode;\n                await userFollower.push();\n            }\n        });\n        return result;\n    });\n}\n// Suma 1 al contador de la action correspondiente al tweet obtenido mediante el tweetId.\nasync function tweetActionCounterUpdater(action, tweetId, token) {\n    // Aca obtiene las referencias a los tweets de las collections Tweet y User\n    // para actualizarle los datos a sus respectivos docs y a el feed de sus followers.\n    const tweetRef = await getTweetById(tweetId);\n    const tweetOwnerRef = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(tweetRef.data.userId);\n    const ownerTweet = tweetOwnerRef.data.tweets.find((t)=>{\n        if (t.id == tweetId) {\n            return t;\n        }\n    });\n    const tweetInFollowerFeedAndFollower = await Promise.allSettled(tweetOwnerRef.data.followers.map(async (f)=>{\n        const followerRef = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(f);\n        const tweet = followerRef?.data.feed.find((t)=>{\n            if (t.id == tweetId) {\n                return t;\n            }\n        });\n        return {\n            tweet,\n            followerRef: followerRef\n        };\n    }));\n    //  Here deconstructs the tweetInFollowerFeedAndFollower response.\n    const followerReference = tweetInFollowerFeedAndFollower[0].value.followerRef;\n    const tweetInFollowerFeed = tweetInFollowerFeedAndFollower[0].value.tweet;\n    // Aca aplica los cambios dentro de los objetos que acabamos de referenciar.\n    if (action == \"like\") {\n        tweetRef.data.info[0].likes += 1;\n        ownerTweet.info[0].likes += 1;\n        tweetInFollowerFeed ? tweetInFollowerFeed.info[0].likes += 1 : \"\";\n    } else if (action == \"retweet\") {\n        tweetRef.data.info[0].retweets += 1;\n        ownerTweet.info[0].retweets += 1;\n        tweetInFollowerFeed ? tweetInFollowerFeed.info[0].retweets += 1 : \"\";\n    } else if (action == \"save\") {\n        tweetRef.data.info[0].saves += 1;\n        ownerTweet.info[0].saves += 1;\n        tweetInFollowerFeed ? tweetInFollowerFeed.info[0].saves += 1 : \"\";\n    } else {\n        tweetRef.data.info[0].comments += 1;\n        ownerTweet.info[0].comments += 1;\n        tweetInFollowerFeed ? tweetInFollowerFeed.info[0].comments += 1 : \"\";\n    }\n    // Aca pushea los datos cambiados previamente para actualizar la informaci贸n de la referencia.\n    await tweetRef.push();\n    await tweetOwnerRef.push();\n    await (0,_user__WEBPACK_IMPORTED_MODULE_1__.saveAction)(action, tweetRef, token);\n    if (followerReference != undefined) {\n        await followerReference.push();\n    }\n    return tweetRef.data.info;\n}\n// Remueve la tweet action dentro de los tweets del tweet owner  , del tweet owener followers feed\n// y de la collection Tweets.\nasync function tweetActionStatusRemover(action, tweetId) {\n    // Aca crea las referencias a el tweet owner,tweet en Tweet collection y\n    // tweet owner followers feed tweet.\n    const tweet = await getTweetById(tweetId);\n    const tweetOwnerRef = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(tweet.data.userId);\n    const tweetInOwner = tweetOwnerRef.data.tweets.find((tweet)=>{\n        if (tweet.id == tweetId) {\n            return tweet;\n        }\n    });\n    const ownerFollowers = tweetOwnerRef.data.followers;\n    const followerAndFeed = await Promise.all(ownerFollowers.map(async (follower)=>{\n        const followerCopy = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(follower);\n        await followerCopy.pull();\n        const tweetFromFollowerFeed = followerCopy.data.feed.find((tweets)=>{\n            if (tweets.id == tweetId) {\n                return tweets;\n            }\n        });\n        return {\n            followerCopy,\n            tweetFromFollowerFeed\n        };\n    }));\n    const follower = followerAndFeed[0].followerCopy;\n    const tweetFromFeed = followerAndFeed[0].tweetFromFollowerFeed;\n    // Aca aplica los cambios dentro de la referencia.\n    if (action == \"like\") {\n        tweet.data.info[0].likes -= 1;\n        tweetFromFeed.info[0].likes -= 1;\n        tweetInOwner.info[0].likes -= 1;\n    } else if (action == \"retweet\") {\n        tweet.data.info[0].retweets -= 1;\n        tweetFromFeed.info[0].retweets -= 1;\n        tweetInOwner.info[0].retweets -= 1;\n    } else if (action == \"save\") {\n        tweet.data.info[0].saves -= 1;\n        tweetFromFeed.info[0].saves -= 1;\n        tweetInOwner.info[0].saves -= 1;\n    } else {\n        tweet.data.info[0].comments -= 1;\n        tweetFromFeed.info[0].comments -= 1;\n        tweetInOwner.info[0].saves -= 1;\n    }\n    // Aca pushea los datos previamente actualizados.\n    await tweet.push();\n    await follower.push();\n    await tweetOwnerRef.push();\n    return tweet.data.info[0];\n}\nasync function addComment(body, { authId  }) {\n    // Aca obtengo la referencia al usuario que hace el request para luego a帽adir su id\n    // en la creaci贸n del comentario y agregar el comentario a sus replies.\n    const me = await (0,_user__WEBPACK_IMPORTED_MODULE_1__.getMe)(authId);\n    let randomId = (0,random_int__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(9999, 100000);\n    const newComment = {\n        comment: body.newComment.comment,\n        userId: body.newComment.userId,\n        ia: new Date(),\n        id: randomId,\n        likes: 0,\n        tweetId: body.newComment.tweetId,\n        by: body.newComment.by,\n        pics: {\n            profilePicture: body.newComment.pics.profilePicture\n        }\n    };\n    // Aca obtiene la referencia del  tweet en la collection Tweet y al usuario due帽o del tweet.\n    const tweet = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(body.newComment.tweetId);\n    const tweetOwnerId = tweet.data.userId;\n    const tweetOwner = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(tweetOwnerId);\n    // Obtiene el tweet dentro del tweet owner y le pushea el nuevo comentario.\n    tweetOwner.data.tweets.find((t)=>{\n        if (t.id == body.newComment.tweetId) {\n            t.info[0].comments += 1;\n            t.comments.push(newComment);\n        }\n    });\n    // Obtiene los followers del owner y les agrega el comentario a el tweet dentro de el feed, likes y saves.\n    tweetOwner.data.followers.map(async (f)=>{\n        const userFollower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(f);\n        userFollower.data.feed.find((t)=>{\n            if (t.id == body.newComment.tweetId) {\n                t.info[0].comments += 1;\n                t.comments.push(newComment);\n            }\n        });\n        userFollower.data.likes.find((t)=>{\n            if (t.id == body.newComment.tweetId) {\n                t.info[0].comments += 1;\n                t.comments.push(newComment);\n            }\n        });\n        userFollower.data.saves.find((t)=>{\n            if (t.id == body.newComment.tweetId) {\n                t.info[0].comments += 1;\n                t.comments.push(newComment);\n            }\n        });\n        await userFollower.push();\n    });\n    me.data.replies.push(newComment);\n    tweet.data.comments.push(newComment);\n    // Without the IF statement it deleted every reply to my own tweets after being set in the\n    // database , I think that was because of the \"re-rendering\" of the document, one of the re-renders\n    //  left the document the way it was before of pushing the new reply.\n    if (me.data.generatedId == tweetOwner.data.generatedId) {\n        tweetOwner.data.feed.find((t)=>{\n            if (t.id == body.newComment.tweetId) {\n                t.info[0].comments += 1;\n                t.comments.push(newComment);\n            }\n        });\n        await tweetOwner.push();\n        await tweet.push();\n        return true;\n    } else {\n        await tweet.push();\n        await me.push();\n        await tweetOwner.push();\n        return true;\n    }\n}\n// Add likes to replies.\nasync function likeComment(tweetId, replyId, { authId  }) {\n    const tweetRef = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(tweetId);\n    const userId = tweetRef.data.userId;\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(userId);\n    const me = await (0,_user__WEBPACK_IMPORTED_MODULE_1__.getMe)(authId);\n    // Adds  1 like to the comment  inside of  tweet in Tweet collection.\n    tweetRef.data.comments.find((c)=>{\n        if (c.id == replyId) {\n            c.likes += 1;\n        }\n    });\n    // Here it adds  a  like to the reply  inside  the  tweet from the tweet owner in collection User.\n    user.data.tweets.find((t)=>{\n        if (t.id == tweetId) {\n            t.comments.find((c)=>{\n                if (c.id == replyId) {\n                    c.likes += 1;\n                }\n            });\n        }\n    });\n    // Adds a  like to the reply  inside the  feed the likes and saves of the followers.\n    user.data.followers.map(async (f)=>{\n        const follower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(f);\n        follower.data.saves.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes += 1;\n                    }\n                });\n            }\n        });\n        follower.data.likes.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes += 1;\n                    }\n                });\n            }\n        });\n        follower.data.feed.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes += 1;\n                        await follower.push();\n                    }\n                });\n            }\n        });\n    });\n    // Adds a like to the reply inside of the user liker reply's.\n    me.data.replies.find((c)=>{\n        if (c.id == replyId) {\n            c.likes += 1;\n        }\n    });\n    await tweetRef.push();\n    if (user.data.generatedId == me.data.generatedId) {\n        await me.push();\n    } else {\n        await me.push();\n        await user.push();\n    }\n    return true;\n}\n// Dislike comment.\nasync function dislikeComment(tweetId, replyId, { authId  }) {\n    const tweetRef = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.findById(tweetId);\n    const userId = tweetRef.data.userId;\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(userId);\n    const me = await (0,_user__WEBPACK_IMPORTED_MODULE_1__.getMe)(authId);\n    // Removes  1 like to the tweet inside of  Tweet collection.\n    tweetRef.data.comments.find((c)=>{\n        if (c.id == replyId) {\n            c.likes -= 1;\n        }\n    });\n    // Here it removes  a  like to the reply  inside  the  tweet from the tweet owener in collection User.\n    user.data.tweets.find((t)=>{\n        if (t.id == tweetId) {\n            t.comments.find((c)=>{\n                if (c.id == replyId) {\n                    c.likes -= 1;\n                }\n            });\n        }\n    });\n    // Removes a  like to the reply  inside the  feed of the followers.\n    // Removes a  like to the reply  inside the  liked tweets of the followers.\n    // Removes a  like to the reply  inside the  saved tweets of the followers.\n    user.data.followers.map(async (f)=>{\n        const follower = await models_user__WEBPACK_IMPORTED_MODULE_3__.User.findById(f);\n        follower.data.likes.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes -= 1;\n                    }\n                });\n            }\n        });\n        follower.data.saves.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes -= 1;\n                    }\n                });\n            }\n        });\n        follower.data.feed.find((t)=>{\n            if (t.id == tweetId) {\n                t.comments.map(async (c)=>{\n                    if (c.id == replyId) {\n                        c.likes -= 1;\n                        await follower.push();\n                    }\n                });\n            }\n        });\n    });\n    // Removes 1 like a el comentario dentro del apartado \"replies\" de la collection User.\n    me.data.replies.find(async (c)=>{\n        if (c.id == replyId) {\n            c.likes -= 1;\n        }\n    });\n    await tweetRef.push();\n    if (user.data.generatedId == me.data.generatedId) {\n        await me.push();\n    } else {\n        await me.push();\n        await user.push();\n    }\n    return true;\n}\nasync function getLatestTweets() {\n    const allTweets = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.getAll();\n    const mutateDate = allTweets.map((tweet)=>{\n        const savedDate = tweet.createdAt;\n        const date = new Date(savedDate._seconds * 1000 + savedDate._nanoseconds / 1000000);\n        tweet.createdAt = date;\n        return tweet;\n    });\n    const sortedByDate = [];\n    mutateDate.filter((t, i)=>{\n        if (!date_fns_isAfter__WEBPACK_IMPORTED_MODULE_4___default()(t.createdAt, mutateDate[i++].createdAt)) {\n            sortedByDate.push(t);\n        }\n    });\n    return sortedByDate;\n}\nasync function getTweetsWithMedia() {\n    const allTweets = await models_tweets__WEBPACK_IMPORTED_MODULE_2__.Tweets.getAll();\n    const result = allTweets.filter((t)=>{\n        if (t.img != \"\") {\n            return t;\n        }\n    });\n    return result;\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9jb250cm9sbGVycy90d2VldHMudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDdUM7QUFDSTtBQUNKO0FBQ0o7QUFDSTtBQUVoQyxlQUFlTSxXQUFXLENBQUNDLFNBQW9CLEVBQUVDLEtBQUssRUFBRTtJQUM3RCxNQUFNQyxJQUFJLEdBQUcsTUFBTVIsNENBQUssQ0FBQ08sS0FBSyxDQUFDRSxNQUFNLENBQUM7SUFDdEMsTUFBTUMsRUFBRSxHQUFHWCxzREFBYSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7SUFDdEMsTUFBTVksVUFBVSxHQUFHO1FBQ2pCQyxRQUFRLEVBQUVKLElBQUksQ0FBQ0ssSUFBSSxDQUFDQyxRQUFRO1FBQzVCQyxNQUFNLEVBQUVQLElBQUksQ0FBQ0ssSUFBSSxDQUFDRyxXQUFXO1FBQzdCQyxjQUFjLEVBQUVULElBQUksQ0FBQ0ssSUFBSSxDQUFDSyxJQUFJLENBQUNELGNBQWM7UUFDN0NFLE9BQU8sRUFBRWIsU0FBUyxDQUFDYSxPQUFPO1FBQzFCQyxHQUFHLEVBQUVkLFNBQVMsQ0FBQ2UsTUFBTSxJQUFJLEVBQUU7UUFDM0JDLFNBQVMsRUFBRSxJQUFJQyxJQUFJLEVBQUU7UUFDckJDLElBQUksRUFBRWxCLFNBQVMsQ0FBQ21CLFNBQVM7UUFDekJmLEVBQUUsRUFBRUEsRUFBRTtRQUNOZ0IsSUFBSSxFQUFFO1lBQUM7Z0JBQUVDLEtBQUssRUFBRSxDQUFDO2dCQUFFQyxRQUFRLEVBQUUsQ0FBQztnQkFBRUMsS0FBSyxFQUFFLENBQUM7Z0JBQUVDLFFBQVEsRUFBRSxDQUFDO2FBQUU7U0FBQztRQUN4REEsUUFBUSxFQUFFO1lBQUMsRUFBRTtTQUFDO0tBQ2Y7SUFDRHRCLElBQUksQ0FBQ0ssSUFBSSxDQUFDa0IsTUFBTSxDQUFDQyxJQUFJLENBQUNyQixVQUFVLENBQUMsQ0FBQztJQUNsQ0gsSUFBSSxDQUFDSyxJQUFJLENBQUNvQixJQUFJLENBQUNELElBQUksQ0FBQ3JCLFVBQVUsQ0FBQyxDQUFDO0lBQ2hDLE1BQU1ILElBQUksQ0FBQ3dCLElBQUksRUFBRSxDQUFDO0lBQ2xCLE1BQU1FLEtBQUssR0FBRyxNQUFNaEMsNkRBQWtCLENBQUNTLFVBQVUsQ0FBQztJQUNsREgsSUFBSSxDQUFDSyxJQUFJLENBQUNzQixTQUFTLENBQUNDLEdBQUcsQ0FBQyxPQUFPQyxVQUFVLEdBQUs7UUFDNUMsTUFBTUMsUUFBUSxHQUFHLE1BQU1uQyxzREFBYSxDQUFDa0MsVUFBVSxDQUFDO1FBQ2hELE1BQU1DLFFBQVEsQ0FBQ0UsSUFBSSxFQUFFLENBQUM7UUFDdEJGLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ29CLElBQUksQ0FBQ0QsSUFBSSxDQUFDRSxLQUFLLENBQUNyQixJQUFJLENBQUMsQ0FBQztRQUNwQyxNQUFNeUIsUUFBUSxDQUFDTixJQUFJLEVBQUUsQ0FBQztLQUN2QixDQUFDLENBQUM7SUFFSCxPQUFPLElBQUksQ0FBQztDQUNiO0FBRU0sZUFBZVMsWUFBWSxDQUFDQyxPQUFlLEVBQUU7SUFDbEQsTUFBTVIsS0FBSyxHQUFHLE1BQU1oQywwREFBZSxDQUFDd0MsT0FBTyxDQUFDO0lBQzVDLE9BQU9SLEtBQUssQ0FBQztDQUNkO0FBRU0sZUFBZVMsZUFBZSxDQUFDRCxPQUFPLEVBQUU7SUFDN0MsTUFBTWhDLEVBQUUsR0FBR2tDLE1BQU0sQ0FBQ0YsT0FBTyxDQUFDO0lBQzFCLE1BQU1SLEtBQUssR0FBRyxNQUFNaEMsMERBQWUsQ0FBQ1EsRUFBRSxDQUFDO0lBRXZDLE1BQU1LLE1BQU0sR0FBR21CLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ0UsTUFBTTtJQUNoQyxNQUFNUCxJQUFJLEdBQUcsTUFBTUwsc0RBQWEsQ0FBQ1ksTUFBTSxDQUFDO0lBRXhDLE1BQU04QixNQUFNLEdBQUdyQyxJQUFJLENBQUNLLElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ2UsSUFBSSxDQUFDLENBQUNaLEtBQVUsR0FBSztRQUNuRCxJQUFJQSxLQUFLLENBQUN4QixFQUFFLElBQUlBLEVBQUUsRUFBRTtZQUNsQixPQUFPd0IsS0FBSyxDQUFDO1NBQ2Q7S0FDRixDQUFDO0lBRUYsaUVBQWlFO0lBQ2pFLHFDQUFxQztJQUNyQyxNQUFNYSxLQUFLLEdBQUd2QyxJQUFJLENBQUNLLElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ2lCLE9BQU8sQ0FBQ0gsTUFBTSxDQUFDO0lBRTlDLElBQUlFLEtBQUssR0FBRyxDQUFDLENBQUMsRUFBRTtRQUNkLHFHQUFxRztRQUNyRyxtQ0FBbUM7UUFDbkN2QyxJQUFJLENBQUNLLElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ2tCLE1BQU0sQ0FBQ0YsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2xDLE1BQU12QyxJQUFJLENBQUN3QixJQUFJLEVBQUUsQ0FBQztLQUNuQjtJQUVEeEIsSUFBSSxDQUFDSyxJQUFJLENBQUNzQixTQUFTLENBQUNDLEdBQUcsQ0FBQyxPQUFPYyxDQUFDLEdBQUs7UUFDbkMsTUFBTVosUUFBUSxHQUFHLE1BQU1uQyxzREFBYSxDQUFDK0MsQ0FBQyxDQUFDO1FBQ3ZDWixRQUFRLENBQUN6QixJQUFJLENBQUNvQixJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDSyxDQUFNLEVBQUVKLEtBQUssR0FBSztZQUN6QyxJQUFJSSxDQUFDLElBQUlDLFNBQVMsSUFBSUQsQ0FBQyxDQUFDekMsRUFBRSxJQUFJQSxFQUFFLEVBQUU7Z0JBQ2hDNEIsUUFBUSxDQUFDekIsSUFBSSxDQUFDb0IsSUFBSSxDQUFDZ0IsTUFBTSxDQUFDRixLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDckM7U0FDRixDQUFDLENBQUM7UUFDSFQsUUFBUSxDQUFDekIsSUFBSSxDQUFDYyxLQUFLLENBQUNtQixJQUFJLENBQUMsQ0FBQ0ssQ0FBTSxFQUFFSixLQUFLLEdBQUs7WUFDMUMsSUFBSUksQ0FBQyxJQUFJQyxTQUFTLElBQUlELENBQUMsQ0FBQ3pDLEVBQUUsSUFBSUEsRUFBRSxFQUFFO2dCQUNoQzRCLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ2MsS0FBSyxDQUFDc0IsTUFBTSxDQUFDRixLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7YUFDdEM7U0FDRixDQUFDLENBQUM7UUFFSFQsUUFBUSxDQUFDekIsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDaUIsSUFBSSxDQUFDLENBQUNLLENBQU0sRUFBRUosS0FBSyxHQUFLO1lBQzFDLElBQUlJLENBQUMsSUFBSUMsU0FBUyxJQUFJRCxDQUFDLENBQUN6QyxFQUFFLElBQUlBLEVBQUUsRUFBRTtnQkFDaEM0QixRQUFRLENBQUN6QixJQUFJLENBQUNnQixLQUFLLENBQUNvQixNQUFNLENBQUNGLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQzthQUN0QztTQUNGLENBQUMsQ0FBQztRQUVILE1BQU1ULFFBQVEsQ0FBQ04sSUFBSSxFQUFFLENBQUM7S0FDdkIsQ0FBQyxDQUFDO0lBRUgsTUFBTUUsS0FBSyxDQUFDbUIsR0FBRyxDQUFDQyxNQUFNLEVBQUUsQ0FBQztJQUN6QixPQUFPO1FBQUVDLE9BQU8sRUFBRSxJQUFJO0tBQUUsQ0FBQztDQUMxQjtBQUVNLGVBQWVDLGNBQWMsQ0FBQ2QsT0FBZSxFQUFFZSxJQUFlLEVBQUU7SUFDckUsTUFBTXZCLEtBQUssR0FBRyxNQUFNaEMsMERBQWUsQ0FBQ3dDLE9BQU8sQ0FBQztJQUM1QyxNQUFNM0IsTUFBTSxHQUFHbUIsS0FBSyxDQUFDckIsSUFBSSxDQUFDRSxNQUFNO0lBQ2hDLE1BQU1QLElBQUksR0FBRyxNQUFNTCxzREFBYSxDQUFDWSxNQUFNLENBQUM7SUFDeEMsTUFBTVAsSUFBSSxDQUFDZ0MsSUFBSSxFQUFFLENBQUM7SUFFbEIsaURBQWlEO0lBQ2pELElBQUlpQixJQUFJLENBQUN0QyxPQUFPLEVBQUU7UUFDaEJlLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ00sT0FBTyxHQUFHc0MsSUFBSSxDQUFDdEMsT0FBTyxDQUFDO0tBQ25DO0lBQ0QsSUFBSXNDLElBQUksQ0FBQ3JDLEdBQUcsRUFBRTtRQUNaYyxLQUFLLENBQUNyQixJQUFJLENBQUNPLEdBQUcsR0FBR3FDLElBQUksQ0FBQ3JDLEdBQUcsQ0FBQztLQUMzQjtJQUNELE1BQU1jLEtBQUssQ0FBQ0YsSUFBSSxFQUFFLENBQUM7SUFFbkIsdUVBQXVFO0lBRXZFeEIsSUFBSSxDQUFDSyxJQUFJLENBQUNrQixNQUFNLENBQUNlLElBQUksQ0FBQyxPQUFPWixLQUFVLEdBQUs7UUFDMUMsSUFBSUEsS0FBSyxDQUFDeEIsRUFBRSxJQUFJZ0MsT0FBTyxFQUFFO1lBQ3ZCUixLQUFLLENBQUNmLE9BQU8sR0FBR3NDLElBQUksQ0FBQ3RDLE9BQU8sSUFBSSxFQUFFLENBQUM7WUFDbkNlLEtBQUssQ0FBQ2QsR0FBRyxHQUFHcUMsSUFBSSxDQUFDckMsR0FBRyxJQUFJLEVBQUUsQ0FBQztZQUMzQmMsS0FBSyxDQUFDVCxTQUFTLEdBQUdnQyxJQUFJLENBQUNoQyxTQUFTLElBQUksRUFBRSxDQUFDO1lBQ3ZDLE1BQU1qQixJQUFJLENBQUN3QixJQUFJLEVBQUUsQ0FBQztTQUNuQjtLQUNGLENBQUMsQ0FBQztJQUVILHVGQUF1RjtJQUV2RnhCLElBQUksQ0FBQ0ssSUFBSSxDQUFDc0IsU0FBUyxDQUFDQyxHQUFHLENBQUMsT0FBT3NCLE9BQU8sR0FBSztRQUN6QyxNQUFNQyxZQUFZLEdBQUcsTUFBTXhELHNEQUFhLENBQUN1RCxPQUFPLENBQUM7UUFDakQsTUFBTUMsWUFBWSxDQUFDbkIsSUFBSSxFQUFFLENBQUM7UUFDMUIsTUFBTUssTUFBTSxHQUFHYyxZQUFZLENBQUM5QyxJQUFJLENBQUNvQixJQUFJLENBQUNhLElBQUksQ0FBQyxPQUFPSyxDQUFNLEdBQUs7WUFDM0QsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJZ0MsT0FBTyxFQUFFO2dCQUNuQlMsQ0FBQyxDQUFDaEMsT0FBTyxHQUFHZSxLQUFLLENBQUNyQixJQUFJLENBQUNNLE9BQU8sQ0FBQztnQkFDL0JnQyxDQUFDLENBQUMvQixHQUFHLEdBQUdjLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ08sR0FBRyxDQUFDO2dCQUN2QitCLENBQUMsQ0FBQzFCLFNBQVMsR0FBR1MsS0FBSyxDQUFDckIsSUFBSSxDQUFDVyxJQUFJLENBQUM7Z0JBQzlCLE1BQU1tQyxZQUFZLENBQUMzQixJQUFJLEVBQUUsQ0FBQzthQUMzQjtTQUNGLENBQUM7UUFDRixPQUFPYSxNQUFNLENBQUM7S0FDZixDQUFDLENBQUM7Q0FDSjtBQUVELHlGQUF5RjtBQUVsRixlQUFlZSx5QkFBeUIsQ0FDN0NDLE1BQWMsRUFDZG5CLE9BQWUsRUFDZm5DLEtBQUssRUFDTDtJQUNBLDJFQUEyRTtJQUMzRSxtRkFBbUY7SUFFbkYsTUFBTXVELFFBQVEsR0FBRyxNQUFNckIsWUFBWSxDQUFDQyxPQUFPLENBQUM7SUFDNUMsTUFBTXFCLGFBQWEsR0FBRyxNQUFNNUQsc0RBQWEsQ0FBQzJELFFBQVEsQ0FBQ2pELElBQUksQ0FBQ0UsTUFBTSxDQUFDO0lBRS9ELE1BQU1pRCxVQUFVLEdBQVFELGFBQWEsQ0FBQ2xELElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ2UsSUFBSSxDQUFDLENBQUNLLENBQU0sR0FBSztRQUNqRSxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUlnQyxPQUFPLEVBQUU7WUFDbkIsT0FBT1MsQ0FBQyxDQUFDO1NBQ1Y7S0FDRixDQUFDO0lBRUYsTUFBTWMsOEJBQThCLEdBQUcsTUFBTUMsT0FBTyxDQUFDQyxVQUFVLENBQzdESixhQUFhLENBQUNsRCxJQUFJLENBQUNzQixTQUFTLENBQUNDLEdBQUcsQ0FBQyxPQUFPYyxDQUFDLEdBQUs7UUFDNUMsTUFBTWtCLFdBQVcsR0FBRyxNQUFNakUsc0RBQWEsQ0FBQytDLENBQUMsQ0FBQztRQUMxQyxNQUFNaEIsS0FBSyxHQUFHa0MsV0FBVyxFQUFFdkQsSUFBSSxDQUFDb0IsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQ0ssQ0FBTSxHQUFLO1lBQ3BELElBQUlBLENBQUMsQ0FBQ3pDLEVBQUUsSUFBSWdDLE9BQU8sRUFBRTtnQkFDbkIsT0FBT1MsQ0FBQyxDQUFDO2FBQ1Y7U0FDRixDQUFDO1FBQ0YsT0FBTztZQUFFakIsS0FBSztZQUFFa0MsV0FBVyxFQUFFQSxXQUFXO1NBQUUsQ0FBQztLQUM1QyxDQUFDLENBQ0g7SUFDRCxrRUFBa0U7SUFDbEUsTUFBTUMsaUJBQWlCLEdBQUdKLDhCQUE4QixDQUFDLENBQUMsQ0FBQyxDQUFDSyxLQUFLLENBQUNGLFdBQVc7SUFDN0UsTUFBTUcsbUJBQW1CLEdBQUdOLDhCQUE4QixDQUFDLENBQUMsQ0FBQyxDQUFDSyxLQUFLLENBQUNwQyxLQUFLO0lBRXpFLDRFQUE0RTtJQUU1RSxJQUFJMkIsTUFBTSxJQUFJLE1BQU0sRUFBRTtRQUNwQkMsUUFBUSxDQUFDakQsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDakNxQyxVQUFVLENBQUN0QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDOUI0QyxtQkFBbUIsR0FBSUEsbUJBQW1CLENBQUM3QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLEdBQUksRUFBRSxDQUFDO0tBQ3JFLE1BQU0sSUFBSWtDLE1BQU0sSUFBSSxTQUFTLEVBQUU7UUFDOUJDLFFBQVEsQ0FBQ2pELElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ3BDb0MsVUFBVSxDQUFDdEMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ2pDMkMsbUJBQW1CLEdBQUlBLG1CQUFtQixDQUFDN0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxHQUFJLEVBQUUsQ0FBQztLQUN4RSxNQUFNLElBQUlpQyxNQUFNLElBQUksTUFBTSxFQUFFO1FBQzNCQyxRQUFRLENBQUNqRCxJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsQ0FBQztRQUNqQ21DLFVBQVUsQ0FBQ3RDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsQ0FBQztRQUM5QjBDLG1CQUFtQixHQUFJQSxtQkFBbUIsQ0FBQzdDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsR0FBSSxFQUFFLENBQUM7S0FDckUsTUFBTTtRQUNMaUMsUUFBUSxDQUFDakQsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLENBQUM7UUFDcENrQyxVQUFVLENBQUN0QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLENBQUM7UUFDakN5QyxtQkFBbUIsR0FBSUEsbUJBQW1CLENBQUM3QyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLEdBQUksRUFBRSxDQUFDO0tBQ3hFO0lBRUQsOEZBQThGO0lBRTlGLE1BQU1nQyxRQUFRLENBQUM5QixJQUFJLEVBQUUsQ0FBQztJQUN0QixNQUFNK0IsYUFBYSxDQUFDL0IsSUFBSSxFQUFFLENBQUM7SUFDM0IsTUFBTS9CLGlEQUFVLENBQUM0RCxNQUFNLEVBQUVDLFFBQVEsRUFBRXZELEtBQUssQ0FBQyxDQUFDO0lBQzFDLElBQUk4RCxpQkFBaUIsSUFBSWpCLFNBQVMsRUFBRTtRQUNsQyxNQUFNaUIsaUJBQWlCLENBQUNyQyxJQUFJLEVBQUUsQ0FBQztLQUNoQztJQUNELE9BQU84QixRQUFRLENBQUNqRCxJQUFJLENBQUNhLElBQUksQ0FBQztDQUMzQjtBQUVELGtHQUFrRztBQUNsRyw2QkFBNkI7QUFFdEIsZUFBZThDLHdCQUF3QixDQUM1Q1gsTUFBYyxFQUNkbkIsT0FBZSxFQUNmO0lBQ0Esd0VBQXdFO0lBQ3hFLG9DQUFvQztJQUVwQyxNQUFNUixLQUFLLEdBQUcsTUFBTU8sWUFBWSxDQUFDQyxPQUFPLENBQUM7SUFFekMsTUFBTXFCLGFBQWEsR0FBRyxNQUFNNUQsc0RBQWEsQ0FBQytCLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ0UsTUFBTSxDQUFDO0lBQzVELE1BQU0wRCxZQUFZLEdBQVFWLGFBQWEsQ0FBQ2xELElBQUksQ0FBQ2tCLE1BQU0sQ0FBQ2UsSUFBSSxDQUFDLENBQUNaLEtBQVUsR0FBSztRQUN2RSxJQUFJQSxLQUFLLENBQUN4QixFQUFFLElBQUlnQyxPQUFPLEVBQUU7WUFDdkIsT0FBT1IsS0FBSyxDQUFDO1NBQ2Q7S0FDRixDQUFDO0lBRUYsTUFBTXdDLGNBQWMsR0FBR1gsYUFBYSxDQUFDbEQsSUFBSSxDQUFDc0IsU0FBUztJQUNuRCxNQUFNd0MsZUFBZSxHQUFHLE1BQU1ULE9BQU8sQ0FBQ1UsR0FBRyxDQUN2Q0YsY0FBYyxDQUFDdEMsR0FBRyxDQUFDLE9BQU9FLFFBQVEsR0FBSztRQUNyQyxNQUFNdUMsWUFBWSxHQUFHLE1BQU0xRSxzREFBYSxDQUFDbUMsUUFBUSxDQUFDO1FBQ2xELE1BQU11QyxZQUFZLENBQUNyQyxJQUFJLEVBQUUsQ0FBQztRQUMxQixNQUFNc0MscUJBQXFCLEdBQUdELFlBQVksQ0FBQ2hFLElBQUksQ0FBQ29CLElBQUksQ0FBQ2EsSUFBSSxDQUN2RCxDQUFDZixNQUFXLEdBQUs7WUFDZixJQUFJQSxNQUFNLENBQUNyQixFQUFFLElBQUlnQyxPQUFPLEVBQUU7Z0JBQ3hCLE9BQU9YLE1BQU0sQ0FBQzthQUNmO1NBQ0YsQ0FDRjtRQUNELE9BQU87WUFBRThDLFlBQVk7WUFBRUMscUJBQXFCO1NBQUUsQ0FBQztLQUNoRCxDQUFDLENBQ0g7SUFDRCxNQUFNeEMsUUFBUSxHQUFHcUMsZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxZQUFZO0lBQ2hELE1BQU1FLGFBQWEsR0FBR0osZUFBZSxDQUFDLENBQUMsQ0FBQyxDQUFDRyxxQkFBcUI7SUFFOUQsa0RBQWtEO0lBRWxELElBQUlqQixNQUFNLElBQUksTUFBTSxFQUFFO1FBQ3BCM0IsS0FBSyxDQUFDckIsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDOUJvRCxhQUFhLENBQUNyRCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUM7UUFDakM4QyxZQUFZLENBQUMvQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNDLEtBQUssSUFBSSxDQUFDLENBQUM7S0FDakMsTUFBTSxJQUFJa0MsTUFBTSxJQUFJLFNBQVMsRUFBRTtRQUM5QjNCLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ2pDbUQsYUFBYSxDQUFDckQsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ3BDNkMsWUFBWSxDQUFDL0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRSxRQUFRLElBQUksQ0FBQyxDQUFDO0tBQ3BDLE1BQU0sSUFBSWlDLE1BQU0sSUFBSSxNQUFNLEVBQUU7UUFDM0IzQixLQUFLLENBQUNyQixJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsQ0FBQztRQUM5QmtELGFBQWEsQ0FBQ3JELElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsQ0FBQztRQUNqQzRDLFlBQVksQ0FBQy9DLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0csS0FBSyxJQUFJLENBQUMsQ0FBQztLQUNqQyxNQUFNO1FBQ0xLLEtBQUssQ0FBQ3JCLElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDSSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ2pDaUQsYUFBYSxDQUFDckQsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDSSxRQUFRLElBQUksQ0FBQyxDQUFDO1FBQ3BDMkMsWUFBWSxDQUFDL0MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDRyxLQUFLLElBQUksQ0FBQyxDQUFDO0tBQ2pDO0lBRUQsaURBQWlEO0lBQ2pELE1BQU1LLEtBQUssQ0FBQ0YsSUFBSSxFQUFFLENBQUM7SUFDbkIsTUFBTU0sUUFBUSxDQUFDTixJQUFJLEVBQUUsQ0FBQztJQUN0QixNQUFNK0IsYUFBYSxDQUFDL0IsSUFBSSxFQUFFLENBQUM7SUFDM0IsT0FBT0UsS0FBSyxDQUFDckIsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7Q0FDM0I7QUFFTSxlQUFlc0QsVUFBVSxDQUFDdkIsSUFBSSxFQUFFLEVBQUVoRCxNQUFNLEdBQUUsRUFBRTtJQUNqRCxtRkFBbUY7SUFDbkYsdUVBQXVFO0lBRXZFLE1BQU13RSxFQUFFLEdBQUcsTUFBTWpGLDRDQUFLLENBQUNTLE1BQU0sQ0FBQztJQUU5QixJQUFJeUUsUUFBUSxHQUFHbkYsc0RBQWEsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDO0lBQzFDLE1BQU1vRixVQUFVLEdBQUc7UUFDakJDLE9BQU8sRUFBRTNCLElBQUksQ0FBQzBCLFVBQVUsQ0FBQ0MsT0FBTztRQUNoQ3JFLE1BQU0sRUFBRTBDLElBQUksQ0FBQzBCLFVBQVUsQ0FBQ3BFLE1BQU07UUFDOUJzRSxFQUFFLEVBQUUsSUFBSTlELElBQUksRUFBRTtRQUNkYixFQUFFLEVBQUV3RSxRQUFRO1FBQ1p2RCxLQUFLLEVBQUUsQ0FBQztRQUNSZSxPQUFPLEVBQUVlLElBQUksQ0FBQzBCLFVBQVUsQ0FBQ3pDLE9BQU87UUFDaEM0QyxFQUFFLEVBQUU3QixJQUFJLENBQUMwQixVQUFVLENBQUNHLEVBQUU7UUFDdEJwRSxJQUFJLEVBQUU7WUFBRUQsY0FBYyxFQUFFd0MsSUFBSSxDQUFDMEIsVUFBVSxDQUFDakUsSUFBSSxDQUFDRCxjQUFjO1NBQUU7S0FDOUQ7SUFFRCw0RkFBNEY7SUFFNUYsTUFBTWlCLEtBQUssR0FBRyxNQUFNaEMsMERBQWUsQ0FBQ3VELElBQUksQ0FBQzBCLFVBQVUsQ0FBQ3pDLE9BQU8sQ0FBQztJQUU1RCxNQUFNNkMsWUFBWSxHQUFHckQsS0FBSyxDQUFDckIsSUFBSSxDQUFDRSxNQUFNO0lBRXRDLE1BQU15RSxVQUFVLEdBQUcsTUFBTXJGLHNEQUFhLENBQUNvRixZQUFZLENBQUM7SUFFcEQsMkVBQTJFO0lBRTNFQyxVQUFVLENBQUMzRSxJQUFJLENBQUNrQixNQUFNLENBQUNlLElBQUksQ0FBQyxDQUFDSyxDQUFZLEdBQUs7UUFDNUMsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJK0MsSUFBSSxDQUFDMEIsVUFBVSxDQUFDekMsT0FBTyxFQUFFO1lBQ25DUyxDQUFDLENBQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLENBQUM7WUFDeEJxQixDQUFDLENBQUNyQixRQUFRLENBQUNFLElBQUksQ0FBQ21ELFVBQVUsQ0FBQyxDQUFDO1NBQzdCO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsMEdBQTBHO0lBRTFHSyxVQUFVLENBQUMzRSxJQUFJLENBQUNzQixTQUFTLENBQUNDLEdBQUcsQ0FBQyxPQUFPYyxDQUFDLEdBQUs7UUFDekMsTUFBTVMsWUFBWSxHQUFHLE1BQU14RCxzREFBYSxDQUFDK0MsQ0FBQyxDQUFDO1FBQzNDUyxZQUFZLENBQUM5QyxJQUFJLENBQUNvQixJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDSyxDQUFZLEdBQUs7WUFDNUMsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJK0MsSUFBSSxDQUFDMEIsVUFBVSxDQUFDekMsT0FBTyxFQUFFO2dCQUNuQ1MsQ0FBQyxDQUFDekIsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDSSxRQUFRLElBQUksQ0FBQyxDQUFDO2dCQUN4QnFCLENBQUMsQ0FBQ3JCLFFBQVEsQ0FBQ0UsSUFBSSxDQUFDbUQsVUFBVSxDQUFDLENBQUM7YUFDN0I7U0FDRixDQUFDLENBQUM7UUFDSHhCLFlBQVksQ0FBQzlDLElBQUksQ0FBQ2MsS0FBSyxDQUFDbUIsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUM3QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUkrQyxJQUFJLENBQUMwQixVQUFVLENBQUN6QyxPQUFPLEVBQUU7Z0JBQ25DUyxDQUFDLENBQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLENBQUM7Z0JBQ3hCcUIsQ0FBQyxDQUFDckIsUUFBUSxDQUFDRSxJQUFJLENBQUNtRCxVQUFVLENBQUMsQ0FBQzthQUM3QjtTQUNGLENBQUMsQ0FBQztRQUNIeEIsWUFBWSxDQUFDOUMsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDaUIsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUM3QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUkrQyxJQUFJLENBQUMwQixVQUFVLENBQUN6QyxPQUFPLEVBQUU7Z0JBQ25DUyxDQUFDLENBQUN6QixJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUNJLFFBQVEsSUFBSSxDQUFDLENBQUM7Z0JBQ3hCcUIsQ0FBQyxDQUFDckIsUUFBUSxDQUFDRSxJQUFJLENBQUNtRCxVQUFVLENBQUMsQ0FBQzthQUM3QjtTQUNGLENBQUMsQ0FBQztRQUNILE1BQU14QixZQUFZLENBQUMzQixJQUFJLEVBQUUsQ0FBQztLQUMzQixDQUFDLENBQUM7SUFDSGlELEVBQUUsQ0FBQ3BFLElBQUksQ0FBQzRFLE9BQU8sQ0FBQ3pELElBQUksQ0FBQ21ELFVBQVUsQ0FBQyxDQUFDO0lBQ2pDakQsS0FBSyxDQUFDckIsSUFBSSxDQUFDaUIsUUFBUSxDQUFDRSxJQUFJLENBQUNtRCxVQUFVLENBQUMsQ0FBQztJQUVyQywwRkFBMEY7SUFDMUYsbUdBQW1HO0lBQ25HLHFFQUFxRTtJQUVyRSxJQUFJRixFQUFFLENBQUNwRSxJQUFJLENBQUNHLFdBQVcsSUFBSXdFLFVBQVUsQ0FBQzNFLElBQUksQ0FBQ0csV0FBVyxFQUFFO1FBQ3REd0UsVUFBVSxDQUFDM0UsSUFBSSxDQUFDb0IsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQ0ssQ0FBTSxHQUFLO1lBQ3BDLElBQUlBLENBQUMsQ0FBQ3pDLEVBQUUsSUFBSStDLElBQUksQ0FBQzBCLFVBQVUsQ0FBQ3pDLE9BQU8sRUFBRTtnQkFDbkNTLENBQUMsQ0FBQ3pCLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQ0ksUUFBUSxJQUFJLENBQUMsQ0FBQztnQkFDeEJxQixDQUFDLENBQUNyQixRQUFRLENBQUNFLElBQUksQ0FBQ21ELFVBQVUsQ0FBQyxDQUFDO2FBQzdCO1NBQ0YsQ0FBQyxDQUFDO1FBQ0gsTUFBTUssVUFBVSxDQUFDeEQsSUFBSSxFQUFFLENBQUM7UUFDeEIsTUFBTUUsS0FBSyxDQUFDRixJQUFJLEVBQUUsQ0FBQztRQUNuQixPQUFPLElBQUksQ0FBQztLQUNiLE1BQU07UUFDTCxNQUFNRSxLQUFLLENBQUNGLElBQUksRUFBRSxDQUFDO1FBQ25CLE1BQU1pRCxFQUFFLENBQUNqRCxJQUFJLEVBQUUsQ0FBQztRQUNoQixNQUFNd0QsVUFBVSxDQUFDeEQsSUFBSSxFQUFFLENBQUM7UUFDeEIsT0FBTyxJQUFJLENBQUM7S0FDYjtDQUNGO0FBRUQsd0JBQXdCO0FBQ2pCLGVBQWUwRCxXQUFXLENBQy9CaEQsT0FBZSxFQUNmaUQsT0FBZSxFQUNmLEVBQUVsRixNQUFNLEdBQUUsRUFDVjtJQUNBLE1BQU1xRCxRQUFRLEdBQUcsTUFBTTVELDBEQUFlLENBQUN3QyxPQUFPLENBQUM7SUFDL0MsTUFBTTNCLE1BQU0sR0FBRytDLFFBQVEsQ0FBQ2pELElBQUksQ0FBQ0UsTUFBTTtJQUNuQyxNQUFNUCxJQUFJLEdBQUcsTUFBTUwsc0RBQWEsQ0FBQ1ksTUFBTSxDQUFDO0lBQ3hDLE1BQU1rRSxFQUFFLEdBQUcsTUFBTWpGLDRDQUFLLENBQUNTLE1BQU0sQ0FBQztJQUU5QixxRUFBcUU7SUFDckVxRCxRQUFRLENBQUNqRCxJQUFJLENBQUNpQixRQUFRLENBQUNnQixJQUFJLENBQUMsQ0FBQzhDLENBQU0sR0FBSztRQUN0QyxJQUFJQSxDQUFDLENBQUNsRixFQUFFLElBQUlpRixPQUFPLEVBQUU7WUFDbkJDLENBQUMsQ0FBQ2pFLEtBQUssSUFBSSxDQUFDLENBQUM7U0FDZDtLQUNGLENBQUMsQ0FBQztJQUVILGtHQUFrRztJQUNsR25CLElBQUksQ0FBQ0ssSUFBSSxDQUFDa0IsTUFBTSxDQUFDZSxJQUFJLENBQUMsQ0FBQ0ssQ0FBWSxHQUFLO1FBQ3RDLElBQUlBLENBQUMsQ0FBQ3pDLEVBQUUsSUFBSWdDLE9BQU8sRUFBRTtZQUNuQlMsQ0FBQyxDQUFDckIsUUFBUSxDQUFDZ0IsSUFBSSxDQUFDLENBQUM4QyxDQUFNLEdBQUs7Z0JBQzFCLElBQUlBLENBQUMsQ0FBQ2xGLEVBQUUsSUFBSWlGLE9BQU8sRUFBRTtvQkFDbkJDLENBQUMsQ0FBQ2pFLEtBQUssSUFBSSxDQUFDLENBQUM7aUJBQ2Q7YUFDRixDQUFDLENBQUM7U0FDSjtLQUNGLENBQUMsQ0FBQztJQUVILG9GQUFvRjtJQUNwRm5CLElBQUksQ0FBQ0ssSUFBSSxDQUFDc0IsU0FBUyxDQUFDQyxHQUFHLENBQUMsT0FBT2MsQ0FBQyxHQUFLO1FBQ25DLE1BQU1aLFFBQVEsR0FBRyxNQUFNbkMsc0RBQWEsQ0FBQytDLENBQUMsQ0FBQztRQUN2Q1osUUFBUSxDQUFDekIsSUFBSSxDQUFDZ0IsS0FBSyxDQUFDaUIsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUN6QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUlnQyxPQUFPLEVBQUU7Z0JBQ25CUyxDQUFDLENBQUNyQixRQUFRLENBQUNNLEdBQUcsQ0FBQyxPQUFPd0QsQ0FBTSxHQUFLO29CQUMvQixJQUFJQSxDQUFDLENBQUNsRixFQUFFLElBQUlpRixPQUFPLEVBQUU7d0JBQ25CQyxDQUFDLENBQUNqRSxLQUFLLElBQUksQ0FBQyxDQUFDO3FCQUNkO2lCQUNGLENBQUMsQ0FBQzthQUNKO1NBQ0YsQ0FBQyxDQUFDO1FBQ0hXLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ2MsS0FBSyxDQUFDbUIsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUN6QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUlnQyxPQUFPLEVBQUU7Z0JBQ25CUyxDQUFDLENBQUNyQixRQUFRLENBQUNNLEdBQUcsQ0FBQyxPQUFPd0QsQ0FBTSxHQUFLO29CQUMvQixJQUFJQSxDQUFDLENBQUNsRixFQUFFLElBQUlpRixPQUFPLEVBQUU7d0JBQ25CQyxDQUFDLENBQUNqRSxLQUFLLElBQUksQ0FBQyxDQUFDO3FCQUNkO2lCQUNGLENBQUMsQ0FBQzthQUNKO1NBQ0YsQ0FBQyxDQUFDO1FBQ0hXLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ29CLElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUN4QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUlnQyxPQUFPLEVBQUU7Z0JBQ25CUyxDQUFDLENBQUNyQixRQUFRLENBQUNNLEdBQUcsQ0FBQyxPQUFPd0QsQ0FBTSxHQUFLO29CQUMvQixJQUFJQSxDQUFDLENBQUNsRixFQUFFLElBQUlpRixPQUFPLEVBQUU7d0JBQ25CQyxDQUFDLENBQUNqRSxLQUFLLElBQUksQ0FBQyxDQUFDO3dCQUNiLE1BQU1XLFFBQVEsQ0FBQ04sSUFBSSxFQUFFLENBQUM7cUJBQ3ZCO2lCQUNGLENBQUMsQ0FBQzthQUNKO1NBQ0YsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0lBRUgsNkRBQTZEO0lBQzdEaUQsRUFBRSxDQUFDcEUsSUFBSSxDQUFDNEUsT0FBTyxDQUFDM0MsSUFBSSxDQUFDLENBQUM4QyxDQUFNLEdBQUs7UUFDL0IsSUFBSUEsQ0FBQyxDQUFDbEYsRUFBRSxJQUFJaUYsT0FBTyxFQUFFO1lBQ25CQyxDQUFDLENBQUNqRSxLQUFLLElBQUksQ0FBQyxDQUFDO1NBQ2Q7S0FDRixDQUFDLENBQUM7SUFDSCxNQUFNbUMsUUFBUSxDQUFDOUIsSUFBSSxFQUFFLENBQUM7SUFDdEIsSUFBSXhCLElBQUksQ0FBQ0ssSUFBSSxDQUFDRyxXQUFXLElBQUlpRSxFQUFFLENBQUNwRSxJQUFJLENBQUNHLFdBQVcsRUFBRTtRQUNoRCxNQUFNaUUsRUFBRSxDQUFDakQsSUFBSSxFQUFFLENBQUM7S0FDakIsTUFBTTtRQUNMLE1BQU1pRCxFQUFFLENBQUNqRCxJQUFJLEVBQUUsQ0FBQztRQUNoQixNQUFNeEIsSUFBSSxDQUFDd0IsSUFBSSxFQUFFLENBQUM7S0FDbkI7SUFDRCxPQUFPLElBQUksQ0FBQztDQUNiO0FBRUQsbUJBQW1CO0FBRVosZUFBZTZELGNBQWMsQ0FDbENuRCxPQUFlLEVBQ2ZpRCxPQUFlLEVBQ2YsRUFBRWxGLE1BQU0sR0FBRSxFQUNWO0lBQ0EsTUFBTXFELFFBQVEsR0FBRyxNQUFNNUQsMERBQWUsQ0FBQ3dDLE9BQU8sQ0FBQztJQUMvQyxNQUFNM0IsTUFBTSxHQUFHK0MsUUFBUSxDQUFDakQsSUFBSSxDQUFDRSxNQUFNO0lBQ25DLE1BQU1QLElBQUksR0FBRyxNQUFNTCxzREFBYSxDQUFDWSxNQUFNLENBQUM7SUFDeEMsTUFBTWtFLEVBQUUsR0FBRyxNQUFNakYsNENBQUssQ0FBQ1MsTUFBTSxDQUFDO0lBRTlCLDREQUE0RDtJQUM1RHFELFFBQVEsQ0FBQ2pELElBQUksQ0FBQ2lCLFFBQVEsQ0FBQ2dCLElBQUksQ0FBQyxDQUFDOEMsQ0FBTSxHQUFLO1FBQ3RDLElBQUlBLENBQUMsQ0FBQ2xGLEVBQUUsSUFBSWlGLE9BQU8sRUFBRTtZQUNuQkMsQ0FBQyxDQUFDakUsS0FBSyxJQUFJLENBQUMsQ0FBQztTQUNkO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsc0dBQXNHO0lBRXRHbkIsSUFBSSxDQUFDSyxJQUFJLENBQUNrQixNQUFNLENBQUNlLElBQUksQ0FBQyxDQUFDSyxDQUFZLEdBQUs7UUFDdEMsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJZ0MsT0FBTyxFQUFFO1lBQ25CUyxDQUFDLENBQUNyQixRQUFRLENBQUNnQixJQUFJLENBQUMsQ0FBQzhDLENBQU0sR0FBSztnQkFDMUIsSUFBSUEsQ0FBQyxDQUFDbEYsRUFBRSxJQUFJaUYsT0FBTyxFQUFFO29CQUNuQkMsQ0FBQyxDQUFDakUsS0FBSyxJQUFJLENBQUMsQ0FBQztpQkFDZDthQUNGLENBQUMsQ0FBQztTQUNKO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsbUVBQW1FO0lBQ25FLDJFQUEyRTtJQUMzRSwyRUFBMkU7SUFDM0VuQixJQUFJLENBQUNLLElBQUksQ0FBQ3NCLFNBQVMsQ0FBQ0MsR0FBRyxDQUFDLE9BQU9jLENBQUMsR0FBSztRQUNuQyxNQUFNWixRQUFRLEdBQUcsTUFBTW5DLHNEQUFhLENBQUMrQyxDQUFDLENBQUM7UUFDdkNaLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ2MsS0FBSyxDQUFDbUIsSUFBSSxDQUFDLENBQUNLLENBQVksR0FBSztZQUN6QyxJQUFJQSxDQUFDLENBQUN6QyxFQUFFLElBQUlnQyxPQUFPLEVBQUU7Z0JBQ25CUyxDQUFDLENBQUNyQixRQUFRLENBQUNNLEdBQUcsQ0FBQyxPQUFPd0QsQ0FBTSxHQUFLO29CQUMvQixJQUFJQSxDQUFDLENBQUNsRixFQUFFLElBQUlpRixPQUFPLEVBQUU7d0JBQ25CQyxDQUFDLENBQUNqRSxLQUFLLElBQUksQ0FBQyxDQUFDO3FCQUNkO2lCQUNGLENBQUMsQ0FBQzthQUNKO1NBQ0YsQ0FBQyxDQUFDO1FBQ0hXLFFBQVEsQ0FBQ3pCLElBQUksQ0FBQ2dCLEtBQUssQ0FBQ2lCLElBQUksQ0FBQyxDQUFDSyxDQUFZLEdBQUs7WUFDekMsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJZ0MsT0FBTyxFQUFFO2dCQUNuQlMsQ0FBQyxDQUFDckIsUUFBUSxDQUFDTSxHQUFHLENBQUMsT0FBT3dELENBQU0sR0FBSztvQkFDL0IsSUFBSUEsQ0FBQyxDQUFDbEYsRUFBRSxJQUFJaUYsT0FBTyxFQUFFO3dCQUNuQkMsQ0FBQyxDQUFDakUsS0FBSyxJQUFJLENBQUMsQ0FBQztxQkFDZDtpQkFDRixDQUFDLENBQUM7YUFDSjtTQUNGLENBQUMsQ0FBQztRQUNIVyxRQUFRLENBQUN6QixJQUFJLENBQUNvQixJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDSyxDQUFZLEdBQUs7WUFDeEMsSUFBSUEsQ0FBQyxDQUFDekMsRUFBRSxJQUFJZ0MsT0FBTyxFQUFFO2dCQUNuQlMsQ0FBQyxDQUFDckIsUUFBUSxDQUFDTSxHQUFHLENBQUMsT0FBT3dELENBQU0sR0FBSztvQkFDL0IsSUFBSUEsQ0FBQyxDQUFDbEYsRUFBRSxJQUFJaUYsT0FBTyxFQUFFO3dCQUNuQkMsQ0FBQyxDQUFDakUsS0FBSyxJQUFJLENBQUMsQ0FBQzt3QkFDYixNQUFNVyxRQUFRLENBQUNOLElBQUksRUFBRSxDQUFDO3FCQUN2QjtpQkFDRixDQUFDLENBQUM7YUFDSjtTQUNGLENBQUMsQ0FBQztLQUNKLENBQUMsQ0FBQztJQUVILHNGQUFzRjtJQUV0RmlELEVBQUUsQ0FBQ3BFLElBQUksQ0FBQzRFLE9BQU8sQ0FBQzNDLElBQUksQ0FBQyxPQUFPOEMsQ0FBTSxHQUFLO1FBQ3JDLElBQUlBLENBQUMsQ0FBQ2xGLEVBQUUsSUFBSWlGLE9BQU8sRUFBRTtZQUNuQkMsQ0FBQyxDQUFDakUsS0FBSyxJQUFJLENBQUMsQ0FBQztTQUNkO0tBQ0YsQ0FBQyxDQUFDO0lBRUgsTUFBTW1DLFFBQVEsQ0FBQzlCLElBQUksRUFBRSxDQUFDO0lBQ3RCLElBQUl4QixJQUFJLENBQUNLLElBQUksQ0FBQ0csV0FBVyxJQUFJaUUsRUFBRSxDQUFDcEUsSUFBSSxDQUFDRyxXQUFXLEVBQUU7UUFDaEQsTUFBTWlFLEVBQUUsQ0FBQ2pELElBQUksRUFBRSxDQUFDO0tBQ2pCLE1BQU07UUFDTCxNQUFNaUQsRUFBRSxDQUFDakQsSUFBSSxFQUFFLENBQUM7UUFDaEIsTUFBTXhCLElBQUksQ0FBQ3dCLElBQUksRUFBRSxDQUFDO0tBQ25CO0lBQ0QsT0FBTyxJQUFJLENBQUM7Q0FDYjtBQUVNLGVBQWU4RCxlQUFlLEdBQUc7SUFDdEMsTUFBTUMsU0FBUyxHQUFHLE1BQU03Rix3REFBYSxFQUFFO0lBQ3ZDLE1BQU0rRixVQUFVLEdBQUdGLFNBQVMsQ0FBQzNELEdBQUcsQ0FBQyxDQUFDRixLQUFLLEdBQUs7UUFDMUMsTUFBTWdFLFNBQVMsR0FBR2hFLEtBQUssQ0FBQ1osU0FBUztRQUNqQyxNQUFNNkUsSUFBSSxHQUFHLElBQUk1RSxJQUFJLENBQ25CMkUsU0FBUyxDQUFDRSxRQUFRLEdBQUcsSUFBSSxHQUFHRixTQUFTLENBQUNHLFlBQVksR0FBRyxPQUFPLENBQzdEO1FBQ0RuRSxLQUFLLENBQUNaLFNBQVMsR0FBRzZFLElBQUksQ0FBQztRQUN2QixPQUFPakUsS0FBSyxDQUFDO0tBQ2QsQ0FBQztJQUVGLE1BQU1vRSxZQUFZLEdBQUcsRUFBRTtJQUN2QkwsVUFBVSxDQUFDTSxNQUFNLENBQUMsQ0FBQ3BELENBQUMsRUFBRXFELENBQUMsR0FBSztRQUMxQixJQUFJLENBQUNwRyx1REFBTyxDQUFDK0MsQ0FBQyxDQUFDN0IsU0FBUyxFQUFFMkUsVUFBVSxDQUFDTyxDQUFDLEVBQUUsQ0FBQyxDQUFDbEYsU0FBUyxDQUFDLEVBQUU7WUFDcERnRixZQUFZLENBQUN0RSxJQUFJLENBQUNtQixDQUFDLENBQUMsQ0FBQztTQUN0QjtLQUNGLENBQUMsQ0FBQztJQUNILE9BQU9tRCxZQUFZLENBQUM7Q0FDckI7QUFFTSxlQUFlRyxrQkFBa0IsR0FBRztJQUN6QyxNQUFNVixTQUFTLEdBQUcsTUFBTTdGLHdEQUFhLEVBQUU7SUFDdkMsTUFBTTJDLE1BQU0sR0FBR2tELFNBQVMsQ0FBQ1EsTUFBTSxDQUFDLENBQUNwRCxDQUFDLEdBQUs7UUFDckMsSUFBSUEsQ0FBQyxDQUFDL0IsR0FBRyxJQUFJLEVBQUUsRUFBRTtZQUNmLE9BQU8rQixDQUFDLENBQUM7U0FDVjtLQUNGLENBQUM7SUFDRixPQUFPTixNQUFNLENBQUM7Q0FDZiIsInNvdXJjZXMiOlsid2VicGFjazovL2JhY2tlbmQvLi9jb250cm9sbGVycy90d2VldHMudHM/MTZiNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUd2VldEJvZHksIFR3ZWV0VHlwZSB9IGZyb20gXCJjdXN0b21cIjtcclxuaW1wb3J0IHJhbmRvbUludGVnZXIgZnJvbSBcInJhbmRvbS1pbnRcIjtcclxuaW1wb3J0IHsgZ2V0TWUsIHNhdmVBY3Rpb24gfSBmcm9tIFwiLi91c2VyXCI7XHJcbmltcG9ydCB7IFR3ZWV0cyB9IGZyb20gXCJtb2RlbHMvdHdlZXRzXCI7XHJcbmltcG9ydCB7IFVzZXIgfSBmcm9tIFwibW9kZWxzL3VzZXJcIjtcclxuaW1wb3J0IGlzQWZ0ZXIgZnJvbSBcImRhdGUtZm5zL2lzQWZ0ZXJcIjtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjcmVhdGVUd2VldCh0d2VldEJvZHk6IFR3ZWV0Qm9keSwgdG9rZW4pIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0TWUodG9rZW4uYXV0aElkKTtcclxuICBjb25zdCBpZCA9IHJhbmRvbUludGVnZXIoMTAwMDAsIDk5OTk5KTtcclxuICBjb25zdCBzaGFwZVR3ZWV0ID0ge1xyXG4gICAgdXNlck5hbWU6IHVzZXIuZGF0YS5mdWxsbmFtZSxcclxuICAgIHVzZXJJZDogdXNlci5kYXRhLmdlbmVyYXRlZElkLFxyXG4gICAgcHJvZmlsZVBpY3R1cmU6IHVzZXIuZGF0YS5waWNzLnByb2ZpbGVQaWN0dXJlLFxyXG4gICAgY29udGVudDogdHdlZXRCb2R5LmNvbnRlbnQsXHJcbiAgICBpbWc6IHR3ZWV0Qm9keS5pbWdVUkwgfHwgXCJcIixcclxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKSxcclxuICAgIG1vZGU6IHR3ZWV0Qm9keS50d2VldE1vZGUsXHJcbiAgICBpZDogaWQsXHJcbiAgICBpbmZvOiBbeyBsaWtlczogMCwgcmV0d2VldHM6IDAsIHNhdmVzOiAwLCBjb21tZW50czogMCB9XSxcclxuICAgIGNvbW1lbnRzOiBbe31dLFxyXG4gIH07XHJcbiAgdXNlci5kYXRhLnR3ZWV0cy5wdXNoKHNoYXBlVHdlZXQpO1xyXG4gIHVzZXIuZGF0YS5mZWVkLnB1c2goc2hhcGVUd2VldCk7XHJcbiAgYXdhaXQgdXNlci5wdXNoKCk7XHJcbiAgY29uc3QgdHdlZXQgPSBhd2FpdCBUd2VldHMuY3JlYXRlVHdlZXQoc2hhcGVUd2VldCk7XHJcbiAgdXNlci5kYXRhLmZvbGxvd2Vycy5tYXAoYXN5bmMgKGZvbGxvd2VySWQpID0+IHtcclxuICAgIGNvbnN0IGZvbGxvd2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChmb2xsb3dlcklkKTtcclxuICAgIGF3YWl0IGZvbGxvd2VyLnB1bGwoKTtcclxuICAgIGZvbGxvd2VyLmRhdGEuZmVlZC5wdXNoKHR3ZWV0LmRhdGEpO1xyXG4gICAgYXdhaXQgZm9sbG93ZXIucHVzaCgpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFR3ZWV0QnlJZCh0d2VldElkOiBudW1iZXIpIHtcclxuICBjb25zdCB0d2VldCA9IGF3YWl0IFR3ZWV0cy5maW5kQnlJZCh0d2VldElkKTtcclxuICByZXR1cm4gdHdlZXQ7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVUd2VldEJ5SWQodHdlZXRJZCkge1xyXG4gIGNvbnN0IGlkID0gTnVtYmVyKHR3ZWV0SWQpO1xyXG4gIGNvbnN0IHR3ZWV0ID0gYXdhaXQgVHdlZXRzLmZpbmRCeUlkKGlkKTtcclxuXHJcbiAgY29uc3QgdXNlcklkID0gdHdlZXQuZGF0YS51c2VySWQ7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuXHJcbiAgY29uc3QgcmVzdWx0ID0gdXNlci5kYXRhLnR3ZWV0cy5maW5kKCh0d2VldDogYW55KSA9PiB7XHJcbiAgICBpZiAodHdlZXQuaWQgPT0gaWQpIHtcclxuICAgICAgcmV0dXJuIHR3ZWV0O1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBFbCBpbmRleCBkZXZ1ZWx2ZSBsYSBwb3NpY2nDs24gZGVsIHR3ZWV0IGVuY29udHJhZG8gZW4gZWwgYXJyYXlcclxuICAvLyBQYXJhIGx1ZWdvIHJlbW92ZXJsbyB1c2FuZG8gc3BsaWNlXHJcbiAgY29uc3QgaW5kZXggPSB1c2VyLmRhdGEudHdlZXRzLmluZGV4T2YocmVzdWx0KTtcclxuXHJcbiAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgIC8vIFNwbGljZSB2YSBhIHJlbW92ZXIgZWwgZWxlbWVudG8gcXVlIGNvaW5jaWRhIGNvbiBsYSBwb3NpY2nDs24gZGVsIGluZGV4IHkgdmEgYSByZW1vdmVyIGVzZSBlbGVtZW50b1xyXG4gICAgLy8gZGViaWRvIGFsIDEuKHJlbW92ZXIgMSBlbGVtZW50bylcclxuICAgIHVzZXIuZGF0YS50d2VldHMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gIH1cclxuXHJcbiAgdXNlci5kYXRhLmZvbGxvd2Vycy5tYXAoYXN5bmMgKGYpID0+IHtcclxuICAgIGNvbnN0IGZvbGxvd2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChmKTtcclxuICAgIGZvbGxvd2VyLmRhdGEuZmVlZC5maW5kKCh0OiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmICh0ICE9IHVuZGVmaW5lZCAmJiB0LmlkID09IGlkKSB7XHJcbiAgICAgICAgZm9sbG93ZXIuZGF0YS5mZWVkLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZm9sbG93ZXIuZGF0YS5saWtlcy5maW5kKCh0OiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICAgIGlmICh0ICE9IHVuZGVmaW5lZCAmJiB0LmlkID09IGlkKSB7XHJcbiAgICAgICAgZm9sbG93ZXIuZGF0YS5saWtlcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICBmb2xsb3dlci5kYXRhLnNhdmVzLmZpbmQoKHQ6IGFueSwgaW5kZXgpID0+IHtcclxuICAgICAgaWYgKHQgIT0gdW5kZWZpbmVkICYmIHQuaWQgPT0gaWQpIHtcclxuICAgICAgICBmb2xsb3dlci5kYXRhLnNhdmVzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGF3YWl0IGZvbGxvd2VyLnB1c2goKTtcclxuICB9KTtcclxuXHJcbiAgYXdhaXQgdHdlZXQucmVmLmRlbGV0ZSgpO1xyXG4gIHJldHVybiB7IGRlbGV0ZWQ6IHRydWUgfTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU9uZVR3ZWV0KHR3ZWV0SWQ6IG51bWJlciwgYm9keTogVHdlZXRCb2R5KSB7XHJcbiAgY29uc3QgdHdlZXQgPSBhd2FpdCBUd2VldHMuZmluZEJ5SWQodHdlZXRJZCk7XHJcbiAgY29uc3QgdXNlcklkID0gdHdlZXQuZGF0YS51c2VySWQ7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICBhd2FpdCB1c2VyLnB1bGwoKTtcclxuXHJcbiAgLy8gQWNhIGFjdHVhbGl6YSBlbCB0d2VldCBkZSBsYSBjb2xlY2Npw7NuIFR3ZWV0cy5cclxuICBpZiAoYm9keS5jb250ZW50KSB7XHJcbiAgICB0d2VldC5kYXRhLmNvbnRlbnQgPSBib2R5LmNvbnRlbnQ7XHJcbiAgfVxyXG4gIGlmIChib2R5LmltZykge1xyXG4gICAgdHdlZXQuZGF0YS5pbWcgPSBib2R5LmltZztcclxuICB9XHJcbiAgYXdhaXQgdHdlZXQucHVzaCgpO1xyXG5cclxuICAvLyBBY2EgYWN0dWFsaXphIGVsIHR3ZWV0IGRlbCB1c3VhcmlvIGRlbnRybyBkZSAgbGEgY29sbGVjacOzbiBVc3Vhcmlvcy5cclxuXHJcbiAgdXNlci5kYXRhLnR3ZWV0cy5maW5kKGFzeW5jICh0d2VldDogYW55KSA9PiB7XHJcbiAgICBpZiAodHdlZXQuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICB0d2VldC5jb250ZW50ID0gYm9keS5jb250ZW50IHx8IFwiXCI7XHJcbiAgICAgIHR3ZWV0LmltZyA9IGJvZHkuaW1nIHx8IFwiXCI7XHJcbiAgICAgIHR3ZWV0LnR3ZWV0TW9kZSA9IGJvZHkudHdlZXRNb2RlIHx8IFwiXCI7XHJcbiAgICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBBY2EgQWN0dWFsaXphIGVsIHR3ZWV0IGRlbnRybyBkZWwgZmVlZCBkZSBsb3MgdXN1YXJpb3Mgc2VndWlkb3JlcyBkZWwgdXN1YXJpbyBwYWRyZS5cclxuXHJcbiAgdXNlci5kYXRhLmZvbGxvd2Vycy5tYXAoYXN5bmMgKHVzZXJJZHMpID0+IHtcclxuICAgIGNvbnN0IHVzZXJGb2xsb3dlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkcyk7XHJcbiAgICBhd2FpdCB1c2VyRm9sbG93ZXIucHVsbCgpO1xyXG4gICAgY29uc3QgcmVzdWx0ID0gdXNlckZvbGxvd2VyLmRhdGEuZmVlZC5maW5kKGFzeW5jICh0OiBhbnkpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICAgIHQuY29udGVudCA9IHR3ZWV0LmRhdGEuY29udGVudDtcclxuICAgICAgICB0LmltZyA9IHR3ZWV0LmRhdGEuaW1nO1xyXG4gICAgICAgIHQudHdlZXRNb2RlID0gdHdlZXQuZGF0YS5tb2RlO1xyXG4gICAgICAgIGF3YWl0IHVzZXJGb2xsb3dlci5wdXNoKCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9KTtcclxufVxyXG5cclxuLy8gU3VtYSAxIGFsIGNvbnRhZG9yIGRlIGxhIGFjdGlvbiBjb3JyZXNwb25kaWVudGUgYWwgdHdlZXQgb2J0ZW5pZG8gbWVkaWFudGUgZWwgdHdlZXRJZC5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0d2VldEFjdGlvbkNvdW50ZXJVcGRhdGVyKFxyXG4gIGFjdGlvbjogc3RyaW5nLFxyXG4gIHR3ZWV0SWQ6IG51bWJlcixcclxuICB0b2tlblxyXG4pIHtcclxuICAvLyBBY2Egb2J0aWVuZSBsYXMgcmVmZXJlbmNpYXMgYSBsb3MgdHdlZXRzIGRlIGxhcyBjb2xsZWN0aW9ucyBUd2VldCB5IFVzZXJcclxuICAvLyBwYXJhIGFjdHVhbGl6YXJsZSBsb3MgZGF0b3MgYSBzdXMgcmVzcGVjdGl2b3MgZG9jcyB5IGEgZWwgZmVlZCBkZSBzdXMgZm9sbG93ZXJzLlxyXG5cclxuICBjb25zdCB0d2VldFJlZiA9IGF3YWl0IGdldFR3ZWV0QnlJZCh0d2VldElkKTtcclxuICBjb25zdCB0d2VldE93bmVyUmVmID0gYXdhaXQgVXNlci5maW5kQnlJZCh0d2VldFJlZi5kYXRhLnVzZXJJZCk7XHJcblxyXG4gIGNvbnN0IG93bmVyVHdlZXQ6IGFueSA9IHR3ZWV0T3duZXJSZWYuZGF0YS50d2VldHMuZmluZCgodDogYW55KSA9PiB7XHJcbiAgICBpZiAodC5pZCA9PSB0d2VldElkKSB7XHJcbiAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBjb25zdCB0d2VldEluRm9sbG93ZXJGZWVkQW5kRm9sbG93ZXIgPSBhd2FpdCBQcm9taXNlLmFsbFNldHRsZWQoXHJcbiAgICB0d2VldE93bmVyUmVmLmRhdGEuZm9sbG93ZXJzLm1hcChhc3luYyAoZikgPT4ge1xyXG4gICAgICBjb25zdCBmb2xsb3dlclJlZiA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZik7XHJcbiAgICAgIGNvbnN0IHR3ZWV0ID0gZm9sbG93ZXJSZWY/LmRhdGEuZmVlZC5maW5kKCh0OiBhbnkpID0+IHtcclxuICAgICAgICBpZiAodC5pZCA9PSB0d2VldElkKSB7XHJcbiAgICAgICAgICByZXR1cm4gdDtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gICAgICByZXR1cm4geyB0d2VldCwgZm9sbG93ZXJSZWY6IGZvbGxvd2VyUmVmIH07XHJcbiAgICB9KVxyXG4gICk7XHJcbiAgLy8gIEhlcmUgZGVjb25zdHJ1Y3RzIHRoZSB0d2VldEluRm9sbG93ZXJGZWVkQW5kRm9sbG93ZXIgcmVzcG9uc2UuXHJcbiAgY29uc3QgZm9sbG93ZXJSZWZlcmVuY2UgPSB0d2VldEluRm9sbG93ZXJGZWVkQW5kRm9sbG93ZXJbMF0udmFsdWUuZm9sbG93ZXJSZWY7XHJcbiAgY29uc3QgdHdlZXRJbkZvbGxvd2VyRmVlZCA9IHR3ZWV0SW5Gb2xsb3dlckZlZWRBbmRGb2xsb3dlclswXS52YWx1ZS50d2VldDtcclxuXHJcbiAgLy8gQWNhIGFwbGljYSBsb3MgY2FtYmlvcyBkZW50cm8gZGUgbG9zIG9iamV0b3MgcXVlIGFjYWJhbW9zIGRlIHJlZmVyZW5jaWFyLlxyXG5cclxuICBpZiAoYWN0aW9uID09IFwibGlrZVwiKSB7XHJcbiAgICB0d2VldFJlZi5kYXRhLmluZm9bMF0ubGlrZXMgKz0gMTtcclxuICAgIG93bmVyVHdlZXQuaW5mb1swXS5saWtlcyArPSAxO1xyXG4gICAgdHdlZXRJbkZvbGxvd2VyRmVlZCA/ICh0d2VldEluRm9sbG93ZXJGZWVkLmluZm9bMF0ubGlrZXMgKz0gMSkgOiBcIlwiO1xyXG4gIH0gZWxzZSBpZiAoYWN0aW9uID09IFwicmV0d2VldFwiKSB7XHJcbiAgICB0d2VldFJlZi5kYXRhLmluZm9bMF0ucmV0d2VldHMgKz0gMTtcclxuICAgIG93bmVyVHdlZXQuaW5mb1swXS5yZXR3ZWV0cyArPSAxO1xyXG4gICAgdHdlZXRJbkZvbGxvd2VyRmVlZCA/ICh0d2VldEluRm9sbG93ZXJGZWVkLmluZm9bMF0ucmV0d2VldHMgKz0gMSkgOiBcIlwiO1xyXG4gIH0gZWxzZSBpZiAoYWN0aW9uID09IFwic2F2ZVwiKSB7XHJcbiAgICB0d2VldFJlZi5kYXRhLmluZm9bMF0uc2F2ZXMgKz0gMTtcclxuICAgIG93bmVyVHdlZXQuaW5mb1swXS5zYXZlcyArPSAxO1xyXG4gICAgdHdlZXRJbkZvbGxvd2VyRmVlZCA/ICh0d2VldEluRm9sbG93ZXJGZWVkLmluZm9bMF0uc2F2ZXMgKz0gMSkgOiBcIlwiO1xyXG4gIH0gZWxzZSB7XHJcbiAgICB0d2VldFJlZi5kYXRhLmluZm9bMF0uY29tbWVudHMgKz0gMTtcclxuICAgIG93bmVyVHdlZXQuaW5mb1swXS5jb21tZW50cyArPSAxO1xyXG4gICAgdHdlZXRJbkZvbGxvd2VyRmVlZCA/ICh0d2VldEluRm9sbG93ZXJGZWVkLmluZm9bMF0uY29tbWVudHMgKz0gMSkgOiBcIlwiO1xyXG4gIH1cclxuXHJcbiAgLy8gQWNhIHB1c2hlYSBsb3MgZGF0b3MgY2FtYmlhZG9zIHByZXZpYW1lbnRlIHBhcmEgYWN0dWFsaXphciBsYSBpbmZvcm1hY2nDs24gZGUgbGEgcmVmZXJlbmNpYS5cclxuXHJcbiAgYXdhaXQgdHdlZXRSZWYucHVzaCgpO1xyXG4gIGF3YWl0IHR3ZWV0T3duZXJSZWYucHVzaCgpO1xyXG4gIGF3YWl0IHNhdmVBY3Rpb24oYWN0aW9uLCB0d2VldFJlZiwgdG9rZW4pO1xyXG4gIGlmIChmb2xsb3dlclJlZmVyZW5jZSAhPSB1bmRlZmluZWQpIHtcclxuICAgIGF3YWl0IGZvbGxvd2VyUmVmZXJlbmNlLnB1c2goKTtcclxuICB9XHJcbiAgcmV0dXJuIHR3ZWV0UmVmLmRhdGEuaW5mbztcclxufVxyXG5cclxuLy8gUmVtdWV2ZSBsYSB0d2VldCBhY3Rpb24gZGVudHJvIGRlIGxvcyB0d2VldHMgZGVsIHR3ZWV0IG93bmVyICAsIGRlbCB0d2VldCBvd2VuZXIgZm9sbG93ZXJzIGZlZWRcclxuLy8geSBkZSBsYSBjb2xsZWN0aW9uIFR3ZWV0cy5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0d2VldEFjdGlvblN0YXR1c1JlbW92ZXIoXHJcbiAgYWN0aW9uOiBzdHJpbmcsXHJcbiAgdHdlZXRJZDogbnVtYmVyXHJcbikge1xyXG4gIC8vIEFjYSBjcmVhIGxhcyByZWZlcmVuY2lhcyBhIGVsIHR3ZWV0IG93bmVyLHR3ZWV0IGVuIFR3ZWV0IGNvbGxlY3Rpb24geVxyXG4gIC8vIHR3ZWV0IG93bmVyIGZvbGxvd2VycyBmZWVkIHR3ZWV0LlxyXG5cclxuICBjb25zdCB0d2VldCA9IGF3YWl0IGdldFR3ZWV0QnlJZCh0d2VldElkKTtcclxuXHJcbiAgY29uc3QgdHdlZXRPd25lclJlZiA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodHdlZXQuZGF0YS51c2VySWQpO1xyXG4gIGNvbnN0IHR3ZWV0SW5Pd25lcjogYW55ID0gdHdlZXRPd25lclJlZi5kYXRhLnR3ZWV0cy5maW5kKCh0d2VldDogYW55KSA9PiB7XHJcbiAgICBpZiAodHdlZXQuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICByZXR1cm4gdHdlZXQ7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IG93bmVyRm9sbG93ZXJzID0gdHdlZXRPd25lclJlZi5kYXRhLmZvbGxvd2VycztcclxuICBjb25zdCBmb2xsb3dlckFuZEZlZWQgPSBhd2FpdCBQcm9taXNlLmFsbChcclxuICAgIG93bmVyRm9sbG93ZXJzLm1hcChhc3luYyAoZm9sbG93ZXIpID0+IHtcclxuICAgICAgY29uc3QgZm9sbG93ZXJDb3B5ID0gYXdhaXQgVXNlci5maW5kQnlJZChmb2xsb3dlcik7XHJcbiAgICAgIGF3YWl0IGZvbGxvd2VyQ29weS5wdWxsKCk7XHJcbiAgICAgIGNvbnN0IHR3ZWV0RnJvbUZvbGxvd2VyRmVlZCA9IGZvbGxvd2VyQ29weS5kYXRhLmZlZWQuZmluZChcclxuICAgICAgICAodHdlZXRzOiBhbnkpID0+IHtcclxuICAgICAgICAgIGlmICh0d2VldHMuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHdlZXRzO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgKTtcclxuICAgICAgcmV0dXJuIHsgZm9sbG93ZXJDb3B5LCB0d2VldEZyb21Gb2xsb3dlckZlZWQgfTtcclxuICAgIH0pXHJcbiAgKTtcclxuICBjb25zdCBmb2xsb3dlciA9IGZvbGxvd2VyQW5kRmVlZFswXS5mb2xsb3dlckNvcHk7XHJcbiAgY29uc3QgdHdlZXRGcm9tRmVlZCA9IGZvbGxvd2VyQW5kRmVlZFswXS50d2VldEZyb21Gb2xsb3dlckZlZWQ7XHJcblxyXG4gIC8vIEFjYSBhcGxpY2EgbG9zIGNhbWJpb3MgZGVudHJvIGRlIGxhIHJlZmVyZW5jaWEuXHJcblxyXG4gIGlmIChhY3Rpb24gPT0gXCJsaWtlXCIpIHtcclxuICAgIHR3ZWV0LmRhdGEuaW5mb1swXS5saWtlcyAtPSAxO1xyXG4gICAgdHdlZXRGcm9tRmVlZC5pbmZvWzBdLmxpa2VzIC09IDE7XHJcbiAgICB0d2VldEluT3duZXIuaW5mb1swXS5saWtlcyAtPSAxO1xyXG4gIH0gZWxzZSBpZiAoYWN0aW9uID09IFwicmV0d2VldFwiKSB7XHJcbiAgICB0d2VldC5kYXRhLmluZm9bMF0ucmV0d2VldHMgLT0gMTtcclxuICAgIHR3ZWV0RnJvbUZlZWQuaW5mb1swXS5yZXR3ZWV0cyAtPSAxO1xyXG4gICAgdHdlZXRJbk93bmVyLmluZm9bMF0ucmV0d2VldHMgLT0gMTtcclxuICB9IGVsc2UgaWYgKGFjdGlvbiA9PSBcInNhdmVcIikge1xyXG4gICAgdHdlZXQuZGF0YS5pbmZvWzBdLnNhdmVzIC09IDE7XHJcbiAgICB0d2VldEZyb21GZWVkLmluZm9bMF0uc2F2ZXMgLT0gMTtcclxuICAgIHR3ZWV0SW5Pd25lci5pbmZvWzBdLnNhdmVzIC09IDE7XHJcbiAgfSBlbHNlIHtcclxuICAgIHR3ZWV0LmRhdGEuaW5mb1swXS5jb21tZW50cyAtPSAxO1xyXG4gICAgdHdlZXRGcm9tRmVlZC5pbmZvWzBdLmNvbW1lbnRzIC09IDE7XHJcbiAgICB0d2VldEluT3duZXIuaW5mb1swXS5zYXZlcyAtPSAxO1xyXG4gIH1cclxuXHJcbiAgLy8gQWNhIHB1c2hlYSBsb3MgZGF0b3MgcHJldmlhbWVudGUgYWN0dWFsaXphZG9zLlxyXG4gIGF3YWl0IHR3ZWV0LnB1c2goKTtcclxuICBhd2FpdCBmb2xsb3dlci5wdXNoKCk7XHJcbiAgYXdhaXQgdHdlZXRPd25lclJlZi5wdXNoKCk7XHJcbiAgcmV0dXJuIHR3ZWV0LmRhdGEuaW5mb1swXTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZENvbW1lbnQoYm9keSwgeyBhdXRoSWQgfSkge1xyXG4gIC8vIEFjYSBvYnRlbmdvIGxhIHJlZmVyZW5jaWEgYWwgdXN1YXJpbyBxdWUgaGFjZSBlbCByZXF1ZXN0IHBhcmEgbHVlZ28gYcOxYWRpciBzdSBpZFxyXG4gIC8vIGVuIGxhIGNyZWFjacOzbiBkZWwgY29tZW50YXJpbyB5IGFncmVnYXIgZWwgY29tZW50YXJpbyBhIHN1cyByZXBsaWVzLlxyXG5cclxuICBjb25zdCBtZSA9IGF3YWl0IGdldE1lKGF1dGhJZCk7XHJcblxyXG4gIGxldCByYW5kb21JZCA9IHJhbmRvbUludGVnZXIoOTk5OSwgMTAwMDAwKTtcclxuICBjb25zdCBuZXdDb21tZW50ID0ge1xyXG4gICAgY29tbWVudDogYm9keS5uZXdDb21tZW50LmNvbW1lbnQsXHJcbiAgICB1c2VySWQ6IGJvZHkubmV3Q29tbWVudC51c2VySWQsXHJcbiAgICBpYTogbmV3IERhdGUoKSxcclxuICAgIGlkOiByYW5kb21JZCxcclxuICAgIGxpa2VzOiAwLFxyXG4gICAgdHdlZXRJZDogYm9keS5uZXdDb21tZW50LnR3ZWV0SWQsXHJcbiAgICBieTogYm9keS5uZXdDb21tZW50LmJ5LFxyXG4gICAgcGljczogeyBwcm9maWxlUGljdHVyZTogYm9keS5uZXdDb21tZW50LnBpY3MucHJvZmlsZVBpY3R1cmUgfSxcclxuICB9O1xyXG5cclxuICAvLyBBY2Egb2J0aWVuZSBsYSByZWZlcmVuY2lhIGRlbCAgdHdlZXQgZW4gbGEgY29sbGVjdGlvbiBUd2VldCB5IGFsIHVzdWFyaW8gZHVlw7FvIGRlbCB0d2VldC5cclxuXHJcbiAgY29uc3QgdHdlZXQgPSBhd2FpdCBUd2VldHMuZmluZEJ5SWQoYm9keS5uZXdDb21tZW50LnR3ZWV0SWQpO1xyXG5cclxuICBjb25zdCB0d2VldE93bmVySWQgPSB0d2VldC5kYXRhLnVzZXJJZDtcclxuXHJcbiAgY29uc3QgdHdlZXRPd25lciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodHdlZXRPd25lcklkKTtcclxuXHJcbiAgLy8gT2J0aWVuZSBlbCB0d2VldCBkZW50cm8gZGVsIHR3ZWV0IG93bmVyIHkgbGUgcHVzaGVhIGVsIG51ZXZvIGNvbWVudGFyaW8uXHJcblxyXG4gIHR3ZWV0T3duZXIuZGF0YS50d2VldHMuZmluZCgodDogVHdlZXRUeXBlKSA9PiB7XHJcbiAgICBpZiAodC5pZCA9PSBib2R5Lm5ld0NvbW1lbnQudHdlZXRJZCkge1xyXG4gICAgICB0LmluZm9bMF0uY29tbWVudHMgKz0gMTtcclxuICAgICAgdC5jb21tZW50cy5wdXNoKG5ld0NvbW1lbnQpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBPYnRpZW5lIGxvcyBmb2xsb3dlcnMgZGVsIG93bmVyIHkgbGVzIGFncmVnYSBlbCBjb21lbnRhcmlvIGEgZWwgdHdlZXQgZGVudHJvIGRlIGVsIGZlZWQsIGxpa2VzIHkgc2F2ZXMuXHJcblxyXG4gIHR3ZWV0T3duZXIuZGF0YS5mb2xsb3dlcnMubWFwKGFzeW5jIChmKSA9PiB7XHJcbiAgICBjb25zdCB1c2VyRm9sbG93ZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKGYpO1xyXG4gICAgdXNlckZvbGxvd2VyLmRhdGEuZmVlZC5maW5kKCh0OiBUd2VldFR5cGUpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gYm9keS5uZXdDb21tZW50LnR3ZWV0SWQpIHtcclxuICAgICAgICB0LmluZm9bMF0uY29tbWVudHMgKz0gMTtcclxuICAgICAgICB0LmNvbW1lbnRzLnB1c2gobmV3Q29tbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgdXNlckZvbGxvd2VyLmRhdGEubGlrZXMuZmluZCgodDogVHdlZXRUeXBlKSA9PiB7XHJcbiAgICAgIGlmICh0LmlkID09IGJvZHkubmV3Q29tbWVudC50d2VldElkKSB7XHJcbiAgICAgICAgdC5pbmZvWzBdLmNvbW1lbnRzICs9IDE7XHJcbiAgICAgICAgdC5jb21tZW50cy5wdXNoKG5ld0NvbW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHVzZXJGb2xsb3dlci5kYXRhLnNhdmVzLmZpbmQoKHQ6IFR3ZWV0VHlwZSkgPT4ge1xyXG4gICAgICBpZiAodC5pZCA9PSBib2R5Lm5ld0NvbW1lbnQudHdlZXRJZCkge1xyXG4gICAgICAgIHQuaW5mb1swXS5jb21tZW50cyArPSAxO1xyXG4gICAgICAgIHQuY29tbWVudHMucHVzaChuZXdDb21tZW50KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBhd2FpdCB1c2VyRm9sbG93ZXIucHVzaCgpO1xyXG4gIH0pO1xyXG4gIG1lLmRhdGEucmVwbGllcy5wdXNoKG5ld0NvbW1lbnQpO1xyXG4gIHR3ZWV0LmRhdGEuY29tbWVudHMucHVzaChuZXdDb21tZW50KTtcclxuXHJcbiAgLy8gV2l0aG91dCB0aGUgSUYgc3RhdGVtZW50IGl0IGRlbGV0ZWQgZXZlcnkgcmVwbHkgdG8gbXkgb3duIHR3ZWV0cyBhZnRlciBiZWluZyBzZXQgaW4gdGhlXHJcbiAgLy8gZGF0YWJhc2UgLCBJIHRoaW5rIHRoYXQgd2FzIGJlY2F1c2Ugb2YgdGhlIFwicmUtcmVuZGVyaW5nXCIgb2YgdGhlIGRvY3VtZW50LCBvbmUgb2YgdGhlIHJlLXJlbmRlcnNcclxuICAvLyAgbGVmdCB0aGUgZG9jdW1lbnQgdGhlIHdheSBpdCB3YXMgYmVmb3JlIG9mIHB1c2hpbmcgdGhlIG5ldyByZXBseS5cclxuXHJcbiAgaWYgKG1lLmRhdGEuZ2VuZXJhdGVkSWQgPT0gdHdlZXRPd25lci5kYXRhLmdlbmVyYXRlZElkKSB7XHJcbiAgICB0d2VldE93bmVyLmRhdGEuZmVlZC5maW5kKCh0OiBhbnkpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gYm9keS5uZXdDb21tZW50LnR3ZWV0SWQpIHtcclxuICAgICAgICB0LmluZm9bMF0uY29tbWVudHMgKz0gMTtcclxuICAgICAgICB0LmNvbW1lbnRzLnB1c2gobmV3Q29tbWVudCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgYXdhaXQgdHdlZXRPd25lci5wdXNoKCk7XHJcbiAgICBhd2FpdCB0d2VldC5wdXNoKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9IGVsc2Uge1xyXG4gICAgYXdhaXQgdHdlZXQucHVzaCgpO1xyXG4gICAgYXdhaXQgbWUucHVzaCgpO1xyXG4gICAgYXdhaXQgdHdlZXRPd25lci5wdXNoKCk7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEFkZCBsaWtlcyB0byByZXBsaWVzLlxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbGlrZUNvbW1lbnQoXHJcbiAgdHdlZXRJZDogbnVtYmVyLFxyXG4gIHJlcGx5SWQ6IG51bWJlcixcclxuICB7IGF1dGhJZCB9XHJcbikge1xyXG4gIGNvbnN0IHR3ZWV0UmVmID0gYXdhaXQgVHdlZXRzLmZpbmRCeUlkKHR3ZWV0SWQpO1xyXG4gIGNvbnN0IHVzZXJJZCA9IHR3ZWV0UmVmLmRhdGEudXNlcklkO1xyXG4gIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmZpbmRCeUlkKHVzZXJJZCk7XHJcbiAgY29uc3QgbWUgPSBhd2FpdCBnZXRNZShhdXRoSWQpO1xyXG5cclxuICAvLyBBZGRzICAxIGxpa2UgdG8gdGhlIGNvbW1lbnQgIGluc2lkZSBvZiAgdHdlZXQgaW4gVHdlZXQgY29sbGVjdGlvbi5cclxuICB0d2VldFJlZi5kYXRhLmNvbW1lbnRzLmZpbmQoKGM6IGFueSkgPT4ge1xyXG4gICAgaWYgKGMuaWQgPT0gcmVwbHlJZCkge1xyXG4gICAgICBjLmxpa2VzICs9IDE7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIEhlcmUgaXQgYWRkcyAgYSAgbGlrZSB0byB0aGUgcmVwbHkgIGluc2lkZSAgdGhlICB0d2VldCBmcm9tIHRoZSB0d2VldCBvd25lciBpbiBjb2xsZWN0aW9uIFVzZXIuXHJcbiAgdXNlci5kYXRhLnR3ZWV0cy5maW5kKCh0OiBUd2VldFR5cGUpID0+IHtcclxuICAgIGlmICh0LmlkID09IHR3ZWV0SWQpIHtcclxuICAgICAgdC5jb21tZW50cy5maW5kKChjOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoYy5pZCA9PSByZXBseUlkKSB7XHJcbiAgICAgICAgICBjLmxpa2VzICs9IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gQWRkcyBhICBsaWtlIHRvIHRoZSByZXBseSAgaW5zaWRlIHRoZSAgZmVlZCB0aGUgbGlrZXMgYW5kIHNhdmVzIG9mIHRoZSBmb2xsb3dlcnMuXHJcbiAgdXNlci5kYXRhLmZvbGxvd2Vycy5tYXAoYXN5bmMgKGYpID0+IHtcclxuICAgIGNvbnN0IGZvbGxvd2VyID0gYXdhaXQgVXNlci5maW5kQnlJZChmKTtcclxuICAgIGZvbGxvd2VyLmRhdGEuc2F2ZXMuZmluZCgodDogVHdlZXRUeXBlKSA9PiB7XHJcbiAgICAgIGlmICh0LmlkID09IHR3ZWV0SWQpIHtcclxuICAgICAgICB0LmNvbW1lbnRzLm1hcChhc3luYyAoYzogYW55KSA9PiB7XHJcbiAgICAgICAgICBpZiAoYy5pZCA9PSByZXBseUlkKSB7XHJcbiAgICAgICAgICAgIGMubGlrZXMgKz0gMTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICBmb2xsb3dlci5kYXRhLmxpa2VzLmZpbmQoKHQ6IFR3ZWV0VHlwZSkgPT4ge1xyXG4gICAgICBpZiAodC5pZCA9PSB0d2VldElkKSB7XHJcbiAgICAgICAgdC5jb21tZW50cy5tYXAoYXN5bmMgKGM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGMuaWQgPT0gcmVwbHlJZCkge1xyXG4gICAgICAgICAgICBjLmxpa2VzICs9IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZm9sbG93ZXIuZGF0YS5mZWVkLmZpbmQoKHQ6IFR3ZWV0VHlwZSkgPT4ge1xyXG4gICAgICBpZiAodC5pZCA9PSB0d2VldElkKSB7XHJcbiAgICAgICAgdC5jb21tZW50cy5tYXAoYXN5bmMgKGM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGMuaWQgPT0gcmVwbHlJZCkge1xyXG4gICAgICAgICAgICBjLmxpa2VzICs9IDE7XHJcbiAgICAgICAgICAgIGF3YWl0IGZvbGxvd2VyLnB1c2goKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIC8vIEFkZHMgYSBsaWtlIHRvIHRoZSByZXBseSBpbnNpZGUgb2YgdGhlIHVzZXIgbGlrZXIgcmVwbHkncy5cclxuICBtZS5kYXRhLnJlcGxpZXMuZmluZCgoYzogYW55KSA9PiB7XHJcbiAgICBpZiAoYy5pZCA9PSByZXBseUlkKSB7XHJcbiAgICAgIGMubGlrZXMgKz0gMTtcclxuICAgIH1cclxuICB9KTtcclxuICBhd2FpdCB0d2VldFJlZi5wdXNoKCk7XHJcbiAgaWYgKHVzZXIuZGF0YS5nZW5lcmF0ZWRJZCA9PSBtZS5kYXRhLmdlbmVyYXRlZElkKSB7XHJcbiAgICBhd2FpdCBtZS5wdXNoKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGF3YWl0IG1lLnB1c2goKTtcclxuICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuLy8gRGlzbGlrZSBjb21tZW50LlxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc2xpa2VDb21tZW50KFxyXG4gIHR3ZWV0SWQ6IG51bWJlcixcclxuICByZXBseUlkOiBudW1iZXIsXHJcbiAgeyBhdXRoSWQgfVxyXG4pIHtcclxuICBjb25zdCB0d2VldFJlZiA9IGF3YWl0IFR3ZWV0cy5maW5kQnlJZCh0d2VldElkKTtcclxuICBjb25zdCB1c2VySWQgPSB0d2VldFJlZi5kYXRhLnVzZXJJZDtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xyXG4gIGNvbnN0IG1lID0gYXdhaXQgZ2V0TWUoYXV0aElkKTtcclxuXHJcbiAgLy8gUmVtb3ZlcyAgMSBsaWtlIHRvIHRoZSB0d2VldCBpbnNpZGUgb2YgIFR3ZWV0IGNvbGxlY3Rpb24uXHJcbiAgdHdlZXRSZWYuZGF0YS5jb21tZW50cy5maW5kKChjOiBhbnkpID0+IHtcclxuICAgIGlmIChjLmlkID09IHJlcGx5SWQpIHtcclxuICAgICAgYy5saWtlcyAtPSAxO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBIZXJlIGl0IHJlbW92ZXMgIGEgIGxpa2UgdG8gdGhlIHJlcGx5ICBpbnNpZGUgIHRoZSAgdHdlZXQgZnJvbSB0aGUgdHdlZXQgb3dlbmVyIGluIGNvbGxlY3Rpb24gVXNlci5cclxuXHJcbiAgdXNlci5kYXRhLnR3ZWV0cy5maW5kKCh0OiBUd2VldFR5cGUpID0+IHtcclxuICAgIGlmICh0LmlkID09IHR3ZWV0SWQpIHtcclxuICAgICAgdC5jb21tZW50cy5maW5kKChjOiBhbnkpID0+IHtcclxuICAgICAgICBpZiAoYy5pZCA9PSByZXBseUlkKSB7XHJcbiAgICAgICAgICBjLmxpa2VzIC09IDE7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gUmVtb3ZlcyBhICBsaWtlIHRvIHRoZSByZXBseSAgaW5zaWRlIHRoZSAgZmVlZCBvZiB0aGUgZm9sbG93ZXJzLlxyXG4gIC8vIFJlbW92ZXMgYSAgbGlrZSB0byB0aGUgcmVwbHkgIGluc2lkZSB0aGUgIGxpa2VkIHR3ZWV0cyBvZiB0aGUgZm9sbG93ZXJzLlxyXG4gIC8vIFJlbW92ZXMgYSAgbGlrZSB0byB0aGUgcmVwbHkgIGluc2lkZSB0aGUgIHNhdmVkIHR3ZWV0cyBvZiB0aGUgZm9sbG93ZXJzLlxyXG4gIHVzZXIuZGF0YS5mb2xsb3dlcnMubWFwKGFzeW5jIChmKSA9PiB7XHJcbiAgICBjb25zdCBmb2xsb3dlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZik7XHJcbiAgICBmb2xsb3dlci5kYXRhLmxpa2VzLmZpbmQoKHQ6IFR3ZWV0VHlwZSkgPT4ge1xyXG4gICAgICBpZiAodC5pZCA9PSB0d2VldElkKSB7XHJcbiAgICAgICAgdC5jb21tZW50cy5tYXAoYXN5bmMgKGM6IGFueSkgPT4ge1xyXG4gICAgICAgICAgaWYgKGMuaWQgPT0gcmVwbHlJZCkge1xyXG4gICAgICAgICAgICBjLmxpa2VzIC09IDE7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgZm9sbG93ZXIuZGF0YS5zYXZlcy5maW5kKCh0OiBUd2VldFR5cGUpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICAgIHQuY29tbWVudHMubWFwKGFzeW5jIChjOiBhbnkpID0+IHtcclxuICAgICAgICAgIGlmIChjLmlkID09IHJlcGx5SWQpIHtcclxuICAgICAgICAgICAgYy5saWtlcyAtPSAxO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIGZvbGxvd2VyLmRhdGEuZmVlZC5maW5kKCh0OiBUd2VldFR5cGUpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gdHdlZXRJZCkge1xyXG4gICAgICAgIHQuY29tbWVudHMubWFwKGFzeW5jIChjOiBhbnkpID0+IHtcclxuICAgICAgICAgIGlmIChjLmlkID09IHJlcGx5SWQpIHtcclxuICAgICAgICAgICAgYy5saWtlcyAtPSAxO1xyXG4gICAgICAgICAgICBhd2FpdCBmb2xsb3dlci5wdXNoKCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICAvLyBSZW1vdmVzIDEgbGlrZSBhIGVsIGNvbWVudGFyaW8gZGVudHJvIGRlbCBhcGFydGFkbyBcInJlcGxpZXNcIiBkZSBsYSBjb2xsZWN0aW9uIFVzZXIuXHJcblxyXG4gIG1lLmRhdGEucmVwbGllcy5maW5kKGFzeW5jIChjOiBhbnkpID0+IHtcclxuICAgIGlmIChjLmlkID09IHJlcGx5SWQpIHtcclxuICAgICAgYy5saWtlcyAtPSAxO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICBhd2FpdCB0d2VldFJlZi5wdXNoKCk7XHJcbiAgaWYgKHVzZXIuZGF0YS5nZW5lcmF0ZWRJZCA9PSBtZS5kYXRhLmdlbmVyYXRlZElkKSB7XHJcbiAgICBhd2FpdCBtZS5wdXNoKCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGF3YWl0IG1lLnB1c2goKTtcclxuICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gIH1cclxuICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldExhdGVzdFR3ZWV0cygpIHtcclxuICBjb25zdCBhbGxUd2VldHMgPSBhd2FpdCBUd2VldHMuZ2V0QWxsKCk7XHJcbiAgY29uc3QgbXV0YXRlRGF0ZSA9IGFsbFR3ZWV0cy5tYXAoKHR3ZWV0KSA9PiB7XHJcbiAgICBjb25zdCBzYXZlZERhdGUgPSB0d2VldC5jcmVhdGVkQXQ7XHJcbiAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoXHJcbiAgICAgIHNhdmVkRGF0ZS5fc2Vjb25kcyAqIDEwMDAgKyBzYXZlZERhdGUuX25hbm9zZWNvbmRzIC8gMTAwMDAwMFxyXG4gICAgKTtcclxuICAgIHR3ZWV0LmNyZWF0ZWRBdCA9IGRhdGU7XHJcbiAgICByZXR1cm4gdHdlZXQ7XHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IHNvcnRlZEJ5RGF0ZSA9IFtdO1xyXG4gIG11dGF0ZURhdGUuZmlsdGVyKCh0LCBpKSA9PiB7XHJcbiAgICBpZiAoIWlzQWZ0ZXIodC5jcmVhdGVkQXQsIG11dGF0ZURhdGVbaSsrXS5jcmVhdGVkQXQpKSB7XHJcbiAgICAgIHNvcnRlZEJ5RGF0ZS5wdXNoKHQpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiBzb3J0ZWRCeURhdGU7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUd2VldHNXaXRoTWVkaWEoKSB7XHJcbiAgY29uc3QgYWxsVHdlZXRzID0gYXdhaXQgVHdlZXRzLmdldEFsbCgpO1xyXG4gIGNvbnN0IHJlc3VsdCA9IGFsbFR3ZWV0cy5maWx0ZXIoKHQpID0+IHtcclxuICAgIGlmICh0LmltZyAhPSBcIlwiKSB7XHJcbiAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIHJldHVybiByZXN1bHQ7XHJcbn1cclxuIl0sIm5hbWVzIjpbInJhbmRvbUludGVnZXIiLCJnZXRNZSIsInNhdmVBY3Rpb24iLCJUd2VldHMiLCJVc2VyIiwiaXNBZnRlciIsImNyZWF0ZVR3ZWV0IiwidHdlZXRCb2R5IiwidG9rZW4iLCJ1c2VyIiwiYXV0aElkIiwiaWQiLCJzaGFwZVR3ZWV0IiwidXNlck5hbWUiLCJkYXRhIiwiZnVsbG5hbWUiLCJ1c2VySWQiLCJnZW5lcmF0ZWRJZCIsInByb2ZpbGVQaWN0dXJlIiwicGljcyIsImNvbnRlbnQiLCJpbWciLCJpbWdVUkwiLCJjcmVhdGVkQXQiLCJEYXRlIiwibW9kZSIsInR3ZWV0TW9kZSIsImluZm8iLCJsaWtlcyIsInJldHdlZXRzIiwic2F2ZXMiLCJjb21tZW50cyIsInR3ZWV0cyIsInB1c2giLCJmZWVkIiwidHdlZXQiLCJmb2xsb3dlcnMiLCJtYXAiLCJmb2xsb3dlcklkIiwiZm9sbG93ZXIiLCJmaW5kQnlJZCIsInB1bGwiLCJnZXRUd2VldEJ5SWQiLCJ0d2VldElkIiwiZGVsZXRlVHdlZXRCeUlkIiwiTnVtYmVyIiwicmVzdWx0IiwiZmluZCIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImYiLCJ0IiwidW5kZWZpbmVkIiwicmVmIiwiZGVsZXRlIiwiZGVsZXRlZCIsInVwZGF0ZU9uZVR3ZWV0IiwiYm9keSIsInVzZXJJZHMiLCJ1c2VyRm9sbG93ZXIiLCJ0d2VldEFjdGlvbkNvdW50ZXJVcGRhdGVyIiwiYWN0aW9uIiwidHdlZXRSZWYiLCJ0d2VldE93bmVyUmVmIiwib3duZXJUd2VldCIsInR3ZWV0SW5Gb2xsb3dlckZlZWRBbmRGb2xsb3dlciIsIlByb21pc2UiLCJhbGxTZXR0bGVkIiwiZm9sbG93ZXJSZWYiLCJmb2xsb3dlclJlZmVyZW5jZSIsInZhbHVlIiwidHdlZXRJbkZvbGxvd2VyRmVlZCIsInR3ZWV0QWN0aW9uU3RhdHVzUmVtb3ZlciIsInR3ZWV0SW5Pd25lciIsIm93bmVyRm9sbG93ZXJzIiwiZm9sbG93ZXJBbmRGZWVkIiwiYWxsIiwiZm9sbG93ZXJDb3B5IiwidHdlZXRGcm9tRm9sbG93ZXJGZWVkIiwidHdlZXRGcm9tRmVlZCIsImFkZENvbW1lbnQiLCJtZSIsInJhbmRvbUlkIiwibmV3Q29tbWVudCIsImNvbW1lbnQiLCJpYSIsImJ5IiwidHdlZXRPd25lcklkIiwidHdlZXRPd25lciIsInJlcGxpZXMiLCJsaWtlQ29tbWVudCIsInJlcGx5SWQiLCJjIiwiZGlzbGlrZUNvbW1lbnQiLCJnZXRMYXRlc3RUd2VldHMiLCJhbGxUd2VldHMiLCJnZXRBbGwiLCJtdXRhdGVEYXRlIiwic2F2ZWREYXRlIiwiZGF0ZSIsIl9zZWNvbmRzIiwiX25hbm9zZWNvbmRzIiwic29ydGVkQnlEYXRlIiwiZmlsdGVyIiwiaSIsImdldFR3ZWV0c1dpdGhNZWRpYSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./controllers/tweets.ts\n");

/***/ }),

/***/ "(api)/./controllers/user.ts":
/*!*****************************!*\
  !*** ./controllers/user.ts ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"addFollower\": () => (/* binding */ addFollower),\n/* harmony export */   \"get10RandomsUsers\": () => (/* binding */ get10RandomsUsers),\n/* harmony export */   \"getAllTweetsFromUser\": () => (/* binding */ getAllTweetsFromUser),\n/* harmony export */   \"getAllUsers\": () => (/* binding */ getAllUsers),\n/* harmony export */   \"getMe\": () => (/* binding */ getMe),\n/* harmony export */   \"getMostFollowedUsers\": () => (/* binding */ getMostFollowedUsers),\n/* harmony export */   \"getOthersProfile\": () => (/* binding */ getOthersProfile),\n/* harmony export */   \"getUserFeed\": () => (/* binding */ getUserFeed),\n/* harmony export */   \"getWhoToFollow\": () => (/* binding */ getWhoToFollow),\n/* harmony export */   \"handleUnfollow\": () => (/* binding */ handleUnfollow),\n/* harmony export */   \"saveAction\": () => (/* binding */ saveAction),\n/* harmony export */   \"updateUserProfile\": () => (/* binding */ updateUserProfile)\n/* harmony export */ });\n/* harmony import */ var models_user__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! models/user */ \"(api)/./models/user.ts\");\n/* harmony import */ var models_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! models/auth */ \"(api)/./models/auth.ts\");\n\n\n// If this layer  get to long I may separate it into smaller blocks.\nasync function getMe(token) {\n    const auth = new models_auth__WEBPACK_IMPORTED_MODULE_1__.Auth(token);\n    await auth.pull();\n    const userId = auth.data.userId;\n    const user = new models_user__WEBPACK_IMPORTED_MODULE_0__.User(userId);\n    await user.pull();\n    return user;\n}\nasync function updateUserProfile(updateBody, token) {\n    const user = await getMe(token.authId);\n    if (updateBody.newBody.email) {\n        user.data.email = updateBody.newBody.email;\n    }\n    if (updateBody.newBody.fullname) {\n        user.data.fullname = updateBody.newBody.fullname;\n    }\n    if (updateBody.newBody.description) {\n        user.data.description = updateBody.newBody.description;\n    }\n    if (updateBody.newBody.pics.coverPicture) {\n        user.data.pics.coverPicture = updateBody.newBody.pics.coverPicture;\n    }\n    if (updateBody.newBody.pics.profilePicture) {\n        user.data.pics.profilePicture = updateBody.newBody.pics.profilePicture;\n    }\n    const updated = await user.push();\n    return updated;\n}\n// Adds following to user making the request and a follower to followed user.\nasync function addFollower(followedId, authId) {\n    // First , it gets the user following reference by the authId,then the followed user reference\n    // by followedId param obtained using the url in the frontend,\n    // to access their following and followers properties.\n    const me = await getMe(authId);\n    me.data.following.push(Number(followedId));\n    await me.push();\n    const userFollowed = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(followedId);\n    userFollowed.data.followers.push(Number(me.data.generatedId));\n    await userFollowed.push();\n    return true;\n}\n// Decreases your following count and the unfollowed's followers count\n// Also deletes the unfollowed's tweets from your feed.\nasync function handleUnfollow(unfollowedId, authId) {\n    // Here removes tweets from feed.\n    const me = await getMe(authId);\n    me.data.feed.map(async (tweet, index)=>{\n        if (tweet.userId == unfollowedId) {\n            me.data.feed.splice(index, 1);\n        }\n        await me.push();\n    });\n    // Here  removes the unfollowed user from our following list.\n    const unfollowedIndex = me.data.following.find((ids)=>ids == unfollowedId);\n    const indexOfUserResult = me.data.following.indexOf(unfollowedIndex);\n    if (indexOfUserResult > -1) {\n        me.data.following.splice(indexOfUserResult, 1);\n        await me.push();\n    }\n    // Here removes us from unfollowed's  followers list.\n    const unfollowedUser = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(unfollowedId);\n    await unfollowedUser.pull();\n    const unfollowedUserResult = unfollowedUser.data.followers.find((ids)=>ids == me.data.generatedId);\n    const indexOfMeInUnfollowedFollowers = unfollowedUser.data.followers.indexOf(unfollowedUserResult);\n    if (indexOfMeInUnfollowedFollowers > -1) {\n        unfollowedUser.data.followers.splice(indexOfMeInUnfollowedFollowers, 1);\n        await unfollowedUser.push();\n    }\n    return true;\n}\nasync function getUserFeed(authId) {\n    const user = await getMe(authId);\n    return user.data.feed;\n}\n// Guarda el tweet en nuestra data en el atributo like o save cuando le damos like o save a algun tweet.\nasync function saveAction(action, tweet, token) {\n    const user = await getMe(token);\n    if (action == \"like\") {\n        user.data.likes.find(async (t)=>{\n            if (t.id == tweet.data.id) {\n                // console.log(\"hay otro igual\");\n                return false;\n            } else if (t.id != undefined) {\n                // console.log(\"no habia otro igual\");\n                user.data.likes.push(tweet.data);\n                await user.push();\n            }\n        });\n    }\n    if (action == \"save\") {\n        user.data.saves.find(async (t)=>{\n            if (t.id == tweet.data.id) {\n                return false;\n            } else {\n                user.data.saves.push(tweet.data);\n                await user.push();\n            }\n        });\n    }\n}\nasync function getAllTweetsFromUser(userId) {\n    const user = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(userId);\n    return user.data.tweets;\n}\nasync function getOthersProfile(userId) {\n    const result = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.findById(userId);\n    return result?.data;\n}\n// This function was crashing every time because of the for loop , It was falling\n// into recursion because I was looping until the array length  had 2 elements but It may never have to.\nasync function getWhoToFollow(token) {\n    const me = await getMe(token.authId);\n    const usersList = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    let arr = [];\n    let newArr = [];\n    // Fix this shit\n    for(let i = 0; i < 2; i++){\n        const randomUser = usersList.map((user)=>{\n            return user;\n        });\n        me.data.following.map((followed)=>{\n            if (followed == randomUser[i].generatedId) {\n                return;\n            } else if (arr[0]?.generatedId == randomUser[i].generatedId) {\n                // Chequea si ya se ha metido un elemento identico al array previamente.\n                return;\n            } else {\n                //  No existe tanto en following como en el array.\n                arr.push(randomUser[i]);\n                return true;\n            }\n        });\n    }\n    /*   for (const user of arr) {\r\n    console.log(user.fullname);\r\n  } */ return arr;\n}\nasync function getAllUsers(query) {\n    const users = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const result = users.filter((user)=>{\n        if (user.fullname.includes(query)) {\n            return user;\n        }\n    });\n    return result;\n}\nasync function get10RandomsUsers() {\n    const allUsers = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const allRandoms = [];\n    for(let index = 0; index < 10; index++){\n        const random = allUsers[Math.floor(Math.random() * allUsers.length)];\n        allRandoms.push(random);\n    }\n    return allRandoms;\n}\nfunction compareFunction(a, b) {\n    return b.followers.length - a.followers.length;\n}\nasync function getMostFollowedUsers() {\n    // Bring users and compare their followers length to sort them\n    //  use .sort()\n    const users = await models_user__WEBPACK_IMPORTED_MODULE_0__.User.getAll();\n    const sliceData = users.map((user)=>{\n        return {\n            fullname: user.fullname,\n            userId: user.generatedId,\n            followers: user.followers,\n            description: user.description,\n            pics: {\n                profilePicture: user.pics.profilePicture\n            }\n        };\n    });\n    const sortedUsers = sliceData.sort(compareFunction);\n    return sortedUsers;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxNQUFNLENBQUMsQ0FBQztLQUN6QjtJQUNELE9BQU9ELFVBQVUsQ0FBQztDQUNuQjtBQUVELFNBQVNLOztDQUVSO0FBRUQsT0FBTyxlQUFlRyxvQkFBb0IsR0FBRzs7QUFFM0MsWUFBZTtJQUNmLE1BQU1iLEtBQUssR0FBRyxNQUFNbkUsSUFBSSxDQUFDMkQsTUFBTSxFQUFFO0lBQ2pDLE1BQU1zQixTQUFTO1FBQ2IsT0FBTztZQUNMbkUsUUFBUSxFQUFFTixJQUFJLENBQUNNLFFBQVE7WUFDdkJSO1lBQ0FzQixTQUFTLEVBQUVwQixJQUFJLENBQUNvQjtZQUNoQmIsV0FBVyxFQUFFUCxJQUFJLENBQUNPO1lBQ2xCQyxJQUFJLEVBQUU7Z0JBQ0pFLGNBQWMsRUFBRVYsSUFBSSxDQUFDUSxJQUFJLENBQUNFO2FBQzNCO1NBQ0YsQ0FBQztLQUNILENBQUM7SUFDRixNQUFNZ0U7SUFDTjtDQUNEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL2NvbnRyb2xsZXJzL3VzZXIudHM/OTZiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyIH0gZnJvbSBcIm1vZGVscy91c2VyXCI7XHJcbmltcG9ydCB7IEF1dGggfSBmcm9tIFwibW9kZWxzL2F1dGhcIjtcclxuaW1wb3J0IHsgVXNlckRhdGEgfSBmcm9tIFwiY3VzdG9tXCI7XHJcbmltcG9ydCB7IGdldF9yYW5kb20gfSBmcm9tIFwibGliXCI7XHJcblxyXG4vLyBJZiB0aGlzIGxheWVyICBnZXQgdG8gbG9uZyBJIG1heSBzZXBhcmF0ZSBpdCBpbnRvIHNtYWxsZXIgYmxvY2tzLlxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1lKHRva2VuKSB7XHJcbiAgY29uc3QgYXV0aCA9IG5ldyBBdXRoKHRva2VuKTtcclxuICBhd2FpdCBhdXRoLnB1bGwoKTtcclxuICBjb25zdCB1c2VySWQgPSBhdXRoLmRhdGEudXNlcklkO1xyXG4gIGNvbnN0IHVzZXIgPSBuZXcgVXNlcih1c2VySWQpO1xyXG4gIGF3YWl0IHVzZXIucHVsbCgpO1xyXG4gIHJldHVybiB1c2VyO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlVXNlclByb2ZpbGUodXBkYXRlQm9keSwgdG9rZW4pIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0TWUodG9rZW4uYXV0aElkKTtcclxuICBpZiAodXBkYXRlQm9keS5uZXdCb2R5LmVtYWlsKSB7XHJcbiAgICB1c2VyLmRhdGEuZW1haWwgPSB1cGRhdGVCb2R5Lm5ld0JvZHkuZW1haWw7XHJcbiAgfVxyXG4gIGlmICh1cGRhdGVCb2R5Lm5ld0JvZHkuZnVsbG5hbWUpIHtcclxuICAgIHVzZXIuZGF0YS5mdWxsbmFtZSA9IHVwZGF0ZUJvZHkubmV3Qm9keS5mdWxsbmFtZTtcclxuICB9XHJcbiAgaWYgKHVwZGF0ZUJvZHkubmV3Qm9keS5kZXNjcmlwdGlvbikge1xyXG4gICAgdXNlci5kYXRhLmRlc2NyaXB0aW9uID0gdXBkYXRlQm9keS5uZXdCb2R5LmRlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgaWYgKHVwZGF0ZUJvZHkubmV3Qm9keS5waWNzLmNvdmVyUGljdHVyZSkge1xyXG4gICAgdXNlci5kYXRhLnBpY3MuY292ZXJQaWN0dXJlID0gdXBkYXRlQm9keS5uZXdCb2R5LnBpY3MuY292ZXJQaWN0dXJlO1xyXG4gIH1cclxuICBpZiAodXBkYXRlQm9keS5uZXdCb2R5LnBpY3MucHJvZmlsZVBpY3R1cmUpIHtcclxuICAgIHVzZXIuZGF0YS5waWNzLnByb2ZpbGVQaWN0dXJlID0gdXBkYXRlQm9keS5uZXdCb2R5LnBpY3MucHJvZmlsZVBpY3R1cmU7XHJcbiAgfVxyXG4gIGNvbnN0IHVwZGF0ZWQgPSBhd2FpdCB1c2VyLnB1c2goKTtcclxuICByZXR1cm4gdXBkYXRlZDtcclxufVxyXG5cclxuLy8gQWRkcyBmb2xsb3dpbmcgdG8gdXNlciBtYWtpbmcgdGhlIHJlcXVlc3QgYW5kIGEgZm9sbG93ZXIgdG8gZm9sbG93ZWQgdXNlci5cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRGb2xsb3dlcihmb2xsb3dlZElkOiBudW1iZXIsIGF1dGhJZCkge1xyXG4gIC8vIEZpcnN0ICwgaXQgZ2V0cyB0aGUgdXNlciBmb2xsb3dpbmcgcmVmZXJlbmNlIGJ5IHRoZSBhdXRoSWQsdGhlbiB0aGUgZm9sbG93ZWQgdXNlciByZWZlcmVuY2VcclxuICAvLyBieSBmb2xsb3dlZElkIHBhcmFtIG9idGFpbmVkIHVzaW5nIHRoZSB1cmwgaW4gdGhlIGZyb250ZW5kLFxyXG4gIC8vIHRvIGFjY2VzcyB0aGVpciBmb2xsb3dpbmcgYW5kIGZvbGxvd2VycyBwcm9wZXJ0aWVzLlxyXG4gIGNvbnN0IG1lID0gYXdhaXQgZ2V0TWUoYXV0aElkKTtcclxuICBtZS5kYXRhLmZvbGxvd2luZy5wdXNoKE51bWJlcihmb2xsb3dlZElkKSk7XHJcbiAgYXdhaXQgbWUucHVzaCgpO1xyXG4gIGNvbnN0IHVzZXJGb2xsb3dlZCA9IGF3YWl0IFVzZXIuZmluZEJ5SWQoZm9sbG93ZWRJZCk7XHJcbiAgdXNlckZvbGxvd2VkLmRhdGEuZm9sbG93ZXJzLnB1c2goTnVtYmVyKG1lLmRhdGEuZ2VuZXJhdGVkSWQpKTtcclxuICBhd2FpdCB1c2VyRm9sbG93ZWQucHVzaCgpO1xyXG4gIHJldHVybiB0cnVlO1xyXG59XHJcblxyXG4vLyBEZWNyZWFzZXMgeW91ciBmb2xsb3dpbmcgY291bnQgYW5kIHRoZSB1bmZvbGxvd2VkJ3MgZm9sbG93ZXJzIGNvdW50XHJcbi8vIEFsc28gZGVsZXRlcyB0aGUgdW5mb2xsb3dlZCdzIHR3ZWV0cyBmcm9tIHlvdXIgZmVlZC5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZVVuZm9sbG93KHVuZm9sbG93ZWRJZCwgYXV0aElkKSB7XHJcbiAgLy8gSGVyZSByZW1vdmVzIHR3ZWV0cyBmcm9tIGZlZWQuXHJcbiAgY29uc3QgbWUgPSBhd2FpdCBnZXRNZShhdXRoSWQpO1xyXG4gIG1lLmRhdGEuZmVlZC5tYXAoYXN5bmMgKHR3ZWV0OiBhbnksIGluZGV4KSA9PiB7XHJcbiAgICBpZiAodHdlZXQudXNlcklkID09IHVuZm9sbG93ZWRJZCkge1xyXG4gICAgICBtZS5kYXRhLmZlZWQuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgIH1cclxuICAgIGF3YWl0IG1lLnB1c2goKTtcclxuICB9KTtcclxuXHJcbiAgLy8gSGVyZSAgcmVtb3ZlcyB0aGUgdW5mb2xsb3dlZCB1c2VyIGZyb20gb3VyIGZvbGxvd2luZyBsaXN0LlxyXG4gIGNvbnN0IHVuZm9sbG93ZWRJbmRleCA9IG1lLmRhdGEuZm9sbG93aW5nLmZpbmQoKGlkcykgPT4gaWRzID09IHVuZm9sbG93ZWRJZCk7XHJcbiAgY29uc3QgaW5kZXhPZlVzZXJSZXN1bHQgPSBtZS5kYXRhLmZvbGxvd2luZy5pbmRleE9mKHVuZm9sbG93ZWRJbmRleCk7XHJcbiAgaWYgKGluZGV4T2ZVc2VyUmVzdWx0ID4gLTEpIHtcclxuICAgIG1lLmRhdGEuZm9sbG93aW5nLnNwbGljZShpbmRleE9mVXNlclJlc3VsdCwgMSk7XHJcbiAgICBhd2FpdCBtZS5wdXNoKCk7XHJcbiAgfVxyXG5cclxuICAvLyBIZXJlIHJlbW92ZXMgdXMgZnJvbSB1bmZvbGxvd2VkJ3MgIGZvbGxvd2VycyBsaXN0LlxyXG5cclxuICBjb25zdCB1bmZvbGxvd2VkVXNlciA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodW5mb2xsb3dlZElkKTtcclxuICBhd2FpdCB1bmZvbGxvd2VkVXNlci5wdWxsKCk7XHJcblxyXG4gIGNvbnN0IHVuZm9sbG93ZWRVc2VyUmVzdWx0ID0gdW5mb2xsb3dlZFVzZXIuZGF0YS5mb2xsb3dlcnMuZmluZChcclxuICAgIChpZHMpID0+IGlkcyA9PSBtZS5kYXRhLmdlbmVyYXRlZElkXHJcbiAgKTtcclxuICBjb25zdCBpbmRleE9mTWVJblVuZm9sbG93ZWRGb2xsb3dlcnMgPVxyXG4gICAgdW5mb2xsb3dlZFVzZXIuZGF0YS5mb2xsb3dlcnMuaW5kZXhPZih1bmZvbGxvd2VkVXNlclJlc3VsdCk7XHJcbiAgaWYgKGluZGV4T2ZNZUluVW5mb2xsb3dlZEZvbGxvd2VycyA+IC0xKSB7XHJcbiAgICB1bmZvbGxvd2VkVXNlci5kYXRhLmZvbGxvd2Vycy5zcGxpY2UoaW5kZXhPZk1lSW5VbmZvbGxvd2VkRm9sbG93ZXJzLCAxKTtcclxuICAgIGF3YWl0IHVuZm9sbG93ZWRVc2VyLnB1c2goKTtcclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRmVlZChhdXRoSWQpIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgZ2V0TWUoYXV0aElkKTtcclxuICByZXR1cm4gdXNlci5kYXRhLmZlZWQ7XHJcbn1cclxuXHJcbi8vIEd1YXJkYSBlbCB0d2VldCBlbiBudWVzdHJhIGRhdGEgZW4gZWwgYXRyaWJ1dG8gbGlrZSBvIHNhdmUgY3VhbmRvIGxlIGRhbW9zIGxpa2UgbyBzYXZlIGEgYWxndW4gdHdlZXQuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQWN0aW9uKGFjdGlvbiwgdHdlZXQsIHRva2VuKSB7XHJcbiAgY29uc3QgdXNlciA9IGF3YWl0IGdldE1lKHRva2VuKTtcclxuICBpZiAoYWN0aW9uID09IFwibGlrZVwiKSB7XHJcbiAgICB1c2VyLmRhdGEubGlrZXMuZmluZChhc3luYyAodDogYW55KSA9PiB7XHJcbiAgICAgIGlmICh0LmlkID09IHR3ZWV0LmRhdGEuaWQpIHtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyhcImhheSBvdHJvIGlndWFsXCIpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSBlbHNlIGlmICh0LmlkICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwibm8gaGFiaWEgb3RybyBpZ3VhbFwiKTtcclxuICAgICAgICB1c2VyLmRhdGEubGlrZXMucHVzaCh0d2VldC5kYXRhKTtcclxuICAgICAgICBhd2FpdCB1c2VyLnB1c2goKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG4gIGlmIChhY3Rpb24gPT0gXCJzYXZlXCIpIHtcclxuICAgIHVzZXIuZGF0YS5zYXZlcy5maW5kKGFzeW5jICh0OiBhbnkpID0+IHtcclxuICAgICAgaWYgKHQuaWQgPT0gdHdlZXQuZGF0YS5pZCkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB1c2VyLmRhdGEuc2F2ZXMucHVzaCh0d2VldC5kYXRhKTtcclxuICAgICAgICBhd2FpdCB1c2VyLnB1c2goKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsVHdlZXRzRnJvbVVzZXIodXNlcklkOiBudW1iZXIpIHtcclxuICBjb25zdCB1c2VyID0gYXdhaXQgVXNlci5maW5kQnlJZCh1c2VySWQpO1xyXG4gIHJldHVybiB1c2VyLmRhdGEudHdlZXRzO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0T3RoZXJzUHJvZmlsZSh1c2VySWQ6IG51bWJlcikge1xyXG4gIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXIuZmluZEJ5SWQodXNlcklkKTtcclxuICByZXR1cm4gcmVzdWx0Py5kYXRhO1xyXG59XHJcblxyXG4vLyBUaGlzIGZ1bmN0aW9uIHdhcyBjcmFzaGluZyBldmVyeSB0aW1lIGJlY2F1c2Ugb2YgdGhlIGZvciBsb29wICwgSXQgd2FzIGZhbGxpbmdcclxuLy8gaW50byByZWN1cnNpb24gYmVjYXVzZSBJIHdhcyBsb29waW5nIHVudGlsIHRoZSBhcnJheSBsZW5ndGggIGhhZCAyIGVsZW1lbnRzIGJ1dCBJdCBtYXkgbmV2ZXIgaGF2ZSB0by5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFdob1RvRm9sbG93KHRva2VuKSB7XHJcbiAgY29uc3QgbWUgPSBhd2FpdCBnZXRNZSh0b2tlbi5hdXRoSWQpO1xyXG4gIGNvbnN0IHVzZXJzTGlzdCA9IGF3YWl0IFVzZXIuZ2V0QWxsKCk7XHJcblxyXG4gIGxldCBhcnIgPSBbXTtcclxuICBsZXQgbmV3QXJyID0gW107XHJcbiAgLy8gRml4IHRoaXMgc2hpdFxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgMjsgaSsrKSB7XHJcbiAgICBjb25zdCByYW5kb21Vc2VyID0gdXNlcnNMaXN0Lm1hcCgodXNlcikgPT4ge1xyXG4gICAgICByZXR1cm4gdXNlcjtcclxuICAgIH0pO1xyXG5cclxuICAgIG1lLmRhdGEuZm9sbG93aW5nLm1hcCgoZm9sbG93ZWQpID0+IHtcclxuICAgICAgaWYgKGZvbGxvd2VkID09IHJhbmRvbVVzZXJbaV0uZ2VuZXJhdGVkSWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH0gZWxzZSBpZiAoYXJyWzBdPy5nZW5lcmF0ZWRJZCA9PSByYW5kb21Vc2VyW2ldLmdlbmVyYXRlZElkKSB7XHJcbiAgICAgICAgLy8gQ2hlcXVlYSBzaSB5YSBzZSBoYSBtZXRpZG8gdW4gZWxlbWVudG8gaWRlbnRpY28gYWwgYXJyYXkgcHJldmlhbWVudGUuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICBObyBleGlzdGUgdGFudG8gZW4gZm9sbG93aW5nIGNvbW8gZW4gZWwgYXJyYXkuXHJcbiAgICAgICAgYXJyLnB1c2gocmFuZG9tVXNlcltpXSk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuICAvKiAgIGZvciAoY29uc3QgdXNlciBvZiBhcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKHVzZXIuZnVsbG5hbWUpO1xyXG4gIH0gKi9cclxuXHJcbiAgcmV0dXJuIGFycjtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEFsbFVzZXJzKHF1ZXJ5OiBzdHJpbmcpIHtcclxuICBjb25zdCB1c2VycyA9IGF3YWl0IFVzZXIuZ2V0QWxsKCk7XHJcbiAgY29uc3QgcmVzdWx0ID0gdXNlcnMuZmlsdGVyKCh1c2VyKSA9PiB7XHJcbiAgICBpZiAodXNlci5mdWxsbmFtZS5pbmNsdWRlcyhxdWVyeSkpIHtcclxuICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgcmV0dXJuIHJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldDEwUmFuZG9tc1VzZXJzKCkge1xyXG4gIGNvbnN0IGFsbFVzZXJzID0gYXdhaXQgVXNlci5nZXRBbGwoKTtcclxuXHJcbiAgY29uc3QgYWxsUmFuZG9tcyA9IFtdO1xyXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAxMDsgaW5kZXgrKykge1xyXG4gICAgY29uc3QgcmFuZG9tID0gYWxsVXNlcnNbTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsVXNlcnMubGVuZ3RoKV07XHJcbiAgICBhbGxSYW5kb21zLnB1c2gocmFuZG9tKTtcclxuICB9XHJcbiAgcmV0dXJuIGFsbFJhbmRvbXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbXBhcmVGdW5jdGlvbihhLCBiKSB7XHJcbiAgcmV0dXJuIGIuZm9sbG93ZXJzLmxlbmd0aCAtIGEuZm9sbG93ZXJzLmxlbmd0aDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldE1vc3RGb2xsb3dlZFVzZXJzKCkge1xyXG4gIC8vIEJyaW5nIHVzZXJzIGFuZCBjb21wYXJlIHRoZWlyIGZvbGxvd2VycyBsZW5ndGggdG8gc29ydCB0aGVtXHJcbiAgLy8gIHVzZSAuc29ydCgpXHJcbiAgY29uc3QgdXNlcnMgPSBhd2FpdCBVc2VyLmdldEFsbCgpO1xyXG4gIGNvbnN0IHNsaWNlRGF0YSA9IHVzZXJzLm1hcCgodXNlcikgPT4ge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgZnVsbG5hbWU6IHVzZXIuZnVsbG5hbWUsXHJcbiAgICAgIHVzZXJJZDogdXNlci5nZW5lcmF0ZWRJZCxcclxuICAgICAgZm9sbG93ZXJzOiB1c2VyLmZvbGxvd2VycyxcclxuICAgICAgZGVzY3JpcHRpb246IHVzZXIuZGVzY3JpcHRpb24sXHJcbiAgICAgIHBpY3M6IHtcclxuICAgICAgICBwcm9maWxlUGljdHVyZTogdXNlci5waWNzLnByb2ZpbGVQaWN0dXJlLFxyXG4gICAgICB9LFxyXG4gICAgfTtcclxuICB9KTtcclxuICBjb25zdCBzb3J0ZWRVc2VycyA9IHNsaWNlRGF0YS5zb3J0KGNvbXBhcmVGdW5jdGlvbiBhcyBhbnkpO1xyXG4gIHJldHVybiBzb3J0ZWRVc2VycztcclxufVxyXG4iXSwibmFtZXMiOlsiVXNlciIsIkF1dGgiLCJnZXRNZSIsInRva2VuIiwiYXV0aCIsInB1bGwiLCJ1c2VySWQiLCJkYXRhIiwidXNlciIsInVwZGF0ZVVzZXJQcm9maWxlIiwidXBkYXRlQm9keSIsImF1dGhJZCIsIm5ld0JvZHkiLCJlbWFpbCIsImZ1bGxuYW1lIiwiZGVzY3JpcHRpb24iLCJwaWNzIiwiY292ZXJQaWN0dXJlIiwicHJvZmlsZVBpY3R1cmUiLCJ1cGRhdGVkIiwicHVzaCIsImFkZEZvbGxvd2VyIiwiZm9sbG93ZWRJZCIsIm1lIiwiZm9sbG93aW5nIiwiTnVtYmVyIiwidXNlckZvbGxvd2VkIiwiZmluZEJ5SWQiLCJmb2xsb3dlcnMiLCJnZW5lcmF0ZWRJZCIsImhhbmRsZVVuZm9sbG93IiwidW5mb2xsb3dlZElkIiwiZmVlZCIsIm1hcCIsInR3ZWV0IiwiaW5kZXgiLCJzcGxpY2UiLCJ1bmZvbGxvd2VkSW5kZXgiLCJmaW5kIiwiaWRzIiwiaW5kZXhPZlVzZXJSZXN1bHQiLCJpbmRleE9mIiwidW5mb2xsb3dlZFVzZXIiLCJ1bmZvbGxvd2VkVXNlclJlc3VsdCIsImluZGV4T2ZNZUluVW5mb2xsb3dlZEZvbGxvd2VycyIsImdldFVzZXJGZWVkIiwic2F2ZUFjdGlvbiIsImFjdGlvbiIsImxpa2VzIiwidCIsImlkIiwidW5kZWZpbmVkIiwic2F2ZXMiLCJnZXRBbGxUd2VldHNGcm9tVXNlciIsInR3ZWV0cyIsImdldE90aGVyc1Byb2ZpbGUiLCJyZXN1bHQiLCJnZXRXaG9Ub0ZvbGxvdyIsInVzZXJzTGlzdCIsImdldEFsbCIsImFyciIsIm5ld0FyciIsImkiLCJyYW5kb21Vc2VyIiwiZm9sbG93ZWQiLCJnZXRBbGxVc2VycyIsInF1ZXJ5IiwidXNlcnMiLCJmaWx0ZXIiLCJpbmNsdWRlcyIsImdldDEwUmFuZG9tc1VzZXJzIiwiYWxsVXNlcnMiLCJhbGxSYW5kb21zIiwicmFuZG9tIiwiTWF0aCIsImZsb29yIiwibGVuZ3RoIiwiY29tcGFyZUZ1bmN0aW9uIiwiYSIsImIiLCJnZXRNb3N0Rm9sbG93ZWRVc2VycyIsInNsaWNlRGF0YSIsInNvcnRlZFVzZXJzIiwic29ydCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./controllers/user.ts\n");

/***/ }),

/***/ "(api)/./lib/conn/firestore.ts":
/*!*******************************!*\
  !*** ./lib/conn/firestore.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"firestore\": () => (/* binding */ firestore)\n/* harmony export */ });\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase-admin */ \"firebase-admin\");\n/* harmony import */ var firebase_admin__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(firebase_admin__WEBPACK_IMPORTED_MODULE_0__);\n\nconst servAcc = JSON.parse(process.env.DB_KEY);\nif ((firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().apps.length) == 0) {\n    firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().initializeApp({\n        credential: firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().credential.cert(servAcc)\n    });\n}\nconst firestore = firebase_admin__WEBPACK_IMPORTED_MODULE_0___default().firestore();\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvY29ubi9maXJlc3RvcmUudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW1DO0FBRW5DLE1BQU1DLE9BQU8sR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDQyxNQUFNLENBQUM7QUFFOUMsSUFBSU4sbUVBQWlCLElBQUksQ0FBQyxFQUFFO0lBQzFCQSxtRUFBbUIsQ0FBQztRQUNsQlUsVUFBVSxFQUFFVixxRUFBcUIsQ0FBQ0MsT0FBTyxDQUFDO0tBQzNDLENBQUMsQ0FBQztDQUNKO0FBRUQsTUFBTVcsU0FBUyxHQUFHWiwrREFBZSxFQUFFO0FBRWQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL2Nvbm4vZmlyZXN0b3JlLnRzP2U4NmUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGFkbWluIGZyb20gXCJmaXJlYmFzZS1hZG1pblwiO1xyXG5cclxuY29uc3Qgc2VydkFjYyA9IEpTT04ucGFyc2UocHJvY2Vzcy5lbnYuREJfS0VZKTtcclxuXHJcbmlmIChhZG1pbi5hcHBzLmxlbmd0aCA9PSAwKSB7XHJcbiAgYWRtaW4uaW5pdGlhbGl6ZUFwcCh7XHJcbiAgICBjcmVkZW50aWFsOiBhZG1pbi5jcmVkZW50aWFsLmNlcnQoc2VydkFjYyksXHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IGZpcmVzdG9yZSA9IGFkbWluLmZpcmVzdG9yZSgpO1xyXG5cclxuZXhwb3J0IHsgZmlyZXN0b3JlIH07XHJcbiJdLCJuYW1lcyI6WyJhZG1pbiIsInNlcnZBY2MiLCJKU09OIiwicGFyc2UiLCJwcm9jZXNzIiwiZW52IiwiREJfS0VZIiwiYXBwcyIsImxlbmd0aCIsImluaXRpYWxpemVBcHAiLCJjcmVkZW50aWFsIiwiY2VydCIsImZpcmVzdG9yZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/conn/firestore.ts\n");

/***/ }),

/***/ "(api)/./lib/jwt/index.ts":
/*!**************************!*\
  !*** ./lib/jwt/index.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"createToken\": () => (/* binding */ createToken),\n/* harmony export */   \"decode\": () => (/* binding */ decode)\n/* harmony export */ });\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction createToken(authId) {\n    const token = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().sign({\n        authId\n    }, process.env.JWT_KEY);\n    return token;\n}\nfunction decode(token) {\n    try {\n        const validate = jsonwebtoken__WEBPACK_IMPORTED_MODULE_0___default().verify(token, process.env.JWT_KEY);\n        return validate;\n    } catch (error) {\n        console.error({\n            error\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvand0L2luZGV4LnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBK0I7QUFFeEIsU0FBU0MsV0FBVyxDQUFDQyxNQUFNLEVBQUU7SUFDbEMsTUFBTUMsS0FBSyxHQUFHSCx3REFBUSxDQUFDO1FBQUVFLE1BQU07S0FBRSxFQUFFRyxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDO0lBQ3ZELE9BQU9KLEtBQUssQ0FBQztDQUNkO0FBRU0sU0FBU0ssTUFBTSxDQUFDTCxLQUFLLEVBQUU7SUFDNUIsSUFBSTtRQUNGLE1BQU1NLFFBQVEsR0FBR1QsMERBQVUsQ0FBQ0csS0FBSyxFQUFFRSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDO1FBQ3ZELE9BQU9FLFFBQVEsQ0FBQztLQUNqQixDQUFDLE9BQU9FLEtBQUssRUFBRTtRQUNkQyxPQUFPLENBQUNELEtBQUssQ0FBQztZQUFFQSxLQUFLO1NBQUUsQ0FBQyxDQUFDO0tBQzFCO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL2p3dC9pbmRleC50cz84ZjQ5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBqd3QgZnJvbSBcImpzb253ZWJ0b2tlblwiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVRva2VuKGF1dGhJZCkge1xyXG4gIGNvbnN0IHRva2VuID0gand0LnNpZ24oeyBhdXRoSWQgfSwgcHJvY2Vzcy5lbnYuSldUX0tFWSk7XHJcbiAgcmV0dXJuIHRva2VuO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gZGVjb2RlKHRva2VuKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHZhbGlkYXRlID0gand0LnZlcmlmeSh0b2tlbiwgcHJvY2Vzcy5lbnYuSldUX0tFWSk7XHJcbiAgICByZXR1cm4gdmFsaWRhdGU7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoeyBlcnJvciB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImp3dCIsImNyZWF0ZVRva2VuIiwiYXV0aElkIiwidG9rZW4iLCJzaWduIiwicHJvY2VzcyIsImVudiIsIkpXVF9LRVkiLCJkZWNvZGUiLCJ2YWxpZGF0ZSIsInZlcmlmeSIsImVycm9yIiwiY29uc29sZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/jwt/index.ts\n");

/***/ }),

/***/ "(api)/./lib/middlewares/auth.ts":
/*!*********************************!*\
  !*** ./lib/middlewares/auth.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authMiddleware\": () => (/* binding */ authMiddleware)\n/* harmony export */ });\n/* harmony import */ var lib_jwt__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/jwt */ \"(api)/./lib/jwt/index.ts\");\n\nfunction authMiddleware(callback) {\n    return function(req, res) {\n        if (req.headers.authorization) {\n            const token = req.headers.authorization.split(\" \")[1];\n            try {\n                const value = (0,lib_jwt__WEBPACK_IMPORTED_MODULE_0__.decode)(token);\n                callback(req, res, value);\n            } catch (error) {\n                res.send(error);\n            }\n        } else {\n            return res.status(401).send({\n                error: \"Missing token value\"\n            });\n        }\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvbWlkZGxld2FyZXMvYXV0aC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUNpQztBQUMxQixTQUFTQyxjQUFjLENBQUNDLFFBQVEsRUFBRTtJQUN2QyxPQUFPLFNBQVVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFO1FBQ2tJLElBQUlELEdBQUcsQ0FBQ0UsT0FBTyxDQUFDQyxhQUFhLEVBQUU7WUFDeEwsTUFBTUMsS0FBSyxHQUFHSixHQUFHLENBQUNFLE9BQU8sQ0FBQ0MsYUFBYSxDQUFDRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3JELElBQUk7Z0JBQ0YsTUFBTUMsS0FBSyxHQUFHVCwrQ0FBTSxDQUFDTyxLQUFLLENBQUM7Z0JBQzNCTCxRQUFRLENBQUNDLEdBQUcsRUFBRUMsR0FBRyxFQUFFSyxLQUFLLENBQUMsQ0FBQzthQUMzQixDQUFDLE9BQU9DLEtBQUssRUFBRTtnQkFDZE4sR0FBRyxDQUFDTyxJQUFJLENBQUNELEtBQUssQ0FBQyxDQUFDO2FBQ2pCO1NBQ0YsTUFBTTtZQUNMLE9BQU9OLEdBQUcsQ0FBQ1EsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDRCxJQUFJLENBQUM7Z0JBQUVELEtBQUssRUFBRSxxQkFBcUI7YUFBRSxDQUFDLENBQUM7U0FDL0Q7S0FDRixDQUFDO0NBQ0giLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbGliL21pZGRsZXdhcmVzL2F1dGgudHM/YTVlOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsaWdodEZvcm1hdCB9IGZyb20gXCJkYXRlLWZuc1wiO1xyXG5pbXBvcnQgeyBkZWNvZGUgfSBmcm9tIFwibGliL2p3dFwiO1xyXG5leHBvcnQgZnVuY3Rpb24gYXV0aE1pZGRsZXdhcmUoY2FsbGJhY2spIHtcclxuICByZXR1cm4gZnVuY3Rpb24gKHJlcSwgcmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXEuaGVhZGVycy5hdXRob3JpemF0aW9uKSB7XHJcbiAgICAgIGNvbnN0IHRva2VuID0gcmVxLmhlYWRlcnMuYXV0aG9yaXphdGlvbi5zcGxpdChcIiBcIilbMV07XHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkZWNvZGUodG9rZW4pO1xyXG4gICAgICAgIGNhbGxiYWNrKHJlcSwgcmVzLCB2YWx1ZSk7XHJcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgcmVzLnNlbmQoZXJyb3IpO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDEpLnNlbmQoeyBlcnJvcjogXCJNaXNzaW5nIHRva2VuIHZhbHVlXCIgfSk7XHJcbiAgICB9XHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOlsiZGVjb2RlIiwiYXV0aE1pZGRsZXdhcmUiLCJjYWxsYmFjayIsInJlcSIsInJlcyIsImhlYWRlcnMiLCJhdXRob3JpemF0aW9uIiwidG9rZW4iLCJzcGxpdCIsInZhbHVlIiwiZXJyb3IiLCJzZW5kIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/middlewares/auth.ts\n");

/***/ }),

/***/ "(api)/./models/auth.ts":
/*!************************!*\
  !*** ./models/auth.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Auth\": () => (/* binding */ Auth)\n/* harmony export */ });\n/* harmony import */ var lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/conn/firestore */ \"(api)/./lib/conn/firestore.ts\");\n\nconst collection = lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.collection(\"auths\");\nclass Auth {\n    constructor(id){\n        this.id = id;\n        this.ref = collection.doc(id);\n    }\n    async pull() {\n        const snap = await this.ref.get();\n        const data = snap.data();\n        this.data = data;\n    }\n    async push() {\n        await this.ref.update(this.data);\n    }\n    static trimEmail(email) {\n        return email.trim().toLowerCase();\n    }\n    static async findByEmail(emailParam) {\n        const email = Auth.trimEmail(emailParam);\n        const res = await collection.where(\"email\", \"==\", email).get();\n        if (res.docs.length) {\n            const doc = res.docs[0];\n            const id = doc.id;\n            const auth = new Auth(id);\n            auth.data = doc.data();\n            return auth;\n        }\n    }\n    static async createAuth(data) {\n        const email = Auth.trimEmail(data.email);\n        const newData = {\n            email,\n            code: data.code,\n            expiration: data.expiration,\n            userId: data.userId\n        };\n        const snapshot = await collection.add(newData);\n        const auth = new Auth(snapshot.id);\n        auth.data = newData;\n        return auth;\n    }\n    static async getByEmailAndCode(userEmail, code) {\n        const email = Auth.trimEmail(userEmail);\n        const snapshot = await collection.where(\"email\", \"==\", email).where(\"code\", \"==\", code).get();\n        if (snapshot.docs.length) {\n            const doc = snapshot.docs[0];\n            const auth = new Auth(doc.id);\n            auth.data = doc.data();\n            return auth;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvYXV0aC50cy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUErQztBQUUvQyxNQUFNQyxVQUFVLEdBQUdELG9FQUFvQixDQUFDLE9BQU8sQ0FBQztBQVN6QyxNQUFNRSxJQUFJO0lBSWZDLFlBQVlDLEVBQVUsQ0FBRTtRQUN0QixJQUFJLENBQUNBLEVBQUUsR0FBR0EsRUFBRSxDQUFDO1FBQ2IsSUFBSSxDQUFDQyxHQUFHLEdBQUdKLFVBQVUsQ0FBQ0ssR0FBRyxDQUFDRixFQUFFLENBQUMsQ0FBQztLQUMvQjtJQUNELE1BQU1HLElBQUksR0FBRztRQUNYLE1BQU1DLElBQUksR0FBRyxNQUFNLElBQUksQ0FBQ0gsR0FBRyxDQUFDSSxHQUFHLEVBQUU7UUFDakMsTUFBTUMsSUFBSSxHQUFHRixJQUFJLENBQUNFLElBQUksRUFBRTtRQUN4QixJQUFJLENBQUNBLElBQUksR0FBR0EsSUFBSSxDQUFhO0tBQzlCO0lBQ0QsTUFBTUMsSUFBSSxHQUFHO1FBQ1gsTUFBTSxJQUFJLENBQUNOLEdBQUcsQ0FBQ08sTUFBTSxDQUFDLElBQUksQ0FBQ0YsSUFBSSxDQUFDLENBQUM7S0FDbEM7SUFDRCxPQUFPRyxTQUFTLENBQUNDLEtBQWEsRUFBRTtRQUM5QixPQUFPQSxLQUFLLENBQUNDLElBQUksRUFBRSxDQUFDQyxXQUFXLEVBQUUsQ0FBQztLQUNuQztJQUNELGFBQWFDLFdBQVcsQ0FBQ0MsVUFBa0IsRUFBRTtRQUMzQyxNQUFNSixLQUFLLEdBQUdaLElBQUksQ0FBQ1csU0FBUyxDQUFDSyxVQUFVLENBQUM7UUFDeEMsTUFBTUMsR0FBRyxHQUFHLE1BQU1sQixVQUFVLENBQUNtQixLQUFLLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRU4sS0FBSyxDQUFDLENBQUNMLEdBQUcsRUFBRTtRQUM5RCxJQUFJVSxHQUFHLENBQUNFLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ25CLE1BQU1oQixHQUFHLEdBQUdhLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN2QixNQUFNakIsRUFBRSxHQUFHRSxHQUFHLENBQUNGLEVBQUU7WUFDakIsTUFBTW1CLElBQUksR0FBRyxJQUFJckIsSUFBSSxDQUFDRSxFQUFFLENBQUM7WUFDekJtQixJQUFJLENBQUNiLElBQUksR0FBR0osR0FBRyxDQUFDSSxJQUFJLEVBQUUsQ0FBYTtZQUNuQyxPQUFPYSxJQUFJLENBQUM7U0FDYjtLQUNGO0lBQ0QsYUFBYUMsVUFBVSxDQUFDZCxJQUFjLEVBQUU7UUFDdEMsTUFBTUksS0FBSyxHQUFHWixJQUFJLENBQUNXLFNBQVMsQ0FBQ0gsSUFBSSxDQUFDSSxLQUFLLENBQUM7UUFFeEMsTUFBTVcsT0FBTyxHQUFHO1lBQ2RYLEtBQUs7WUFDTFksSUFBSSxFQUFFaEIsSUFBSSxDQUFDZ0IsSUFBSTtZQUNmQyxVQUFVLEVBQUVqQixJQUFJLENBQUNpQixVQUFVO1lBQzNCQyxNQUFNLEVBQUVsQixJQUFJLENBQUNrQixNQUFNO1NBQ3BCO1FBQ0QsTUFBTUMsUUFBUSxHQUFHLE1BQU01QixVQUFVLENBQUM2QixHQUFHLENBQUNMLE9BQU8sQ0FBQztRQUM5QyxNQUFNRixJQUFJLEdBQUcsSUFBSXJCLElBQUksQ0FBQzJCLFFBQVEsQ0FBQ3pCLEVBQUUsQ0FBQztRQUNsQ21CLElBQUksQ0FBQ2IsSUFBSSxHQUFHZSxPQUFPLENBQUM7UUFDcEIsT0FBT0YsSUFBSSxDQUFDO0tBQ2I7SUFDRCxhQUFhUSxpQkFBaUIsQ0FBQ0MsU0FBaUIsRUFBRU4sSUFBWSxFQUFFO1FBQzlELE1BQU1aLEtBQUssR0FBR1osSUFBSSxDQUFDVyxTQUFTLENBQUNtQixTQUFTLENBQUM7UUFDdkMsTUFBTUgsUUFBUSxHQUFHLE1BQU01QixVQUFVLENBQzlCbUIsS0FBSyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUVOLEtBQUssQ0FBQyxDQUMzQk0sS0FBSyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUVNLElBQUksQ0FBQyxDQUN6QmpCLEdBQUcsRUFBRTtRQUNSLElBQUlvQixRQUFRLENBQUNSLElBQUksQ0FBQ0MsTUFBTSxFQUFFO1lBQ3hCLE1BQU1oQixHQUFHLEdBQUd1QixRQUFRLENBQUNSLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTUUsSUFBSSxHQUFHLElBQUlyQixJQUFJLENBQUNJLEdBQUcsQ0FBQ0YsRUFBRSxDQUFDO1lBQzdCbUIsSUFBSSxDQUFDYixJQUFJLEdBQUdKLEdBQUcsQ0FBQ0ksSUFBSSxFQUFFLENBQWE7WUFDbkMsT0FBT2EsSUFBSSxDQUFDO1NBQ2I7S0FDRjtDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL21vZGVscy9hdXRoLnRzPzRkMzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcImxpYi9jb25uL2ZpcmVzdG9yZVwiO1xyXG5cclxuY29uc3QgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKFwiYXV0aHNcIik7XHJcblxyXG50eXBlIEF1dGhEYXRhID0ge1xyXG4gIGVtYWlsOiBzdHJpbmc7XHJcbiAgY29kZTogbnVtYmVyO1xyXG4gIGV4cGlyYXRpb246IERhdGU7XHJcbiAgdXNlcklkOiBzdHJpbmc7XHJcbn07XHJcblxyXG5leHBvcnQgY2xhc3MgQXV0aCB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByZWY6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlO1xyXG4gIGRhdGE6IEF1dGhEYXRhO1xyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMucmVmID0gY29sbGVjdGlvbi5kb2MoaWQpO1xyXG4gIH1cclxuICBhc3luYyBwdWxsKCkge1xyXG4gICAgY29uc3Qgc25hcCA9IGF3YWl0IHRoaXMucmVmLmdldCgpO1xyXG4gICAgY29uc3QgZGF0YSA9IHNuYXAuZGF0YSgpO1xyXG4gICAgdGhpcy5kYXRhID0gZGF0YSBhcyBBdXRoRGF0YTtcclxuICB9XHJcbiAgYXN5bmMgcHVzaCgpIHtcclxuICAgIGF3YWl0IHRoaXMucmVmLnVwZGF0ZSh0aGlzLmRhdGEpO1xyXG4gIH1cclxuICBzdGF0aWMgdHJpbUVtYWlsKGVtYWlsOiBzdHJpbmcpIHtcclxuICAgIHJldHVybiBlbWFpbC50cmltKCkudG9Mb3dlckNhc2UoKTtcclxuICB9XHJcbiAgc3RhdGljIGFzeW5jIGZpbmRCeUVtYWlsKGVtYWlsUGFyYW06IHN0cmluZykge1xyXG4gICAgY29uc3QgZW1haWwgPSBBdXRoLnRyaW1FbWFpbChlbWFpbFBhcmFtKTtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNvbGxlY3Rpb24ud2hlcmUoXCJlbWFpbFwiLCBcIj09XCIsIGVtYWlsKS5nZXQoKTtcclxuICAgIGlmIChyZXMuZG9jcy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgZG9jID0gcmVzLmRvY3NbMF07XHJcbiAgICAgIGNvbnN0IGlkID0gZG9jLmlkO1xyXG4gICAgICBjb25zdCBhdXRoID0gbmV3IEF1dGgoaWQpO1xyXG4gICAgICBhdXRoLmRhdGEgPSBkb2MuZGF0YSgpIGFzIEF1dGhEYXRhO1xyXG4gICAgICByZXR1cm4gYXV0aDtcclxuICAgIH1cclxuICB9XHJcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZUF1dGgoZGF0YTogQXV0aERhdGEpIHtcclxuICAgIGNvbnN0IGVtYWlsID0gQXV0aC50cmltRW1haWwoZGF0YS5lbWFpbCk7XHJcblxyXG4gICAgY29uc3QgbmV3RGF0YSA9IHtcclxuICAgICAgZW1haWwsXHJcbiAgICAgIGNvZGU6IGRhdGEuY29kZSxcclxuICAgICAgZXhwaXJhdGlvbjogZGF0YS5leHBpcmF0aW9uLFxyXG4gICAgICB1c2VySWQ6IGRhdGEudXNlcklkLFxyXG4gICAgfTtcclxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgY29sbGVjdGlvbi5hZGQobmV3RGF0YSk7XHJcbiAgICBjb25zdCBhdXRoID0gbmV3IEF1dGgoc25hcHNob3QuaWQpO1xyXG4gICAgYXV0aC5kYXRhID0gbmV3RGF0YTtcclxuICAgIHJldHVybiBhdXRoO1xyXG4gIH1cclxuICBzdGF0aWMgYXN5bmMgZ2V0QnlFbWFpbEFuZENvZGUodXNlckVtYWlsOiBzdHJpbmcsIGNvZGU6IG51bWJlcikge1xyXG4gICAgY29uc3QgZW1haWwgPSBBdXRoLnRyaW1FbWFpbCh1c2VyRW1haWwpO1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uXHJcbiAgICAgIC53aGVyZShcImVtYWlsXCIsIFwiPT1cIiwgZW1haWwpXHJcbiAgICAgIC53aGVyZShcImNvZGVcIiwgXCI9PVwiLCBjb2RlKVxyXG4gICAgICAuZ2V0KCk7XHJcbiAgICBpZiAoc25hcHNob3QuZG9jcy5sZW5ndGgpIHtcclxuICAgICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXTtcclxuICAgICAgY29uc3QgYXV0aCA9IG5ldyBBdXRoKGRvYy5pZCk7XHJcbiAgICAgIGF1dGguZGF0YSA9IGRvYy5kYXRhKCkgYXMgQXV0aERhdGE7XHJcbiAgICAgIHJldHVybiBhdXRoO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZmlyZXN0b3JlIiwiY29sbGVjdGlvbiIsIkF1dGgiLCJjb25zdHJ1Y3RvciIsImlkIiwicmVmIiwiZG9jIiwicHVsbCIsInNuYXAiLCJnZXQiLCJkYXRhIiwicHVzaCIsInVwZGF0ZSIsInRyaW1FbWFpbCIsImVtYWlsIiwidHJpbSIsInRvTG93ZXJDYXNlIiwiZmluZEJ5RW1haWwiLCJlbWFpbFBhcmFtIiwicmVzIiwid2hlcmUiLCJkb2NzIiwibGVuZ3RoIiwiYXV0aCIsImNyZWF0ZUF1dGgiLCJuZXdEYXRhIiwiY29kZSIsImV4cGlyYXRpb24iLCJ1c2VySWQiLCJzbmFwc2hvdCIsImFkZCIsImdldEJ5RW1haWxBbmRDb2RlIiwidXNlckVtYWlsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./models/auth.ts\n");

/***/ }),

/***/ "(api)/./models/tweets.ts":
/*!**************************!*\
  !*** ./models/tweets.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"Tweets\": () => (/* binding */ Tweets)\n/* harmony export */ });\n/* harmony import */ var lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/conn/firestore */ \"(api)/./lib/conn/firestore.ts\");\n\nconst collection = lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.collection(\"tweets\");\n/* type TweetType = {\r\n  content?: string;\r\n  img?: string;\r\n  userId: string;\r\n  id: number;\r\n  mode: string;\r\n  createdAt: Date;\r\n  userName: string;\r\n  info: {\r\n    likes: number;\r\n    retweets: number;\r\n    saves: number;\r\n    comments: number;\r\n  }[];\r\n}; */ class Tweets {\n    constructor(id){\n        this.id = id;\n        this.ref = collection.doc(id);\n    }\n    async pull() {\n        const snap = await this.ref.get();\n        const data = snap.data();\n        this.data = data;\n    }\n    async push() {\n        await this.ref.update(this.data);\n    }\n    static async createTweet(data) {\n        const snapshot = await collection.add(data);\n        const tweet = new Tweets(snapshot.id);\n        tweet.data = data;\n        return tweet;\n    }\n    static async findById(id) {\n        const numberId = Number(id);\n        const res = await collection.where(\"id\", \"==\", numberId).get();\n        if (res.docs.length) {\n            const doc = res.docs[0];\n            const tweet = new Tweets(doc.id);\n            tweet.data = doc.data();\n            return tweet;\n        }\n    }\n    static async findAllByUserId(id) {\n        const res = await collection.where(\"userId\", \"==\", id).get();\n        if (res.docs.length) {\n            const result = res.docs.map((item, index)=>{\n                const doc = res.docs[index];\n                const tweet = new Tweets(doc.id);\n                tweet.data = doc.data();\n                return tweet.data;\n            });\n            return result;\n        }\n    }\n    static async getAll() {\n        const coll = await collection.get();\n        const docs = coll.docs;\n        const tweets = docs.map((d)=>{\n            return d.data();\n        });\n        return tweets;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9tb2RlbHMvdHdlZXRzLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQytDO0FBRS9DLE1BQU1DLFVBQVUsR0FBR0Qsb0VBQW9CLENBQUMsUUFBUSxDQUFDO0FBRWpEO0lBb0JFRyxZQUFZQyxFQUFVLENBQUU7UUFDdEIsSUFBSSxDQUFDQSxFQUFFO1FBQ1AsSUFBSSxDQUFDQyxHQUFHO0tBQ1Q7SUFDRCxNQUFNRSxJQUFJO1FBQ1IsTUFBTUMsSUFBSTtRQUNWLE1BQU1FLElBQUk7UUFDVjtLQUNEO0lBQ0QsTUFBTUMsSUFBSSxHQUFHO1FBQ1gsTUFBTSxJQUFJLENBQUNOO0tBQ1o7SUFDRDtNQUNFLENBQU1TLFFBQVEsR0FBRztRQUNqQixNQUFNRSxLQUFLO1FBQ1hBLEtBQUssQ0FBQ04sSUFBSSxHQUFHQTtRQUNiLE9BQU9NLEtBQUssQ0FBQztLQUNkO0lBQ0QsYUFBYUM7UUFDWCxNQUFNQyxRQUFRLEdBQUdDLE1BQU0sQ0FBQ2YsRUFBRSxDQUFDO1FBQzNCLE1BQU1nQixHQUFHLEdBQUcsTUFBTW5CO1FBRWxCLElBQUltQixHQUFHLENBQUNFLElBQUksQ0FBQ0M7O1lBRVgsTUFBTVA7WUFDTkEsS0FBSyxDQUFDTixJQUFJLEdBQUdKLEdBQUcsQ0FBQ0ksSUFBSSxFQUFFLENBQWM7O1NBRXRDO0tBQ0Y7SUFDRCxhQUFhYyxlQUFlLENBQUNwQixFQUFVLEVBQUU7UUFDdkMsTUFBTWdCLEdBQUcsR0FBRyxNQUFNbkI7UUFDbEIsSUFBSW1CLEdBQUcsQ0FBQ0UsSUFBSSxDQUFDQzs7Z0JBRVQsTUFBTWpCLEdBQUcsR0FBR2MsR0FBRztnQkFDZixNQUFNSixLQUFLLEdBQUcsSUFBSWQ7Z0JBQ2xCYyxLQUFLLENBQUNOLElBQUksR0FBR0osR0FBRyxDQUFDSSxJQUFJLEVBQUUsQ0FBYztnQkFDckMsT0FBT00sS0FBSyxDQUFDTjthQUNkLENBQUM7WUFDRixPQUFPZSxNQUFNLENBQUM7U0FDZjtLQUNGO0lBQ0Q7O1FBRUUsTUFBTUgsSUFBSSxHQUFHUSxJQUFJLENBQUNSLElBQUk7UUFDdEIsTUFBTVMsTUFBTSxHQUFHVCxJQUFJLENBQUNJLEdBQUcsQ0FBQyxDQUFDTSxDQUFDLEdBQUs7WUFDN0IsT0FBT0EsQ0FBQyxDQUFDdEIsSUFBSSxFQUFFLENBQUM7U0FDakIsQ0FBQztRQUNGLE9BQU9xQixNQUFNLENBQUM7S0FDZjtDQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmFja2VuZC8uL21vZGVscy90d2VldHMudHM/MDBjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBUd2VldFR5cGUgfSBmcm9tIFwiY3VzdG9tXCI7XHJcbmltcG9ydCB7IGZpcmVzdG9yZSB9IGZyb20gXCJsaWIvY29ubi9maXJlc3RvcmVcIjtcclxuXHJcbmNvbnN0IGNvbGxlY3Rpb24gPSBmaXJlc3RvcmUuY29sbGVjdGlvbihcInR3ZWV0c1wiKTtcclxuXHJcbi8qIHR5cGUgVHdlZXRUeXBlID0ge1xyXG4gIGNvbnRlbnQ/OiBzdHJpbmc7XHJcbiAgaW1nPzogc3RyaW5nO1xyXG4gIHVzZXJJZDogc3RyaW5nO1xyXG4gIGlkOiBudW1iZXI7XHJcbiAgbW9kZTogc3RyaW5nO1xyXG4gIGNyZWF0ZWRBdDogRGF0ZTtcclxuICB1c2VyTmFtZTogc3RyaW5nO1xyXG4gIGluZm86IHtcclxuICAgIGxpa2VzOiBudW1iZXI7XHJcbiAgICByZXR3ZWV0czogbnVtYmVyO1xyXG4gICAgc2F2ZXM6IG51bWJlcjtcclxuICAgIGNvbW1lbnRzOiBudW1iZXI7XHJcbiAgfVtdO1xyXG59OyAqL1xyXG5cclxuZXhwb3J0IGNsYXNzIFR3ZWV0cyB7XHJcbiAgaWQ6IHN0cmluZztcclxuICByZWY6IEZpcmViYXNlRmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlO1xyXG4gIGRhdGE6IFR3ZWV0VHlwZTtcclxuICBjb25zdHJ1Y3RvcihpZDogc3RyaW5nKSB7XHJcbiAgICB0aGlzLmlkID0gaWQ7XHJcbiAgICB0aGlzLnJlZiA9IGNvbGxlY3Rpb24uZG9jKGlkKTtcclxuICB9XHJcbiAgYXN5bmMgcHVsbCgpIHtcclxuICAgIGNvbnN0IHNuYXAgPSBhd2FpdCB0aGlzLnJlZi5nZXQoKTtcclxuICAgIGNvbnN0IGRhdGEgPSBzbmFwLmRhdGEoKTtcclxuICAgIHRoaXMuZGF0YSA9IGRhdGEgYXMgVHdlZXRUeXBlO1xyXG4gIH1cclxuICBhc3luYyBwdXNoKCkge1xyXG4gICAgYXdhaXQgdGhpcy5yZWYudXBkYXRlKHRoaXMuZGF0YSk7XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVUd2VldChkYXRhOiBUd2VldFR5cGUpIHtcclxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgY29sbGVjdGlvbi5hZGQoZGF0YSk7XHJcbiAgICBjb25zdCB0d2VldCA9IG5ldyBUd2VldHMoc25hcHNob3QuaWQpO1xyXG4gICAgdHdlZXQuZGF0YSA9IGRhdGE7XHJcbiAgICByZXR1cm4gdHdlZXQ7XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlJZChpZDogbnVtYmVyKSB7XHJcbiAgICBjb25zdCBudW1iZXJJZCA9IE51bWJlcihpZCk7XHJcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjb2xsZWN0aW9uLndoZXJlKFwiaWRcIiwgXCI9PVwiLCBudW1iZXJJZCkuZ2V0KCk7XHJcblxyXG4gICAgaWYgKHJlcy5kb2NzLmxlbmd0aCkge1xyXG4gICAgICBjb25zdCBkb2MgPSByZXMuZG9jc1swXTtcclxuICAgICAgY29uc3QgdHdlZXQgPSBuZXcgVHdlZXRzKGRvYy5pZCk7XHJcbiAgICAgIHR3ZWV0LmRhdGEgPSBkb2MuZGF0YSgpIGFzIFR3ZWV0VHlwZTtcclxuICAgICAgcmV0dXJuIHR3ZWV0O1xyXG4gICAgfVxyXG4gIH1cclxuICBzdGF0aWMgYXN5bmMgZmluZEFsbEJ5VXNlcklkKGlkOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHJlcyA9IGF3YWl0IGNvbGxlY3Rpb24ud2hlcmUoXCJ1c2VySWRcIiwgXCI9PVwiLCBpZCkuZ2V0KCk7XHJcbiAgICBpZiAocmVzLmRvY3MubGVuZ3RoKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHJlcy5kb2NzLm1hcCgoaXRlbSwgaW5kZXgpID0+IHtcclxuICAgICAgICBjb25zdCBkb2MgPSByZXMuZG9jc1tpbmRleF07XHJcbiAgICAgICAgY29uc3QgdHdlZXQgPSBuZXcgVHdlZXRzKGRvYy5pZCk7XHJcbiAgICAgICAgdHdlZXQuZGF0YSA9IGRvYy5kYXRhKCkgYXMgVHdlZXRUeXBlO1xyXG4gICAgICAgIHJldHVybiB0d2VldC5kYXRhO1xyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICB9XHJcbiAgc3RhdGljIGFzeW5jIGdldEFsbCgpIHtcclxuICAgIGNvbnN0IGNvbGwgPSBhd2FpdCBjb2xsZWN0aW9uLmdldCgpO1xyXG4gICAgY29uc3QgZG9jcyA9IGNvbGwuZG9jcztcclxuICAgIGNvbnN0IHR3ZWV0cyA9IGRvY3MubWFwKChkKSA9PiB7XHJcbiAgICAgIHJldHVybiBkLmRhdGEoKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHR3ZWV0cztcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImZpcmVzdG9yZSIsImNvbGxlY3Rpb24iLCJUd2VldHMiLCJjb25zdHJ1Y3RvciIsImlkIiwicmVmIiwiZG9jIiwicHVsbCIsInNuYXAiLCJnZXQiLCJkYXRhIiwicHVzaCIsInVwZGF0ZSIsImNyZWF0ZVR3ZWV0Iiwic25hcHNob3QiLCJhZGQiLCJ0d2VldCIsImZpbmRCeUlkIiwibnVtYmVySWQiLCJOdW1iZXIiLCJyZXMiLCJ3aGVyZSIsImRvY3MiLCJsZW5ndGgiLCJmaW5kQWxsQnlVc2VySWQiLCJyZXN1bHQiLCJtYXAiLCJpdGVtIiwiaW5kZXgiLCJnZXRBbGwiLCJjb2xsIiwidHdlZXRzIiwiZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/tweets.ts\n");

/***/ }),

/***/ "(api)/./models/user.ts":
/*!************************!*\
  !*** ./models/user.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"User\": () => (/* binding */ User)\n/* harmony export */ });\n/* harmony import */ var lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! lib/conn/firestore */ \"(api)/./lib/conn/firestore.ts\");\n\nconst collection = lib_conn_firestore__WEBPACK_IMPORTED_MODULE_0__.firestore.collection(\"users\");\nclass User {\n    constructor(id){\n        this.id = id;\n        this.ref = collection.doc(id);\n    }\n    async push() {\n        await this.ref.update(this.data);\n    }\n    async pull() {\n        const snap = await this.ref.get();\n        const data = snap.data();\n        this.data = data;\n    }\n    static async createUser(data) {\n        const email = data.email.trim().toLowerCase();\n        const newData = {\n            email,\n            fullname: data.fullname,\n            pics: {\n                profilePicture: data.pics.profilePicture,\n                coverPicture: data.pics.coverPicture\n            },\n            description: data.description,\n            tweets: data.tweets || [\n                {}\n            ],\n            followers: [],\n            following: [],\n            likes: data.likes || [\n                {}\n            ],\n            saves: data.saves || [\n                {}\n            ],\n            feed: data.feed || [\n                {}\n            ],\n            generatedId: data.generatedId,\n            replies: data.replies || [\n                {}\n            ]\n        };\n        const snapshot = await collection.add(newData);\n        const user = new User(snapshot.id);\n        user.data = newData;\n        user.data.tweets.pop();\n        await user.push();\n        return user;\n    }\n    static async findById(userId) {\n        const snapshot = await collection.where(\"generatedId\", \"==\", Number(userId)).get();\n        if (snapshot.docs.length) {\n            {\n                const doc = snapshot.docs[0];\n                const user = new User(doc.id);\n                user.data = doc.data();\n                return user;\n            }\n        }\n    }\n    static async getAll() {\n        const usersSnapshot = await collection.get();\n        const users = usersSnapshot.docs.map((d)=>{\n            const data = d.data();\n            return data;\n        });\n        return users;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDRixFQUFFLENBQUM7Z0JBQzdCNkIsSUFBSSxDQUFDeEIsSUFBSSxHQUFHSCxHQUFHLENBQUNHLElBQUksRUFBRSxDQUFhO2dCQUNuQyxPQUFPd0IsSUFBSSxDQUFDO2FBQ2I7U0FDRjtLQUNGO0lBQ0QsYUFBYVEsTUFBTSxHQUFHO1FBQ3BCLE1BQU1DLGFBQWEsR0FBRyxNQUFNekMsVUFBVSxDQUFDVyxHQUFHLEVBQUU7UUFDNUMsTUFBTStCLEtBQUssR0FBR0QsYUFBYSxDQUFDSCxJQUFJLENBQUNLLEdBQUcsQ0FBQyxDQUFDQyxDQUFDLEdBQUs7WUFDMUMsTUFBTXBDLElBQUksR0FBR29DLENBQUMsQ0FBQ3BDLElBQUksRUFBRTtZQUNyQixPQUFPQSxJQUFJLENBQUM7U0FDYixDQUFDO1FBQ0YsT0FBT2tDLEtBQUssQ0FBQztLQUNkO0NBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vbW9kZWxzL3VzZXIudHM/NzAwYSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBVc2VyRGF0YSB9IGZyb20gXCJjdXN0b21cIjtcclxuaW1wb3J0IHsgZmlyZXN0b3JlIH0gZnJvbSBcImxpYi9jb25uL2ZpcmVzdG9yZVwiO1xyXG5cclxuY29uc3QgY29sbGVjdGlvbiA9IGZpcmVzdG9yZS5jb2xsZWN0aW9uKFwidXNlcnNcIik7XHJcblxyXG5leHBvcnQgY2xhc3MgVXNlciB7XHJcbiAgcmVmOiBGaXJlYmFzZUZpcmVzdG9yZS5Eb2N1bWVudFJlZmVyZW5jZTtcclxuICBkYXRhOiBVc2VyRGF0YTtcclxuICBpZDogc3RyaW5nO1xyXG4gIGNvbnN0cnVjdG9yKGlkOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuaWQgPSBpZDtcclxuICAgIHRoaXMucmVmID0gY29sbGVjdGlvbi5kb2MoaWQpO1xyXG4gIH1cclxuICBhc3luYyBwdXNoKCkge1xyXG4gICAgYXdhaXQgdGhpcy5yZWYudXBkYXRlKHRoaXMuZGF0YSk7XHJcbiAgfVxyXG4gIGFzeW5jIHB1bGwoKSB7XHJcbiAgICBjb25zdCBzbmFwID0gYXdhaXQgdGhpcy5yZWYuZ2V0KCk7XHJcbiAgICBjb25zdCBkYXRhID0gc25hcC5kYXRhKCk7XHJcbiAgICB0aGlzLmRhdGEgPSBkYXRhIGFzIFVzZXJEYXRhO1xyXG4gIH1cclxuICBzdGF0aWMgYXN5bmMgY3JlYXRlVXNlcihkYXRhOiBVc2VyRGF0YSkge1xyXG4gICAgY29uc3QgZW1haWwgPSBkYXRhLmVtYWlsLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgbmV3RGF0YSA9IHtcclxuICAgICAgZW1haWwsXHJcbiAgICAgIGZ1bGxuYW1lOiBkYXRhLmZ1bGxuYW1lLFxyXG4gICAgICBwaWNzOiB7XHJcbiAgICAgICAgcHJvZmlsZVBpY3R1cmU6IGRhdGEucGljcy5wcm9maWxlUGljdHVyZSxcclxuICAgICAgICBjb3ZlclBpY3R1cmU6IGRhdGEucGljcy5jb3ZlclBpY3R1cmUsXHJcbiAgICAgIH0sXHJcbiAgICAgIGRlc2NyaXB0aW9uOiBkYXRhLmRlc2NyaXB0aW9uLFxyXG4gICAgICB0d2VldHM6IGRhdGEudHdlZXRzIHx8IFt7fV0sXHJcbiAgICAgIGZvbGxvd2VyczogW10sXHJcbiAgICAgIGZvbGxvd2luZzogW10sXHJcbiAgICAgIGxpa2VzOiBkYXRhLmxpa2VzIHx8IFt7fV0sXHJcbiAgICAgIHNhdmVzOiBkYXRhLnNhdmVzIHx8IFt7fV0sXHJcbiAgICAgIGZlZWQ6IGRhdGEuZmVlZCB8fCBbe31dLFxyXG4gICAgICBnZW5lcmF0ZWRJZDogZGF0YS5nZW5lcmF0ZWRJZCxcclxuICAgICAgcmVwbGllczogZGF0YS5yZXBsaWVzIHx8IFt7fV0sXHJcbiAgICB9O1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uLmFkZChuZXdEYXRhKTtcclxuICAgIGNvbnN0IHVzZXIgPSBuZXcgVXNlcihzbmFwc2hvdC5pZCk7XHJcbiAgICB1c2VyLmRhdGEgPSBuZXdEYXRhO1xyXG4gICAgdXNlci5kYXRhLnR3ZWV0cy5wb3AoKTtcclxuICAgIGF3YWl0IHVzZXIucHVzaCgpO1xyXG4gICAgcmV0dXJuIHVzZXI7XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBmaW5kQnlJZCh1c2VySWQ6IG51bWJlcikge1xyXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBjb2xsZWN0aW9uXHJcbiAgICAgIC53aGVyZShcImdlbmVyYXRlZElkXCIsIFwiPT1cIiwgTnVtYmVyKHVzZXJJZCkpXHJcbiAgICAgIC5nZXQoKTtcclxuICAgIGlmIChzbmFwc2hvdC5kb2NzLmxlbmd0aCkge1xyXG4gICAgICB7XHJcbiAgICAgICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXTtcclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXIoZG9jLmlkKTtcclxuICAgICAgICB1c2VyLmRhdGEgPSBkb2MuZGF0YSgpIGFzIFVzZXJEYXRhO1xyXG4gICAgICAgIHJldHVybiB1c2VyO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG4gIHN0YXRpYyBhc3luYyBnZXRBbGwoKSB7XHJcbiAgICBjb25zdCB1c2Vyc1NuYXBzaG90ID0gYXdhaXQgY29sbGVjdGlvbi5nZXQoKTtcclxuICAgIGNvbnN0IHVzZXJzID0gdXNlcnNTbmFwc2hvdC5kb2NzLm1hcCgoZCkgPT4ge1xyXG4gICAgICBjb25zdCBkYXRhID0gZC5kYXRhKCk7XHJcbiAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdXNlcnM7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJmaXJlc3RvcmUiLCJjb2xsZWN0aW9uIiwiVXNlciIsImNvbnN0cnVjdG9yIiwiaWQiLCJyZWYiLCJkb2MiLCJwdXNoIiwidXBkYXRlIiwiZGF0YSIsInB1bGwiLCJzbmFwIiwiZ2V0IiwiY3JlYXRlVXNlciIsImVtYWlsIiwidHJpbSIsInRvTG93ZXJDYXNlIiwibmV3RGF0YSIsImZ1bGxuYW1lIiwicGljcyIsInByb2ZpbGVQaWN0dXJlIiwiY292ZXJQaWN0dXJlIiwiZGVzY3JpcHRpb24iLCJ0d2VldHMiLCJmb2xsb3dlcnMiLCJmb2xsb3dpbmciLCJsaWtlcyIsInNhdmVzIiwiZmVlZCIsImdlbmVyYXRlZElkIiwicmVwbGllcyIsInNuYXBzaG90IiwiYWRkIiwidXNlciIsInBvcCIsImZpbmRCeUlkIiwidXNlcklkIiwid2hlcmUiLCJOdW1iZXIiLCJkb2NzIiwibGVuZ3RoIiwiZ2V0QWxsIiwidXNlcnNTbmFwc2hvdCIsInVzZXJzIiwibWFwIiwiZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./models/user.ts\n");

/***/ }),

/***/ "(api)/./pages/api/tweet/comments/index.ts":
/*!*******************************************!*\
  !*** ./pages/api/tweet/comments/index.ts ***!
  \*******************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var micro_method_router__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! micro-method-router */ \"micro-method-router\");\n/* harmony import */ var micro_method_router__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(micro_method_router__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var lib_middlewares_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! lib/middlewares/auth */ \"(api)/./lib/middlewares/auth.ts\");\n/* harmony import */ var controllers_tweets__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! controllers/tweets */ \"(api)/./controllers/tweets.ts\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([controllers_tweets__WEBPACK_IMPORTED_MODULE_2__]);\ncontrollers_tweets__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nasync function handlePost(req, res, token) {\n    const result = await (0,controllers_tweets__WEBPACK_IMPORTED_MODULE_2__.addComment)(req.body, token);\n    res.send(result);\n}\nasync function handleOptions(req, res) {\n    res.send(200);\n}\nconst handler = micro_method_router__WEBPACK_IMPORTED_MODULE_0___default()({\n    post: (0,lib_middlewares_auth__WEBPACK_IMPORTED_MODULE_1__.authMiddleware)(handlePost),\n    options: handleOptions\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (handler);\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvdHdlZXQvY29tbWVudHMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFDMEM7QUFDWTtBQUNOO0FBRWhELGVBQWVHLFVBQVUsQ0FBQ0MsR0FBbUIsRUFBRUMsR0FBb0IsRUFBRUMsS0FBSyxFQUFFO0lBQzFFLE1BQU1DLE1BQU0sR0FBRyxNQUFNTCw4REFBVSxDQUFDRSxHQUFHLENBQUNJLElBQUksRUFBRUYsS0FBSyxDQUFDO0lBQ2hERCxHQUFHLENBQUNJLElBQUksQ0FBQ0YsTUFBTSxDQUFDLENBQUM7Q0FDbEI7QUFFRCxlQUFlRyxhQUFhLENBQUNOLEdBQW1CLEVBQUVDLEdBQW9CLEVBQUU7SUFDdEVBLEdBQUcsQ0FBQ0ksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0NBQ2Y7QUFDRCxNQUFNRSxPQUFPLEdBQUdYLDBEQUFPLENBQUM7SUFDdEJZLElBQUksRUFBRVgsb0VBQWMsQ0FBQ0UsVUFBVSxDQUFDO0lBQ2hDVSxPQUFPLEVBQUVILGFBQWE7Q0FDdkIsQ0FBQztBQUVGLGlFQUFlQyxPQUFPLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9iYWNrZW5kLy4vcGFnZXMvYXBpL3R3ZWV0L2NvbW1lbnRzL2luZGV4LnRzPzljYWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSBcIm5leHRcIjtcclxuaW1wb3J0IG1ldGhvZHMgZnJvbSBcIm1pY3JvLW1ldGhvZC1yb3V0ZXJcIjtcclxuaW1wb3J0IHsgYXV0aE1pZGRsZXdhcmUgfSBmcm9tIFwibGliL21pZGRsZXdhcmVzL2F1dGhcIjtcclxuaW1wb3J0IHsgYWRkQ29tbWVudCB9IGZyb20gXCJjb250cm9sbGVycy90d2VldHNcIjtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZVBvc3QocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UsIHRva2VuKSB7XHJcbiAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRkQ29tbWVudChyZXEuYm9keSwgdG9rZW4pO1xyXG4gIHJlcy5zZW5kKHJlc3VsdCk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGhhbmRsZU9wdGlvbnMocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcclxuICByZXMuc2VuZCgyMDApO1xyXG59XHJcbmNvbnN0IGhhbmRsZXIgPSBtZXRob2RzKHtcclxuICBwb3N0OiBhdXRoTWlkZGxld2FyZShoYW5kbGVQb3N0KSxcclxuICBvcHRpb25zOiBoYW5kbGVPcHRpb25zLFxyXG59KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGhhbmRsZXI7XHJcbiJdLCJuYW1lcyI6WyJtZXRob2RzIiwiYXV0aE1pZGRsZXdhcmUiLCJhZGRDb21tZW50IiwiaGFuZGxlUG9zdCIsInJlcSIsInJlcyIsInRva2VuIiwicmVzdWx0IiwiYm9keSIsInNlbmQiLCJoYW5kbGVPcHRpb25zIiwiaGFuZGxlciIsInBvc3QiLCJvcHRpb25zIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/tweet/comments/index.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/tweet/comments/index.ts"));
module.exports = __webpack_exports__;

})();